<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>5.2 INTRODUCTION</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_5_2_introduction">5.2 INTRODUCTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter defines the rules that apply to queries and to their responses. It also defines the unsolicited display messages because their message syntax is query-like in nature.</p>
</div>
<div class="paragraph">
<p>Version 2.4 of the standard introduced new models for query and response messages. The layout of this chapter is structured such that all information pertaining to those newly defined query/response message pairs, including auxiliary protocols, appears in sections 5.2–5.9 and the previously defined queries appear in section 5.10. Outstanding issues appear in the final section, 5.11.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 75%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Topic</th>
<th class="tableblock halign-left valign-top">Section Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query/Response Model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evolution of the Query Standard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Development Methodology</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Formats</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Specification Formats</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary Chart of Query/Response Pairs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query/Response Profile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query/Response Message Pairs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.3.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query/Response Message Segments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auxiliary Query Protocols</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publish and Subscribe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Implementation Considerations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query/Response Message Examples</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Superseded Query/Response Trigger Events and Message Pairs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Messages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.10.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original Mode Queries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.10.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outstanding Issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.11</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Standard embraces the most common queries that are likely to occur. These are defined by the functional chapters. The following represents typical examples of queries supported by the Standard:</p>
</div>
<div class="paragraph">
<p>a) data regarding a single patient, e.g., send all lab results for patient #123456</p>
</div>
<div class="paragraph">
<p>b) data regarding multiple patients, e.g., send the list of patients whose attending physician is Dr. #123</p>
</div>
<div class="paragraph">
<p>c) data that is not patient related, e.g., send the age specific normal values for serum protein.</p>
</div>
<div class="paragraph">
<p>d) data within a specified time range, e.g., send all serum glucose results, reported between January 1, 1998 through December 31, 1999, for patient #123456.</p>
</div>
<div class="paragraph">
<p>The variety of potential queries is almost unlimited. There was no attempt here to define a Standard that would cover every possible query. Chapter 5 discusses general ways query/response pairs are structured. Functional chapters discuss specific query/response pairs required for their needs. The technical committees responsible for functionally-specific chapters define detailed content of the query/response segment patterns within those chapters.</p>
</div>
<div class="paragraph">
<p>In particular, there is no implication that a specific system SHALL support generalized queries or Conformance Statements to comply with the Standard. Rather, these transactions provide a format, or a set of tools to support queries to the extent desired by the institution. The resources available and local policies will influence the type of queries that MAY BE implemented.</p>
</div>
<div class="sect2">
<h3 id="_5_2_1_queryresponse_model">5.2.1 Query/response model</h3>
<div class="paragraph">
<p>A query with its response should be thought of as a message pair. The following illustration shows the three generic models of message pairs: the <strong><em>declarative, interrogative,</em></strong> and <strong><em>imperative</em></strong>. Within each model, one system assumes the role of initiator and the other system assumes the role of responder. HL7 queries follow the "interrogative" style of messaging as described below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image1.wmf" alt="extracted-media/media/image1"></span></p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> All messaging in HL7 assumes a single basic paradigm using a point-to-point transmission of an initial message from a sender to a receiver, followed by a response or acknowledgement message from the receiver back to the sender. The response/acknowledgment message may be optional depending on several use cases that will be discussed below. The point-to-point transmission is defined independent of any particular technology or architecture.</p>
</div>
<div class="paragraph">
<p>The <strong><em>declarative</em></strong> model is employed for distribution or broadcast of unsolicited <strong>events</strong> such as the ORU and RDS. <strong>Clients</strong> (<strong>interested parties</strong>) that desire information that resides on a <strong>Server</strong> or <strong>data owner</strong> may "subscribe" to be updated when new information is available on the Server. The Server initiates a transmission of event information. This transmission may be to a single Client, or may be a broadcast to multiple Clients. Each Client responds with an acknowledgement of receipt.</p>
</div>
<div class="paragraph">
<p>The <strong><em>interrogative</em></strong> model is employed for queries. A Client initiates a query (a request for data) to the Server. The Server processes the query, responds with a report of success or failure of the query to the Client, and further responds by delivering information requested by the query.</p>
</div>
<div class="paragraph">
<p>The <strong><em>imperative</em></strong> model is employed for remote interoperation. A Client initiates a request for action (such as an order) to the Server. The Server processes the request and responds with a report of success or failure to the Client.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In HL7 v2, there is no formal assumption of client-server architecture, or of a particular "publish and subscribe" architecture. Thus the roles of the intercommunicating applications may change according to the messaging needs. <em>i.e.</em>, an application may be a data owner or Server for one set of messages (e.g., an order entry system creating orders), and an interested party or Client for another set of messages (e.g., an order entry system receiving order status messages from an ancillary departmental system). Furthermore, the "data owning" system may be a middleware component such as an "application server" or a "messaging gateway" or "router" that distributes information from a server application. In the discussions below, "<em>Client</em>" and "<em>Server</em>" are used as shorthand synonyms for "requesting system/application" and "responding system/application" without implying the assumption of a client/server architecture. Likewise, the support for "publish and subscribe" does not assume a particular operating system or architecture, but is defined at the application level (level 7), in a technology-neutral form. The phrase "<em>data owner</em>" is used to refer to the human institution that operates the Server program. One would say that "the data owner defines the data to be made available by the Server program."</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_2_2_evolution_of_the_query_standard">5.2.2 Evolution of the query standard</h3>
<div class="paragraph">
<p>The Query Standard, like the HL7 Standard in general, has been evolving since its inception in Version 2.1. Version 2.4 introduced a new methodology intended to supersede the previous generation of queries.</p>
</div>
<div class="paragraph">
<p><strong>Original Mode Queries</strong></p>
</div>
<div class="paragraph">
<p>Originally, the parameters of an HL7 query were carried by the QRD and QRF segments. Because these segments were intended to be used by all queries, the content of these segments could only be loosely defined. Such "original mode queries" actually represent just a starting point for defining queries.</p>
</div>
<div class="paragraph">
<p>In these original mode queries, separate trigger events were used to differentiate between an immediate response and a deferred response. In addition, some of the functional chapters defined queries and responses with separate trigger events.</p>
</div>
<div class="paragraph">
<p><strong>Enhanced Mode Queries</strong></p>
</div>
<div class="paragraph">
<p>In HL7 v 2.3, "enhanced mode queries" were introduced that attempted to provide for a much higher level of precision in queries. Four new ways of specifying a query were introduced in Version 2.3.</p>
</div>
<div class="paragraph">
<p>An Embedded Query Language query, which supports free-form select statements, based on the query language of choice (e.g., SQL)</p>
</div>
<div class="paragraph">
<p>a Virtual Table request query which supports queries against server database tables (virtual or actual) based on specific selection criteria</p>
</div>
<div class="paragraph">
<p>a stored procedure request, which enables an application on one system to execute a stored procedure on another system, which is coded to extract specific data</p>
</div>
<div class="paragraph">
<p>an event replay request message, which is used to request data formatted as an event replay response</p>
</div>
<div class="paragraph">
<p>"Enhanced Mode" introduced three new ways to pass data to the responding system (e.g., a Server).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) Passing values to specific parameters of a query. (Used by the stored procedure and event replay queries.) This is the most common and straightforward technique for creating queries. The drawback is that the client is tightly limited in the range of queries it can formulate.</p>
</div>
<div class="paragraph">
<p>2) Passing the query as a single complex query "expression". (Used by the Virtual Table query.) The query is defined by an expression-tree made up of the usual AND OR, '&lt;' , '&gt;', &#8230;&#8203; Operators can refer to column names or variables defined by the Server. These Queries give the Client significant flexibility in specifying their query over the columns that the Server has permitted. The cost of this Client flexibility is that the Server SHALL evaluate the query expression, rather than simply plug parameter values into an existing stored procedure.</p>
</div>
<div class="paragraph">
<p>3) Passing the query as a single string in an existing database query language such as SQL. (Used by the EQL External Query Language query.) An EQL query is represented as a string formatted in the particular syntax of an existing query language. The Server will probably pass this string expression directly to an existing database engine to evaluate the query, which will have to parse this expression to recover the query. The drawback of this technique is that different database engines use different query languages, and so the exact query string which the Client constructs will depend on the Server&#8217;s query language.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Also in Version 2.3, the use of the trigger event was moving closer to the definition set forth in chapter 2. Each offered query had its own trigger event. In Version 2.3.1 each response had its own trigger event.</p>
</div>
<div class="paragraph">
<p><strong>Version 2.4 Queries</strong></p>
</div>
<div class="paragraph">
<p>Users of v 2.3 queries encountered some somewhat arbitrary limitations suggested by the v 2.3 standard. A close reading of the v 2.3 virtual table query wording made it appear that the only way a query could be specified by a QSC selection expression was if it returned tabular (RDT) results, and it seemed that query-by-parameter queries could not return tabular results.</p>
</div>
<div class="paragraph">
<p>Versions of the HL7 standard after v 2.3.1 more cleanly separate how a query is specified from how the data is returned, and they emphasize the existence of a "Conformance Statement." HL7 continues to support the semantics of the Stored Procedure/Event Replay queries and the Virtual Table queries, but formulates the syntax more clearly using a single new query, the Query By Parameter (QBP).</p>
</div>
<div class="paragraph">
<p>The QBP query is intended to unify the semantics of the stored-procedure, event-replay and virtual-table queries within the framework of a precise conformance statement.</p>
</div>
<div class="paragraph">
<p>The standard recognizes the continued use of the Original Mode queries (QRD/QRF), but uses a new query formalism to explain their semantics more clearly.</p>
</div>
<div class="paragraph">
<p>The bulk of the new material after Version 2.3.1 consists of defining a format for Conformance Statements, and giving examples of query design and use.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Version 2.5 introduced a new, use-case-based mechanism for conformance in Section 2.12 of Chapter 2. Query implementers are encouraged to review and, where appropriate, adopt the profiling structures outlined in that section. Conformance Statement structures introduced in Version 2.4 have been renamed Query Profiles.</p>
</div>
<div class="paragraph">
<p><strong>Compatibility with past versions</strong></p>
</div>
<div class="paragraph">
<p>For backward compatibility, both the "original" and "enhanced" queries remain in the standard, but their description has been relegated to a "for backward compatibility only" section. The main part of this chapter is a complete and consistent explanation of the recommended approach to HL7 queries in Version 2.4 and later.</p>
</div>
<div class="paragraph">
<p>As in versions of the standard prior to 2.4, the detailed domain content of the query and response messages is defined by the technical committees responsible for the functionally-specific chapters; the basic forms and methodology for queries and responses are defined in this chapter.</p>
</div>
<div class="paragraph">
<p>Sections <em>5.2.4</em>, "<em>Response format</em>," and <em>5.2.5</em>, "<em>Query specification formats</em>," discuss Response Formats and Query Specification Formats.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_2_3_query_development_methodology">5.2.3 Query development methodology</h3>
<div class="paragraph">
<p>Typically, an individual HL7 conformant query would evolve as follows:</p>
</div>
<div class="paragraph">
<p>An institution, or data owner, decides that it would like to make information available via a query. It decides precisely what data will be made available and how it will be offered. Knowing its own data, the data owner will define its query to return one of three representations of the data:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) As traditional HL7 segments. (See section <em>5.2.4.1</em>, "<em>Segment pattern response</em>.")</p>
</div>
<div class="paragraph">
<p>2) As rows and columns of data from a precisely defined Virtual Table. (See section <em>5.2.4.2</em>, "<em>Tabular response</em>.")</p>
</div>
<div class="paragraph">
<p>3) As rows of human readable text ready to output to a screen or printer. (See section <em>5.2.4.3</em>, "<em>Display response</em>.")</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Next, the data owner specifies exactly which input variables the Client can use to control the data that the Server agrees to return.</p>
</div>
<div class="paragraph">
<p>The complete specification of what data are available, how the data will be returned, and what variables can be valued or constrained in a Query is called the Query Profile.</p>
</div>
<div class="paragraph">
<p>The Query Profile concept is critical to the proper usage of the query/response pair. In the absence of a Query Profile, the Client would be unaware of the existence of the query, let alone how to use it or what to expect from it<strong><em>.</em></strong> The data owner advertises the existence of, and support for, a query by publishing a <strong><em>Query Profile</em></strong>.</p>
</div>
<div class="paragraph">
<p>The Query Profile has the following broad structure:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Introduction including title, trigger events, mode, characteristics and purpose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Grammar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Grammar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Specification and Commentary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output specifications and Commentary</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Query Profile</strong>: A declaration which sets forth the name of the query supported by the Server, the logical structure of the information that can be queried, and the logical structure of what can be returned.</p>
</div>
<div class="paragraph">
<p>Section 0, "<em>Note that the</em> Vaccination Query related messages have been removed as these were deprecated and withdrawn as of v 2.8.</p>
</div>
<div class="paragraph">
<p>Acknowledgment Choreography</p>
</div>
<div class="paragraph">
<p>As of Version 2.9 Infrastructure and Messaging requires that Acknowledgment Choreography be explicitly specified in MSH-15 and MSH-16. Because of the nature of the Query and Response Messaging pattern, the Response message is always an Application Acknowledgment. To specify this, the value in MSH-16 SHALL always be “AL” to indicate that there will always be an Application Acknowledgment to the Query Message. See Chapter 2 for more details on this subject.</p>
</div>
<div class="paragraph">
<p>QUERY/RESPONSE PROFILE," will explain the Query Profile in detail.</p>
</div>
<div class="paragraph">
<p>The next section elaborates on the three styles of response data (segment pattern, tabular, and display) that a data owner may use to represent its data.</p>
</div>
<div class="paragraph">
<p>The introduction of the Query Profile concept is not intended to imply system certification. It is intended to promote well-specified queries. As in previous versions, support for queries is not required for HL7 conformance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_2_4_response_format">5.2.4 Response format</h3>
<div class="paragraph">
<p>The first decision a data owner SHALL make in formulating a query is to decide which style of representing data is most appropriate for their needs.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 81%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HL7 recognizes three main styles of representing responses to queries: <strong><em>tabular, segment pattern, or display</em></strong>. <em>Segment pattern</em> and <em>tabular</em> were previously known as <em>record-oriented</em> as described in earlier versions of this Standard. <em>Segment pattern</em> responses consist of a set of HL7 segments. Each query will define, in its Query Profile, the precise grammar of HL7 segments that it will return. Tabular responses return data as a set of rows, one RDT segment per row. Display queries return data in DSP segments. An HL7 conformant system interested in supporting queries will choose one or more of these styles before proceeding with a detailed design.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The responding system formats the data in a relational format, as rows and columns.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The responding system formats the data on the basis of an application-specific segment-oriented (record-oriented) message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The responding system formats the data in human readable format for direct outputting to a display device (in both original and enhanced modes).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These structures support all original mode and enhanced mode responses, as well as the Conformance Based Queries.</p>
</div>
<div class="sect3">
<h4 id="_5_2_4_0_hiddentext">5.2.4.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_2_4_1_segment_pattern_response">5.2.4.1 Segment pattern response</h4>
<div class="paragraph">
<p>Segment Pattern data responses reflect the traditional way of offering data within HL7. The Server responds to queries by returning a pattern of HL7 segments. For example, the core of a response to a query for Lab data might be defined by the following segment grammar:</p>
</div>
<div class="paragraph">
<p>\{PID</p>
</div>
<div class="paragraph">
<p>OBR</p>
</div>
<div class="paragraph">
<p>[{OBX}]</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>For example, patient information will be returned in the PID segment and laboratory results in OBR and OBX segments. In this style, the message returned by a Server is often a close approximation to an existing unsolicited update HL7 message.</p>
</div>
<div class="paragraph">
<p>In creating a Query Profile for a segment pattern response, the data owner SHALL decide on the exact segment grammar it will return. The output specification of the Query Profile for a segment pattern response will have a structure very similar to the message definition of a standard HL7 transaction. It SHALL define a grammar of segments that will be returned, and, for each segment, it should clarify, where necessary, the meaning of each field, the cardinality of the data, and whether the data is optional or required.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_2_4_2_tabular_response">5.2.4.2 Tabular response</h4>
<div class="paragraph">
<p>A data owner may decide that the best model for the data it wishes to offer is that of a fairly conventional table of rows and columns. In this case, a data owner advertises support for a straightforward ("virtual") table of data, with specific columns of specific data types. It further indicates which of the columns the Client can constrain in its query. The response to a query will be in the form of a set of rows from the advertised table.</p>
</div>
<div class="paragraph">
<p>The Virtual Table is an abstraction around a traditional database table. However, there are important differences between a traditional database table and the Virtual Table. The Virtual Table need not be based on a single table or collection of data. It may represent a "join" or combination of data among database tables (although the "join" or combination is not explicitly exposed to the Client).</p>
</div>
<div class="paragraph">
<p>The concept of <em>table,</em> borrowed from the relational database world, is used merely as a representational aid. The actual internal data structure of the Server need not be relational. Virtual Tables may be used to present data elements from internal structures that are hierarchical, object-oriented, or otherwise non-relational in nature.</p>
</div>
<div class="paragraph">
<p>Virtual Tables therefore insulate the user from the exact data layout or representation in the data source. That is to say, the requestor need not understand the structure of the tables, rows and columns of the database being queried but only the structure of the Virtual Table representation. Likewise, the responder (database owner) does not have to expose the structure of the real database. Neither the owner nor the requestor needs to worry if the structure of the database changes.</p>
</div>
<div class="paragraph">
<p>The rows and columns of the Virtual Table for a query are fully described in the Query Profile for that query.</p>
</div>
<div class="paragraph">
<p>A virtual table data representation is appropriate when the information being offered is relatively simple. It would not be the appropriate representation for lab reports that typically involve a complex nesting of results into sections. Data carried by the typical HL7 segment or segment group could be modeled as a virtual table. For example, the ADT system might offer a table consisting of the fields of PID, NK1 and a single PV1 segment. On the other hand, it would be difficult to represent the visit history of a patient in a single virtual table.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_2_4_3_display_response">5.2.4.3 Display response</h4>
<div class="paragraph">
<p>A display message can be generated where the update information does not need to be captured by the receiving system&#8217;s database, but only displayed, either on a visual medium (such as a PC, workstation or a CRT) or on printed medium.</p>
</div>
<div class="paragraph">
<p>The display response does not actually represent a formal style of data organization. It represents a decision to return data formatted for human, rather than for computer, consumption. The Server offers a pretty-printed version of the data in a format that is meaningful for human readers. Logically, the content of the pretty-printed message might be the complex data carried by an HL7 segment pattern, or could be a simple record normally carried by a tabular response.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_2_4_4_choosing_among_available_response_formats">5.2.4.4 Choosing among available response formats</h4>
<div class="paragraph">
<p>In practice, it is easy to decide which style of data to offer. In general, segment pattern responses are able to carry complex data structures (e.g., an entire laboratory report) while tabular responses are typically simple data structures. Therefore, tabular response is intended as a simpler tool to accomplish a simpler task. There is no need for the Client to understand, parse and process the deep structure and relationships implied by the segment pattern response. The Client does not need a complex state machine to do segment level parsing. The rows all have the same structure so only a simple state machine is needed.</p>
</div>
<div class="paragraph">
<p>If the query is defined by an HL7 technical committee, then the decision is already made. If, on the other hand, no query is yet defined but the domain of the data is well covered by HL7, then it is probable that there are existing HL7 segments that could carry the data. A Z query may be constructed out of the existing HL7 segments. If the data is site specific, the site can either create its own Z segments and offer a segment pattern response (which makes particular sense if the overall data is complex) or it can define its own Virtual Table, offer a tabular response and let the Client process each record.</p>
</div>
<div class="paragraph">
<p>Once it is known what data a Server is making available, then the data can be ordered or requested. This is analogous to needing to refer to a catalog before ordering an item by mail.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_2_5_query_specification_formats">5.2.5 Query specification formats</h3>
<div class="paragraph">
<p>The previous section explained the three representations for data that are returned to a query client. This section discusses how the client may represent a query for information.</p>
</div>
<div class="paragraph">
<p>HL7 now recommends one primary way with 3 basic variants for specifying a query.</p>
</div>
<div class="paragraph">
<p>This query model with its variants is intended to assist implementers in translating specific query needs from the ordinary prose of the business model into an appropriate HL7 query paradigm. The paradigm selected will depend upon the philosophy of the institution: whether to allow relative freedom to client systems in composing query expressions, or to control rigidly the fields and operations to be offered. The following paragraphs compare and contrast the features of each of the HL7 query variant models. The differences between them lie mainly in the processing they require on the Server side.</p>
</div>
<div class="paragraph">
<p><strong><em>Query by Simple Parameter</em></strong></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The first variant is called the Simple Parameter query. In the simple parameter query, the input parameters are passed in order as successive fields of an HL7 segment. The Server need only read them from the corresponding HL7 fields, and plug them into an internal function to evaluate the query.</p>
</div>
<div class="paragraph">
<p>This is the most basic form of the query in which the Server specifies a fixed list of parameters in its Query Profile. (For example, the Server may direct the querying system to specify a medical record number, a beginning date, and an ending date.) When invoking the query, the Client passes a specific value for each parameter. This is analogous to invoking a stored procedure against a database.</p>
</div>
<div class="paragraph">
<p>The parameter definition segment (i.e., the QPD) can be seen as a generalization of the QRD and QRF segments of the original mode query. Each field in the QRD and QRF corresponds to 1 parameter of the QPD instance. HL7 recommends that queries defined by QRD and QRF segments be recast as a version 2.4 or later Query By Parameter.</p>
</div>
<div class="paragraph">
<p>The obvious implementation gain is that the Server can simply map the input values to the parameters specified in the Query Profile. An already known function or procedure is called to evaluate the query and select data to be returned. The bulk of the work effort has already been invested in the development of this predefined function or procedure.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong><em>Query by Example Variant:</em></strong></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Query by Example (QBE) is an extension of Query by Parameter (QBP) in which search parameters are passed by sending them in the segment which naturally carries them, instead of as fields of the QPD segment. For example, if one wanted to perform a "find_candidates" query using QBE, one would send the demographics information on which to search in the PID and/or PD1 segments, leaving blank those fields in the segment sent that are not query parameters. If, for example, religion were not one of the query parameters, PID-17 would be left blank when the PID was sent in the query. Parameters which do not occur naturally in an HL7 message, such as search algorithm, confidence level, etc., would continue to be carried in the QPD segment as they are in the Query by Parameter. The exact segments and fields available for use as query parameters would be specified in the Query Profile for the query.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong><em>Query Using the QSC Variant:</em></strong></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The third variant is known as the QSC variant because of its use of the QSC data type, which was used in the Virtual Table query. The Query Profile for the query will define all the variables that the Client may use in an expression. At runtime, the Client is able to define the exact search criteria by constructing a "tree" of operator/operand nodes that constrain the available input parameters. To evaluate the query, the Server SHALL be willing to analyze and interpret the query expression at runtime. The Server may translate the input expression into its local data access language, or perhaps it will interpret the request itself, and evaluate the expression for each item of the virtual table. The client&#8217;s Complex Expression is analogous to an SQL selection statement against a relational database.</p>
</div>
<div class="paragraph">
<p>This variant is most like the Virtual Table Query (VQQ).</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>There are a number of factors to consider in determining which variant to offer. In the Complex Expression (QSC) variant, the Client may select any or all of the variables offered and may specify any permissible operators and values for each variable. By contrast, in the Simple Parameter variant or the Query by Example variant, the Client SHALL provide values for exactly the set of variables offered.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Simple Parameter variant is easy to parse and process because it has positional fields; i.e., the parameters are in a predefined and fixed order. Likewise, the Query by Example variant lends itself to simple processing, since parameters will occur in known positions in defined segments. The Complex Expression variant, on the other hand, requires more involved parsing and processing because of its flexibility and the optionality of its elements. Thus, while the Complex Expression variant offers more functionality to the Client, it is more burdensome for the Server to process. Conversely, the Simple Parameter and Query by Example variants offer less functionality to the Client but are generally easier for the Server to implement; they are often based on existing stored procedures on the Server&#8217;s system.</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_5_2_5_0_hiddentext">5.2.5.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_2_5_1_expressing_the_same_data_using_the_variants">5.2.5.1 Expressing the same data using the variants</h4>
<div class="paragraph">
<p>The following is an example of a query stated in all three variant forms. This example is presented to illustrate the utility of each format for the purpose of offering a query. Which format to use depends upon the level of processing complexity to be implemented on the Server and the degree of specification flexibility required by the Client.</p>
</div>
<div class="paragraph">
<p>The purpose of the query is to allow a simple inquiry upon an administrative database. Suppose a patient information request is submitted by the Client. The Server is to respond with demographic information: patient&#8217;s date of birth, sex, and ZIP code.</p>
</div>
<div class="sect4">
<h5 id="_5_2_5_1_1_expression_as_simple_parameters">5.2.5.1.1 Expression as simple parameters</h5>
<div class="paragraph">
<p>As we have seen, this variant requires an exact parameter specification.</p>
</div>
<div class="paragraph">
<p>The client system transmits a QBP query message in the following format:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|FEH.IVR|HUHA.CSC|HUHA.DEMO||199902031135-0600||QBP</sup>Z58^QBP_Q13|1|D|2.8</p>
</div>
<div class="paragraph">
<p>QPD|Z58^Pat Parm Qry 2|Q502|111069999</p>
</div>
<div class="paragraph">
<p>RCP|I</p>
</div>
<div class="paragraph">
<p>The names of the input and output fields are not specified in the query message, but by the Query Profile, identified by <em>QPD-1-message query name</em>. The <em>MSH-9.2-trigger event</em> and the <em>QPD-1-message query name</em> are this query&#8217;s only distinguishing elements. The requesting system SHALL refer to this query&#8217;s Query Profile to learn more about the input and output fields.</p>
</div>
</div>
<div class="sect4">
<h5 id="_5_2_5_1_2_expression_as_query_by_example">5.2.5.1.2 Expression as query by example</h5>
<div class="paragraph">
<p>Just as in the Simple Parameter variant, the Query by Example requires an exact parameter specification. The distinction in a Query by Example is that segments other than QPD are used to transmit the parameters. The segments offered should be already-existing segments that the Server can parse easily.</p>
</div>
<div class="paragraph">
<p>The client system transmits a Query by Example in the following format.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|FEH.IVR|HUHA.CSC|HUHA.DEMO||199902031135-0600||QBP</sup>Z58^QBP_Q13|1|D|2.8</p>
</div>
<div class="paragraph">
<p>QPD|Z58^Pat Parm Qry 2|Q502</p>
</div>
<div class="paragraph">
<p>RCP|I</p>
</div>
<div class="paragraph">
<p>Parameters used in this query are specified in the Query Profile.</p>
</div>
</div>
<div class="sect4">
<h5 id="_5_2_5_1_3_expression_as_a_complex_expression">5.2.5.1.3 Expression as a complex expression</h5>
<div class="paragraph">
<p>In contrast, the Complex Expression variant allows flexible input specifications. This allows more choices for the Client system, but can require more complex processing capability on the part of the Server System.</p>
</div>
<div class="paragraph">
<p>If the above Simple Parameter variant were to be stated as a Complex Expression, it might look like this.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|FEH.IVR|HUHA.CSC|HUHA.DEMO||199902031135-0600||QBP</sup>Q13^QBP_Q13|1|D|2.8</p>
</div>
<div class="paragraph">
<p>QPD|Z999^Pat Sel Qry 1|Q501|@MedicalRecordNo<sup>EQ</sup>111069999</p>
</div>
<div class="paragraph">
<p>RCP|I</p>
</div>
<div class="paragraph">
<p>Note the explicit statement of the input field name in <em>QPD-3-user parameters</em>. Also, note that this query might be used to specify and request other fields, depending upon the specification of what is permitted by the server system&#8217;s Query Profile.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 36%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Modalities</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple Parameter Variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Server specifies parameters and the Client passes specific values to the parameters when the query is invoked.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complex Expression Variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Server offers variables which can be used by the Client who passes a constraining expression (subject to any limitations specified by the Query Profile) over those variables when invoking the query.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Using the new modalities shown in the table, the variety and number of queries is almost unlimited. There is no implication that a specific Server must support all of these potential generalized queries to comply with the Standard. Rather, these transactions provide a format, or a set of tools, to support queries to the extent desired by the institution. The resources available and local policies will influence the types of queries that are implemented.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_2_6_summary_chart_of_queryresponse_pairs">5.2.6 Summary chart of query/response pairs</h3>
<div class="paragraph">
<p>The following chart delineates the query/response messages defined in chapter 5:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 11%;">
<col style="width: 12%;">
<col style="width: 21%;">
<col style="width: 16%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Query</th>
<th class="tableblock halign-left valign-top">Response</th>
<th class="tableblock halign-left valign-top">Response type</th>
<th class="tableblock halign-left valign-top">Defining segment(s)</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QCN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query By Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.1, 5.4.2, 5.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query, original Mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display response</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Segment Pattern</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response tabular</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tabular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDF/RDT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsolicited display message (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URD/URS</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following chart delineates the query/response messages defined in the functional chapters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 24%;">
<col style="width: 12%;">
<col style="width: 12%;">
<col style="width: 21%;">
<col style="width: 16%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Query</th>
<th class="tableblock halign-left valign-top">Response</th>
<th class="tableblock halign-left valign-top">Response type</th>
<th class="tableblock halign-left valign-top">Defining<br>
segment(s)</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADT response (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^A19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADR^A19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allocate identifiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP^Q24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP^K24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3.59</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ancillary RPT (display) (for backward compatibility only)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find candidates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP^Q22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP^K22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3.57</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get corresponding identifiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP^Q23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP^K23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3.58</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get person demographics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP^Q21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP^K21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3.56</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order status query/ Order status response (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSQ^Q06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSR^Q06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy administration information (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^Q27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAR^RAR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master files query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MFQ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master files query response</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MFR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.43</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Personnel information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP^Qnn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP^Knn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15.3.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy dispense information (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^Q28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDR^RDR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode(withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy dose information (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^Q30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RGR/RGR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy encoded order information (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^Q29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RER^RER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy prescription order response (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^Q26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ROR^ROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request clinical information (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RQC^I05</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Results of observation, query for (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRY^R02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORF^R04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Clinical Information (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCI^I05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Clinical List (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCL^I06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode (withdrawn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QRD/QRF</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return patient referral</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RRI</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return patient referral</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schedule query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.5.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schedule query response</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.5.3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that the Vaccination Query related messages have been removed as these were deprecated and withdrawn as of v 2.8.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_2_7_acknowledgment_choreography">5.2.7 Acknowledgment Choreography</h3>
<div class="paragraph">
<p>As of Version 2.9 Infrastructure and Messaging requires that Acknowledgment Choreography be explicitly specified in MSH-15 and MSH-16. Because of the nature of the Query and Response Messaging pattern, the Response message is always an Application Acknowledgment. To specify this, the value in MSH-16 SHALL always be “AL” to indicate that there will always be an Application Acknowledgment to the Query Message. See Chapter 2 for more details on this subject.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_3_queryresponse_profile">5.3 QUERY/RESPONSE PROFILE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The introduction of the Query/Response Profile<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> concept is not intended to imply system certification. It is intended to promote the definition and implementation of well-specified queries. As in previous versions, support for queries is not required for HL7 conformance.</p>
</div>
<div class="paragraph">
<p>In the introduction, the data owner describes the data being made available and the purpose of the query. He specifies the exact coded value for the Query Name which the Client SHALL use to invoke this query.</p>
</div>
<div class="paragraph">
<p>The Query Grammar defines the exact segments the Client MAY send. For each field of those segments, the Query Profile SHALL define how the Server will interpret client values. (For example, the patient name field is interpreted as a regular expression match.)</p>
</div>
<div class="paragraph">
<p>The Response Grammar defines the exact pattern of segments that the Server will return. Each Segment Pattern Response will specify its own pattern of segments. (For example, lab data queries will return patterns of OBR and OBX, while demographic queries might respond with patterns of PID, PV1,&#8230;&#8203; segments.) When a data owner defines a tabular response query, the response grammar might simply be a list of RDT segments that carry rows of data. The user selects columns from a Virtual Table to define the output for the Query by Parameter/Tabular Response (QBP/RTB).</p>
</div>
<div class="paragraph">
<p>Note that in the case of an HL7-defined query, a specific section of the HL7 Standard will define a Query Profile. By contrast, in the case of a site defined query, the Query Profile is written by analysts and programmers of the Server application/system, and is available to the analysts and programmers of the Client application/system.</p>
</div>
<div class="paragraph">
<p>Although the Query Profile was a new construct with Version 2.4, it may also be used with the previous generation queries.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Version 2.5 introduced a new, use-case-based mechanism for conformance in Chapter 2. Query implementers are encouraged to review and, where appropriate, adopt the profiling structures outlined in that chapter. Current Query Profile structures are retained in Chapter 5 pending revision to the new structures in the next version of the Standard.</p>
</div>
<div class="sect2">
<h3 id="_5_3_1_using_the_query_profile">5.3.1 Using the Query Profile</h3>
<div class="paragraph">
<p>Critical to the proper usage of the new query/response pairs is the Query Profile concept. In the absence of a Query Profile, the Client might not be aware of the existence of a query, or might not know how to use it or what to expect from it.</p>
</div>
<div class="paragraph">
<p>The Server advertises the existence of, and support for, a query by publishing a <strong><em>Query Profile</em></strong>. The Query Profile identifies the query, specifies what items can be queried and describes what the response will look like.</p>
</div>
<div class="paragraph">
<p><strong>Query Profile:</strong> A declaration which sets forth the name of the query supported by the Server, the logical structure of the information that can be queried, and the logical structure of what can be returned.</p>
</div>
<div class="paragraph">
<p>A number of examples of Query Profiles can be found in section <em>5.9</em>, "<em>QUERY/RESPONSE MESSAGE EXAMPLES</em>."</p>
</div>
<div class="sect3">
<h4 id="_5_3_1_0_hiddentext">5.3.1.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_3_1_1_query_with_tabular_response_example">5.3.1.1 Query with tabular response example</h4>
<div class="paragraph">
<p>The user wishes to know the identity of the patient whose medical record number is "555444222111".</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|PCR|GenHosp|MPI||199811201400-0800||QBP</sup>Q40^QBP_Q13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q40<sup>WhoAmI</sup>HL7nnnn|Q0001|555444222111<sup>^</sup>MPI^MR|||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RCP|I|</p>
</div>
<div class="paragraph">
<p>RDF|6|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p>The MPI system returns the following RTB message</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|MPI|GenHosp|PCR||199811201400-0800||RTB</sup>K13^RTB_K13|ACK9901|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q0001|OK|Q40<sup>WhoAmI</sup>HL7nnnn|1|</p>
</div>
<div class="paragraph">
<p>QPD|Q28<sup>WhoAmI</sup>HL7nnnn|Q0001|555444222111<sup>^</sup>MPI^MR|||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RDF|6|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam||19600614|M||</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_1_2_example_of_query_profile_with_tabular_response">5.3.1.2 Example of Query Profile with tabular response</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z99):</th>
<th class="tableblock halign-left valign-top">Z99</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query (or Publish)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who Am I</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z99</sup>QBP_Q13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z84</sup>RSP_Z84</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns response sorted by PatientLastName unless otherwise specified. Note that neither the PID nor the RDF segments are used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find the identity of the patient for specified medical record number(s)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns response sorted by PatientLastName unless otherwise specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>QBP<sup>Z99</sup>QBP_Q13: Query Grammar: QBP Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ PID ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Identification Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <a href="#RDF">RDF</a> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="\l">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ RDF ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z99</sup>QBP_Q13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Z84</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z84</sup>RSP_Z84</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z84</sup>RSP_Z84</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z84</sup>RSP_Z84</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>RSP<sup>Z84</sup>RSP_Z84: Response Grammar: RTB Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ <a href="#RDT">RDT</a> } ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 24%;">
<col style="width: 37%;">
<col style="width: 10%;">
<col style="width: 29%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z84</sup>RSP_Z84</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Z84</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3 Patient Identifier List</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z99<sup>WhoAmI</sup>HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Components: &lt;ID (ST)&gt; ^ &lt;check digit (ST)&gt; ^ &lt;code identifying the check digit scheme employed (ID)&gt; ^ &lt; assigning authority (HD)&gt; ^ &lt;identifier type code (IS)&gt; ^ &lt; assigning facility (HD)&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientID, and PatientIDAssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The PatientIDTypeCode is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigning Authority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier Type Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 13%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mother&#8217;sMaidenName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-6 Mother&#8217;s Maiden Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-7 Date/Time of Birth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-8 Sex</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Race</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-10 Race</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_5_3_2_formal_specification_of_the_query_profile">5.3.2 Formal specification of the Query Profile</h3>
<div class="paragraph">
<p>The Query Profile contains the following information:</p>
</div>
<div class="paragraph">
<p>Query Profile ID: The unique identifier applying to this query&#8217;s Query Profile. This value is transmitted as the first component of <em>QPD-1-Message query name</em>. For sites implementing the Conformance SIG&#8217;s Implementation Guide, this value shall also be transmitted in <em>MSH-21-Query Profile ID</em>.</p>
</div>
<div class="paragraph">
<p>Formal Query Name: identifies a unique query or publication, e.g., PharmacyDispenseHistory.</p>
</div>
<div class="paragraph">
<p>Query Trigger: identifies the trigger event for the query. Note that more than one Query Profile may map to the same generic trigger event (Q10 through Q15). If a non-generic trigger event is used, it should correspond to exactly one Query Profile.</p>
</div>
<div class="paragraph">
<p>The use of Q for HL7-standard query trigger events is conventional; another letter may be used if the supply of Q triggers is exhausted.</p>
</div>
<div class="paragraph">
<p>The assignment of a trigger event, while mandatory, is intended to facilitate processing rather than to identify a query uniquely. A query is uniquely identified by the value transmitted in <em>QPD-1-Message query name</em>. This value SHALL be the same in both the query and response messages, even though the trigger event for the query differs from the trigger event for the response.</p>
</div>
<div class="paragraph">
<p>Response Trigger: identifies the unique trigger event for the response. Note that more than one Query Profile may map to the same generic trigger event (K10 through K15). If a non-generic trigger event is used, it should correspond to exactly one Query Profile.</p>
</div>
<div class="paragraph">
<p>The use of K for HL7-standard response trigger events is conventional; another letter may be used if the supply of K triggers is exhausted.</p>
</div>
<div class="paragraph">
<p>Query Priority: Specifies if the query is immediate, deferred or selectable.</p>
</div>
<div class="paragraph">
<p>Query Characteristics: Narrative describing general feature of the query.</p>
</div>
<div class="paragraph">
<p>Purpose: Describes intent of query.</p>
</div>
<div class="paragraph">
<p>Query Grammar: defines the logical structure of what can be sent by the Client. The structure of this part of the Query Profile is very similar in appearance to a message syntax.</p>
</div>
<div class="paragraph">
<p>Response Grammar: defines the logical structure of what can be returned by the Server. The structure of this part of the Query Profile is very similar in appearance to a message syntax with two additional columns: Comment and Support Indicator.</p>
</div>
<div class="paragraph">
<p>Data Model: the logical structure of the information that can be queried. It can be thought of as a set of rows or a list of items having the same format as the Virtual Table structure described in the next section. This works for both tabular and segment pattern queries. A display query can be considered as orthogonal to the tabular and segment pattern queries and follows the same input structure. This is not always included in the Query Profile.</p>
</div>
<div class="paragraph">
<p>Input Parameter Field Specification and Commentary: Cites the allowable parameters that can be passed to the recipient. The structure of this part of the Query Profile is very similar in appearance to an HL7 Segment Attribute Table with several additional columns: ColName, Key/Search, Sort, MatchOp, SegmentFieldName, and Service Identifier Code.</p>
</div>
<div class="paragraph">
<p>A QPD Input Parameters table and corresponding explanation table is always provided. These tables discuss all the fields of the QPD segment, including <em>QPD-1-Message query name</em> and <em>QPD-2-Query tag</em>. If the query is a Query by Example, additional input parameters and explanation tables are provided for all the fields that may be populated in the example segments.</p>
</div>
<div class="paragraph">
<p>Response Control: Specifies execution date and time, restrictions on amount of data, and query modality. This is not always included in the Query Profile.</p>
</div>
<div class="paragraph">
<p>Output Specification and Commentary: Used for tabular and display response. For the tabular response, it specifies the column names that will be returned. The structure of this part of the Query Profile is very similar in appearance to an Attribute Table with several additional columns: ColName, Key/Search, Sort, MatchOp, SegmentFieldName, and Service Identifier Code. For the display response, it describes the format of the data that will be returned.</p>
</div>
<div class="paragraph">
<p>Note that in the case of an HL7-defined query, a specific section of the HL7 standard will define a Query Profile. The existence of a standard Query Profile for any given query does <strong>not</strong> mean that a system SHALL implement this particular query to be conformant to the HL7 Standard. However, systems that do implement the query SHALL follow the specifications as given in the Query Profile.</p>
</div>
<div class="paragraph">
<p>Sites that wish to offer queries not specified by the Standard may create their own Query Profiles. By contrast to an HL7-standard query, in the case of a site defined query, the Query Profile is written by the Server, and is available to the analysts and programmers of the Client system to enable them to know the exact behavior of the Server.</p>
</div>
<div class="paragraph">
<p>Although the Query Profile was a new construct with version 2.4, it may also be used with the previous generation queries.</p>
</div>
<div class="paragraph">
<p>Input Parameter Specification and Input Field Description and Commentary are always included for the QPD segment. When the Query by Example variant is used, they are provided for the QBE as well. An Output Specification and Commentary showing a Virtual Table is provided for queries that accommodate a tabular response.</p>
</div>
<div class="paragraph">
<p>For Query Profiles published in the HL7 Standard, each table includes the Query Profile ID in parentheses in the upper left-hand cell. This allows the table to be imported automatically into the HL7 database.</p>
</div>
<div class="sect3">
<h4 id="_5_3_2_0_hiddentext">5.3.2.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_3_2_1_steps_for_developing_a_query_profile">5.3.2.1 Steps for developing a Query Profile</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) Before composing the Query Profile, express the query in ordinary English sentences.</p>
</div>
<div class="paragraph">
<p>2) Transform the query into a mathematical or pseudo-language statement. A syntax such as SQL provides a useful mechanism.</p>
</div>
<div class="paragraph">
<p>3) From the pseudo-statement, extract the parameters and the operations upon the parameters.</p>
</div>
<div class="paragraph">
<p>4) Advertise the parameters in the Query Profile.</p>
</div>
<div class="paragraph">
<p>5) Within the Query Profile, explain the operations that will be performed upon the parameters: relational conjunctions, equality/inequality, etc. Use examples to aid the user in understanding how the query might be invoked in specific instances.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_2_query_profile_introduction">5.3.2.2 Query Profile introduction</h4>
<div class="paragraph">
<p>The Query Profile begins with a table that summarizes the characteristics and identifying information about the query to which the Query Profile applies.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Znn):</th>
<th class="tableblock halign-left valign-top">Znn</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Query Statement ID</strong>: The unique identifier applying to this Query Profile. This value is transmitted as the first component of <em>QPD-1-Message query name</em>.</p>
</div>
<div class="paragraph">
<p><strong>Type</strong>: Usually <strong>Query</strong>, except for publish-and subscribe Query Profiles (see section <em>5.7.3.1</em>, "<em>Example of a publish and subscribe Query Profile</em>") for which the value should be <strong>Publish</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Query Name</strong>: The name corresponding to the identifier in <strong>Query Statement ID</strong>. This value is transmitted as the second component of <em>QPD-1-Message query name</em>.</p>
</div>
<div class="paragraph">
<p><strong>Query Trigger (= MSH-9)</strong>: The exact value that the Client will transmit in the <em>MSH-9-Message type</em> field of the query message.</p>
</div>
<div class="paragraph">
<p><strong>Query Mode</strong>: Whether the query may be sent in <strong>Real time</strong> (including Bolus) or in <strong>Batch</strong>; see section <em>5.5.6.3</em>, "<em>Interactive continuation of response messages</em>." The value <strong>Both</strong> indicates that both real-time/bolus and batch modes are acceptable.</p>
</div>
<div class="paragraph">
<p><strong>Response Trigger (= MSH-9)</strong>: The exact value that the Server will transmit in the <em>MSH-9-Message type</em> field of the response message.</p>
</div>
<div class="paragraph">
<p><strong>Query Characteristics</strong>: Particular features of this query. This is free text intended to help the query implementor in selecting among queries.</p>
</div>
<div class="paragraph">
<p><strong>Purpose</strong>: The end result that this query is intended to accomplish. Free text.</p>
</div>
<div class="paragraph">
<p><strong>Response Characteristics</strong>: Particular features of this response. This is free text intended to help the query implementor in selecting among queries.</p>
</div>
<div class="paragraph">
<p><strong>Based on Segment Pattern</strong>: For queries that return a segment pattern response, this is the (non-query response) message type upon which the segment pattern is based.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_3_query_grammar">5.3.2.3 Query grammar</h4>
<div class="paragraph">
<p>The Query Profile shows a query grammar. This is a brief model of the segments used in the query message.</p>
</div>
<div class="paragraph">
<p>QBP<sup>Znn</sup>QBP_Qnn: Query Grammar: QBP Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <a href="#RDF">RDF</a> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Znn</sup>QBP_Qnn</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Znn</sup>RTB_Knn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Znn</sup>RTB_Knn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Znn</sup>RTB_Knn</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Query Grammar</strong>: This and the following column specify the HL7 code name and full name of each segment sent in the query. Braces specify that the segment or segment group is repeatable; brackets specify the optionality of the segment or segment group.</p>
</div>
<div class="paragraph">
<p><strong>Section Reference</strong>: Specifies where in the standard further information about the segment can be found.</p>
</div>
<div class="paragraph">
<p>When the Query by Example variant is used, the Query Grammar shows the segments that may be used to transmit parameters and the order in which they appear. Segments used to transmit parameters are always sent immediately following the QPD segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_4_response_grammar">5.3.2.4 Response grammar</h4>
<div class="paragraph">
<p>The Query Profile always shows a response grammar. If the query response is segment pattern, the response grammar should specify the segments, order, optionality, and repetition as do message specifications within the HL7 Standard.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Znn</sup>RTB_Knn: Response Grammar: Widget Dispense Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Znn</sup>RTB_Knn</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response Grammar</strong>: This and the following column specify the HL7 code name and full name of each segment returned in the response. Braces specify that the segment or segment group is repeatable; brackets specify the optionality of the segment or segment group.</p>
</div>
<div class="paragraph">
<p>For Query Profiles published in the HL7 Standard, the Response Grammar table includes the Query Profile ID in parentheses in the upper left-hand cell. This allows the table to be imported automatically into the HL7 database.</p>
</div>
<div class="paragraph">
<p><strong>Message Description</strong>: The full text name of the segment.</p>
</div>
<div class="paragraph">
<p><strong>Group Control</strong>: The name of a segment group.</p>
</div>
<div class="paragraph">
<p><strong>Comment</strong>: Specifies in English: 1) the opening or closing of a segment group, and 2) the relevance of the segment in a Hit Count. (Only positive value is noted.)</p>
</div>
<div class="paragraph">
<p><strong>Support Indicator</strong>: Allows the Server to indicate: 1) whether an optional segment or segment group will be supported, or 2) that the segment or segment group is dependent on an input parameter. The default understanding is that if the Server knows the information, it will be sent.</p>
</div>
<div class="paragraph">
<p><strong>Sec Ref</strong>: Specifies where in the standard further information about the segment can be found.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_5_response_grammar_for_display_response">5.3.2.5 Response grammar for display response</h4>
<div class="paragraph">
<p>The response grammar for a display response lists the segment names, descriptions, and section references for the segments to be returned by the Server, as described in the previous section. In addition, the print text is displayed, as in the following example.</p>
</div>
<div class="paragraph">
<p>RDY<sup>Znn</sup>RDY_K15: Response Grammar: Dispense History</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#DSP">DSP</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Data</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>Znn</sup>RDY_K15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">The data will display as follows: (Query ID=Z99)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:mm-dd-yy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| DISPENSE HISTORY REPORT PAGE n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP|||XXXXX XXXXXx, XXXXX XXXXXXXXXXXXXXXX mm/dd/ccyy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| &lt;&lt; END OF REPORT &gt;&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_5_3_2_6_qpd_input_parameter_specification">5.3.2.6 QPD input parameter specification</h4>
<div class="paragraph">
<p>The Input Parameter Specification section of the Query Profile looks very much like an attribute table and is followed by a commentary on the fields. Each row of the QPD Input Parameter Specification specifies one user parameter within the QPD segment. Values for user parameters are transmitted in successive fields of the QPD segment, beginning at QPD-3.</p>
</div>
<div class="paragraph">
<p>When the QSC variant is employed (see section <em>5.2.5.1.3</em>, "<em>Expression as a complex expression</em>"), a complex query expression may be used as the only input parameter, or may be combined with other (simple) input parameters.</p>
</div>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following is a description of the attributes of the above table.</p>
</div>
<div class="paragraph">
<p><strong>Field Seq</strong>: The ordinal number of the element being discussed. Sequence 1 is <span class="underline">always</span> Message Query Name, and sequence 2 is <span class="underline">always</span> Query Tag. Sequence 3 and above are reserved for user parameters.</p>
</div>
<div class="paragraph">
<p><strong>Name</strong>: the user-defined name for the element as will be used in the query. Example: MedicationDispensed. When <strong>Name</strong> is derived from an actual HL7 element (segment and field), the segment field name and element name appear in the columns headed by those names. When <strong>Name</strong> is not derived from an actual HL7 element (segment and field), the source system defines the values they expect in this field.</p>
</div>
<div class="paragraph">
<p>For Query Profiles published in the HL7 Standard, the Input Parameter Specification table includes the Query Profile ID in parentheses in the upper left-hand cell. This allows the table to be imported automatically into the HL7 database.</p>
</div>
<div class="paragraph">
<p><strong>Key/Search</strong>: This field identifies which element is the key and which elements are searchable. The key field is designated by a value of 'K'. A value of 'S' designates fields upon which an indexed search can be performed by the source. 'L' designates non-indexed fields. (Note that searching on a non-indexed field requires the Server to perform a linear scan of the data base.) If this column is left blank, the field may not be searched.</p>
</div>
<div class="paragraph">
<p><strong>Sort</strong>: valued as "Y" if the output of the query can be sorted on this field. This column should only be valued in Virtual Tables that are used as output specifications.</p>
</div>
<div class="paragraph">
<p><strong>Len</strong>: the maximum field length that will be transmitted by the source.</p>
</div>
<div class="paragraph">
<p><strong>Type</strong>: the data type of this user parameter. The values available for this field are described in Chapter 2, section 2.16 of this standard. Data types QIP and QSC are available for transmitting complex user parameters.</p>
</div>
<div class="paragraph">
<p><strong>Opt</strong>: defines whether the field is required ('R'), optional ('O'), conditionally required ('C'), or required for backward compatibility ('B').</p>
</div>
<div class="paragraph">
<p><strong>Rep</strong>: valued as 'Y' if the field may repeat (i.e., be multiply valued).</p>
</div>
<div class="paragraph">
<p><strong>Match Op</strong>: the relational operator that will be applied against the value that the querying system specifies for this field.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> These are defined by <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70209"><em>HL7 Table 0209 – Relatio__nal Operator</em></a>, a component of the QSC data type</p>
</div>
<div class="paragraph">
<p><strong>TBL</strong>: identifies the HL7 table from which the values are derived.</p>
</div>
<div class="paragraph">
<p><strong>Segment Field Name</strong>: identifies the HL7 segment and field from which the new definition is derived. This field will be blank if the Name is NOT derived from an actual HL7 segment and field.</p>
</div>
<div class="paragraph">
<p><strong>Service Identifier Code:</strong> a value of data type CWE that contains the applicable LOINC code, if it exists, or the applicable HL7 code, if it exists, if no Segment Field Name has been identified. If a Segment Field Name has been identified, this field is not populated.</p>
</div>
<div class="paragraph">
<p><strong>Element Name</strong>: the name of the element identified by Segment Field Name. This may also be a user-defined 'Z'-element.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_7_qpd_input_parameter_field_description_and_commentary">5.3.2.7 QPD input parameter field description and commentary</h4>
<div class="paragraph">
<p>The QPD Input Parameter Field Description and Commentary provides a more detailed description of each of the fields transmitted in the QPD segment.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 62%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z99<sup>WhoAmI</sup>HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">InputItem&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Parameter</strong>: The name of the field whose value is being transmitted.</p>
</div>
<div class="paragraph">
<p><strong>Comp. Name</strong>: When the <strong>Input Parameter</strong> is of a composite data type (e.g.<em>,</em> XPN), this is the name of an individual component of the composite input parameter. Only those components that may be valued should be listed in this column.</p>
</div>
<div class="paragraph">
<p><strong>DT</strong>: The data type of the parameter or component.</p>
</div>
<div class="paragraph">
<p><strong>Description</strong>: A narrative description of the parameter or component and how it is to be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_8_qbe_input_parameter_specification">5.3.2.8 QBE input parameter specification</h4>
<div class="paragraph">
<p>In the Query by Example variant, discussed below in section <em>5.9.7</em>, "_<br>
Query by example (QBP) / tabular response (RTB_)," the Query Profile may specify that the client may use fields within actual message segments, such as the PID segment, to transmit parameter information. Where this is permitted, the Query Profile includes a "QBE Input Parameter Specification" table to specify which fields may be used to transmit the parameters.</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 13%;">
<col style="width: 14%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 8%;">
<col style="width: 6%;">
<col style="width: 12%;">
<col style="width: 12%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segment Field Name (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Fields are indicated by their actual Segment Field Name, which specifies both segment and position. Except for this distinguishing feature, the remaining columns in this table are identical in meaning to their counterparts in the "<em>QPD input parameter specification</em>" in section <em>5.3.2.6</em> above.</p>
</div>
<div class="paragraph">
<p>Each row of the QBE Input Parameter Specification specifies one field that may be used to transmit user parameters within the example segment(s).</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_9_qbe_input_parameter_field_description_and_commentary">5.3.2.9 QBE input parameter field description and commentary</h4>
<div class="paragraph">
<p>The QPD Input Parameter Field Description and Commentary provides a more detailed description of each of the fields transmitted in the example segments sent in a Query by Example.</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 11%;">
<col style="width: 8%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Parameter (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comp. Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Fields are indicated by their actual Segment Field Name, which specifies both segment and position. Except for this distinguishing feature, the remaining columns in this table are identical in meaning to their counterparts in the "<em>QPD input parameter field description and commentary</em>" in section <em>5.3.2.7</em> above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_10_rcp_input_parameter_field_description_and_commentary">5.3.2.10 RCP input parameter field description and commentary</h4>
<div class="paragraph">
<p>The RCP Input Parameter Field Description and Commentary provides a more detailed description of each of the fields transmitted in the RCP (Response Control Parameters) segment.</p>
</div>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 22%;">
<col style="width: 11%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 38%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Field Seq</strong>: The position within the RCP segment that the field occupies.</p>
</div>
<div class="paragraph">
<p><strong>Name</strong>: The name of the field whose value is being transmitted.</p>
</div>
<div class="paragraph">
<p><strong>Component Name</strong>: When the field referenced by <strong>Name</strong> is of a composite data type (e.g., XPN), this is the name of an individual component of the composite input parameter. Only those components that may be valued should be listed in this column.</p>
</div>
<div class="paragraph">
<p><strong>LEN</strong>: The maximum length of the field.</p>
</div>
<div class="paragraph">
<p><strong>DT</strong>: The data type of the parameter or component.</p>
</div>
<div class="paragraph">
<p><strong>Description</strong>: A narrative description of the parameter or component and how it is to be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_11_input_specification_virtual_table">5.3.2.11 Input specification: virtual table</h4>
<div class="paragraph">
<p>When the QSC variant is in use, the Query Profile includes a Virtual Table specification listing the fields that the Client may include in the complex expression parameter.</p>
</div>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <strong>ColName</strong> column identifies each field name that the Client may include in the complex query expression. Other columns in this table are defined as in section <em>5.3.2.6</em> above.</p>
</div>
<div class="paragraph">
<p>When both the QSC variant and a tabular response are specified, this table is labeled "Input/Output Specification: Virtual Table" and no separate output specification is provided.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_12_virtual_table_field_description_and_commentary">5.3.2.12 Virtual table field description and commentary</h4>
<div class="paragraph">
<p>The Virtual Table Field Description and Commentary provides a more detailed description of each of the fields listed in the Virtual Table.</p>
</div>
<div class="paragraph">
<p><strong>Virtual Table Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 64%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>ColName</strong>: The name used to identify the column, or field, in the complex expression.</p>
</div>
<div class="paragraph">
<p><strong>Comp. Name</strong>: When the <strong>ColName</strong> is of a composite data type (e.g., XPN), this is the name of an individual component of the column. Only those components that may be valued should be listed.</p>
</div>
<div class="paragraph">
<p>When specifying a field in the complex expression, both the <strong>ColName</strong> and <strong>Comp. Name</strong> attributes should be sent if only a single component is being identified. For instance, <strong>PatientList.ID</strong> would specify the ID component of the <strong>PatientList</strong> field.</p>
</div>
<div class="paragraph">
<p><strong>DT</strong>: The data type of the field or component.</p>
</div>
<div class="paragraph">
<p><strong>Description</strong>: A narrative description of the field or component and how it is to be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_3_2_13_output_specification_for_tabular_response">5.3.2.13 Output specification for tabular response</h4>
<div class="paragraph">
<p>The output specification for the tabular response consists of the Virtual Table description, i.e., the columns and rows. It has the same columns as the input specification, but the rows reflect all of the available rows in the table, not just those that can be filtered upon input.</p>
</div>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The usage of the columns in this table is as described in section <em>5.3.2.8</em>, "<em>QBE input parameter specification</em>." Note that the Key/Search and Match Op fields are only meaningful when a virtual table is used in the input specification (QSC variant).</p>
</div>
<div class="paragraph">
<p>When the QSC variant is in use, the "Input/Output Specification and Commentary" virtual table is used for selection of output fields. No separate table is specified for output.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_3_3_query_profile_templates">5.3.3 Query Profile templates</h3>
<div class="sect3">
<h4 id="_5_3_3_0_hiddentext">5.3.3.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_3_3_1_query_profile_template_for_query_with_tabular_response">5.3.3.1 Query Profile template for query with tabular response</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Znn):</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Znn</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Znn</sup>RTB_K13: Response Grammar: RTB Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ <a href="#RDT">RDT</a> } ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Znn</sup>RTB_K13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>3</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InputItem . . .</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 12%;">
<col style="width: 9%;">
<col style="width: 59%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MessageQueryName</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Znn^&lt;query name&gt;^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QueryTag</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InputItem1</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataType</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Components: (if applicable)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Description)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Valuation note)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Component1</strong> (if applicable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Valuation note)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Complex Expression (QSC) variant.]</p>
</div>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Complex Expression (QSC) variant.]</p>
</div>
<div class="paragraph">
<p><strong>Virtual Table Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 64%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Query by Example variant.]</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 18%;">
<col style="width: 8%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 9%;">
<col style="width: 9%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Field Name (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key/</p>
</div>
<div class="paragraph">
<p>Search</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TBL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Identifier Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Query by Example (QBE) variant.]</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 11%;">
<col style="width: 8%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Parameter (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comp. Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 18%;">
<col style="width: 23%;">
<col style="width: 11%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 38%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_5_3_3_2_query_profile_template_for_query_with_segment_pattern_response">5.3.3.2 Query Profile template for query with segment pattern response</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Znn):</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>QBP<sup>Znn</sup>QBP_Q11: Query Grammar: QBP Message</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 2.9126%;">
<col style="width: 30.097%;">
<col style="width: 0.9708%;">
<col style="width: 45.631%;">
<col style="width: 0.9708%;">
<col style="width: 8.7378%;">
<col style="width: 0.9708%;">
<col style="width: 9.7092%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Sec. Ref</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ARV}]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Restriction</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional query by example segments</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Znn</sup>QBP_Q11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Znn</sup>RSP_Znn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Znn</sup>RSP_Znn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Znn</sup>RSP_Znn</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>RSP<sup>Znn</sup>RSP_Znn: Response Grammar: RSP Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(additional segments according to the data to be produced)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Znn</sup>RSP_Znn</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Col Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InputItem . . .</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 12%;">
<col style="width: 9%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Znn^&lt;query name&gt;^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InputItem1</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataType</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Components: (if applicable)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Description)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Valuation note)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Component1</strong> (if applicable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Valuation note)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Complex Expression (QSC) variant.]</p>
</div>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Complex Expression (QSC) variant.]</p>
</div>
<div class="paragraph">
<p><strong>Virtual Table Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 64%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Query by Example (QBE) variant.]</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 18%;">
<col style="width: 8%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 9%;">
<col style="width: 9%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Field Name (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key/</p>
</div>
<div class="paragraph">
<p>Search</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TBL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Identifier Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Query by Example variant.]</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 11%;">
<col style="width: 8%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Parameter (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comp. Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 28%;">
<col style="width: 11%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 38%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_5_3_3_3_query_profile_for_query_with_display_response">5.3.3.3 Query Profile for query with display response</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Znn):</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Znn</sup>QPB_Q15 can be found in 5.4.3. Use the QBP<sup>Q15</sup>QPB_Q15 Message structure.</p>
</div>
<div class="paragraph">
<p>RDY<sup>Znn</sup>RDY_K15: Response Grammar: RDY Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#DSP">DSP</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Data</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>Znn</sup>RDY_K15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Znn</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">The data will display as follows: (Query ID=Znn)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| (data in actual display format)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InputItem</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 12%;">
<col style="width: 9%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Znn^&lt;query name&gt;^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InputItem1</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataType</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Components: (if applicable)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Description)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Valuation note)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Component1</strong> (if applicable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Valuation note)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Complex Expression (QSC) variant.]</p>
</div>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Complex Expression (QSC) variant.]</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 64%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Query by Example (QBE) variant.]</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 18%;">
<col style="width: 8%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 9%;">
<col style="width: 9%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Field Name (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key/</p>
</div>
<div class="paragraph">
<p>Search</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TBL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Identifier Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[The following table is used only for the Query by Example variant.]</p>
</div>
<div class="paragraph">
<p><strong>QBE Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 11%;">
<col style="width: 8%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Parameter (Query ID=Znn)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comp. Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 28%;">
<col style="width: 11%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 38%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Znn)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_5_3_3_4_query_profile_table_summaries">5.3.3.4 Query Profile table summaries</h4>
<div class="paragraph">
<p>The following table lists the tables that are to be included in each Query Profile. The differences arise both from the query variant used and the response type provided.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 14%;">
<col style="width: 49%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Included</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Section Reference</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None (QPD)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar for display response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar for display response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar for display response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input specification: virtual table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual table field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None (QPD)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output specification for tabular response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output specification for tabular response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input/output specification: virtual table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual table field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None (QPD)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBE input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Profile introduction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response grammar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input specification: virtual table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual table field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCP input parameter field description and commentary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.3.2.10</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_4_queryresponse_message_pairs">5.4 QUERY/RESPONSE MESSAGE PAIRS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The query recommended for use in v 2.4 and later is the Query by Parameter (QBP). The query/response message pairs that follow in this section supersede the previous generation of original mode and enhanced queries that are described in sections <em>5.10.2</em>, "<em>Original mode queries</em>," and, in v 2.6 and preceding, 5.10.3, "Originally Mode Deferred Access," and 5.10.4, "Other Query/Response Message Segments."</p>
</div>
<div class="paragraph">
<p>All queries SHALL have a Query Name. The Query Name field, which is a CWE data type, uniquely identifies a Query Profile.</p>
</div>
<div class="paragraph">
<p>The QBP allows for several variants in defining the selection criteria.</p>
</div>
<div class="paragraph">
<p>The first variant, the Query by (Simple) Parameter, is to declare a sequence of one to many HL7 fields. Each of these fields will retain its data type as defined in the original HL7 usage. Each field corresponds to a parameter in the Query Profile.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> It is the responsibility of the Server to declare explicitly the purpose of the query, the meaning of each of the query parameters, and the relationships among the parameters. These declarations are made in the Query Profile.</p>
</div>
<div class="paragraph">
<p>A second variant, the Query by Example, allows the specification of parameters within actual HL7 segments other than the QPD. For example, the Query Profile might permit the use of the PID segment to transmit specific patient identification parameters. Each such parameter is specified in <strong>the QBE Input Parameter Specification</strong> and <strong>QBE Input Parameter Field Description and Commentary</strong> tables.</p>
</div>
<div class="paragraph">
<p>The third variant uses a single QPD parameter in the form of a complex query selection expression. This field with its QSC data type allows the defining segment to be broader in scope and allows any field in the target data to be selected and filtered unless constrained through the Query Profile. It explicitly states any relational operators such as AND and OR. It is intended to support a wide range of combinations of parameters.</p>
</div>
<div class="paragraph">
<p>The difference in how parameters are passed in each of these three variants is as follows:</p>
</div>
<div class="paragraph">
<p>Query by Simple Parameter passes each client value to the Server positionally using only the third and successive fields of the QPD segment.</p>
</div>
<div class="paragraph">
<p>Query by Example passes parameters using HL7 segments, such as PID, that are defined in the endpoint application chapters. The third and successive fields of the QPD segment also may be used in this variant.</p>
</div>
<div class="paragraph">
<p>In the QSC Selection Criteria variant, the parameter values are all contained within a single complex query selection expression that is passed in QPD-3.</p>
</div>
<div class="paragraph">
<p>Each generic query has a specific message syntax, a unique trigger event, and a unique message structure. Each generic response also has a specific message syntax, a unique trigger event, and a unique message structure.</p>
</div>
<div class="paragraph">
<p>There are three generic message structures, each of which accommodates the specific detail needed in each of the three response types.</p>
</div>
<div class="paragraph">
<p>The QBP_Q11 structure supports a Segment Pattern Response and contains the MSH, QPD, RCP, and DSC segments. Its default trigger event is Q11. A standard or site-defined query may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined query, that value SHALL begin with Z.</p>
</div>
<div class="paragraph">
<p>The QBP_Q13 structure supports a Tabular Response and contains the MSH, RCP, RDF, and DSC segments. Its default trigger event is Q13. A standard or site-defined query may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined query, that value SHALL begin with Z.</p>
</div>
<div class="paragraph">
<p>The QBP_Q15 structure supports a Display Response and contains the MSH, QPD, RCP, and DSC segments. Its default trigger event is Q15. A standard or site-defined query may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined query, that value SHALL begin with Z.</p>
</div>
<div class="paragraph">
<p>The new queries support both immediate and deferred response. This information is carried in the RCP segment along with the execution date and time.</p>
</div>
<div class="paragraph">
<p>The query definition segment is echoed back in the response. This is particularly important in a continuation situation. Otherwise, the sender might conceivably have to manage a queue of queries.</p>
</div>
<div class="sect2">
<h3 id="_5_4_1_qbprsp_query_by_parametersegment_pattern_response_events_vary">5.4.1 QBP/RSP – query by parameter/segment pattern response (events vary)</h3>
<div class="paragraph">
<p>QBP<sup>Q11</sup>QBP_Q11: Query By Parameter</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ARV}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Restriction</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional query by example segments</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Q11</sup>QBP_Q11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q11</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>K11</sup>RSP_K11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>K11</sup>RSP_K11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>K11</sup>RSP_K11</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The QBP_Q11 structure supports a Segment Pattern Response and contains the MSH, QPD, RCP, and DSC segments. Its default trigger event is Q11. A standard or site-defined query may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined query, that value SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p>RSP<sup>K11</sup>RSP_K11: Segment Pattern Response</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ ERR }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- SEGMENT_PATTERN begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Pattern from Query Profile</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- SEGMENT_PATTERN end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>K11</sup>RSP_K11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>K11</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The RSP_K11 supports a Segment Pattern Response to the QBP and contains the MSH, MSA, ERR, QAK, QPD, variable content segments, and the DSC. Its default trigger event is K11. A standard or site-defined response may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined response, that value SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Note on QBP</strong>: Query By Example variant: The query by example is an extension of Query by Parameter (QBP) in which search parameters are passed by sending them in the segment which naturally carries them. A Query Profile which uses this variant SHALL replace the ellipses in the input QBP_Q11 grammar above, with the specific segments that it accepts.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The indicated trigger events are the default values for MSH-9-2-Trigger event. Standard and site-defined queries may use these trigger events or may specify unique trigger event values in their Query Profiles. Unique trigger event values for site-defined queries SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Note on RSP:</strong> The Query Profile for each QBP/RSP pair shall specify an explicit segment pattern grammar in place of the ellipses shown above in the RSP_K11 grammar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_4_2_qbprtb_query_by_parametertabular_response_events_vary">5.4.2 QBP/RTB – query by parameter/tabular response (events vary)</h3>
<div class="paragraph">
<p>The QBP_Q13 structure supports a Tabular Response and contains the MSH, RDF, RCP, and DSC segments. Its default trigger event is Q13. A standard or site-defined query may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined query, that value SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p>Unless otherwise specified in the query&#8217;s Query Profile, the default value for the RDF segment shall be understood to contain all available fields from the Virtual Table. The Client may override the default RDF by specifying explicitly the columns to be returned.</p>
</div>
<div class="paragraph">
<p>The message structure for QBP<sup>Q13</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>K13</sup>RTB_K13: Table Based Response</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ ERR }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ <a href="#RDT">RDT</a> } ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>K13</sup>RTB_K13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>K13</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The RTB_K13 supports a Tabular Response to the QBP and contains the MSH, MSA, ERR, QAK, QPD, RDF, RDT and the DSC. Its default trigger event is K13. A standard or site-defined response may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined response, that value SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p>The RTB_K13 structure requires that, if any RDT segments are returned, they be preceded by an RDF segment containing the row definition specification for the RDT segments. If no RDF was sent in the query, the default RDF is returned in the RTB_K13.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The indicated trigger events are the default values for MSH-9-2-Trigger event. Standard and site-defined queries may use these trigger events or may specify unique trigger event values in their Query Profiles. Unique trigger event values for site-defined queries SHALL begin with <strong>Z</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_4_3_qbprdy_query_by_parameterdisplay_response_events_vary">5.4.3 QBP/RDY – query by parameter/display response (events vary)</h3>
<div class="paragraph">
<p>QBP<sup>Q15</sup>QBP_Q15: Query By Parameter</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional query by example segments</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.14</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Q15</sup>QBP_Q15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q15</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>K15</sup>RDY_K15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>K15</sup>RDY_K15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>K15</sup>RDY_K15</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The QBP_Q15 structure supports a Display Response and contains the MSH, QPD, RCP, and DSC segments. Its default trigger event is Q15. A standard or site-defined query may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined query, that value SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p>RDY<sup>K15</sup>RDY_K15: Display Based Response</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ ERR }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ <a href="#DSP">DSP</a> } ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Data</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.14</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>K15</sup>RDY_K15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>K15</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The RDY_K15 supports a Display Response to the QBP and contains the MSH, MSA, ERR, QAK, DSP, and the DSC. Its default trigger event is K15. A standard or site-defined response may use this trigger event or may specify a unique trigger event value in its Query Profile. If a unique trigger event value is chosen for a site-defined response, that value SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The indicated trigger events are the default values for MSH-9-2-Trigger event. Standard and site-defined queries may use these trigger events or may specify unique trigger event values in their Query Profiles. Unique trigger event values for site-defined queries SHALL begin with <strong>Z</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Note on QBP</strong>: Query By Example variant: The query by example is an extension of Query by Parameter (QBP) in which search parameters are passed by sending them in the segment which naturally carries them. A Query Profile which uses this variant SHALL replace the ellipses in the input QBP_Q11 grammar above, with the specific segments that it accepts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_4_4_qsb_create_subscription_event_q16">5.4.4 QSB – Create subscription (Event Q16)</h3>
<div class="paragraph">
<p>See section <em>5.7</em>, "<em>PUBLISH AND SUBSCRIBE</em>" for more information about this event.</p>
</div>
<div class="paragraph">
<p>QSB<sup>Q16</sup>QSB_Q16: Create Subscription</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QSB<sup>Q16</sup>QSB_Q16</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q16</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q16</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q16</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q16</sup>ACK</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>ACK<sup>Q16</sup>ACK: General Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q16</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q16</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_5_4_5_qvr_query_for_previous_events_event_q17">5.4.5 QVR – query for previous events (Event Q17)</h3>
<div class="paragraph">
<p>The Query for Previous Events is like a Query by Parameter with a Segment Pattern Response except that the response consists of zero to many messages of the type defined in the Query Profile rather than a single response message containing multiple iterations of the segment pattern. While the messages sent in response to a QVR will reflect events which occurred in the past, the time stamp in the message header will reflect the time the message is actually constructed (current time). It is also similar to the previous generation VQQ/RQQ Event Replay.</p>
</div>
<div class="paragraph">
<p>While the response is similar to subscription messages, it differs from subscription in that the response messages are the result of "interrogating" the database rather than events being triggered in the current timeframe.</p>
</div>
<div class="paragraph">
<p>In a Query for Previous Events, the Server still has to parse the query, but avoids the handshaking protocols required in normal query/response situations. The Server acknowledges the query with the general acknowledgement message ACK. The Server then transmits a sequence of messages as if they were simulated unsolicited messages. This is useful for low end systems that unable to deal with the overhead of the query response message syntax, i.e., systems that can only process unsolicited update messages.</p>
</div>
<div class="paragraph">
<p>Systems that choose to offer the QVR should offer guidance in the Query Profile, where appropriate, concerning the scope and size of the data requested by the Client. Moreover, the Query Profile should contain language cautioning Clients of the potential for harm from getting messages out of the original sequence and/or context.</p>
</div>
<div class="paragraph">
<p>Use cases for this query are as follows: 1) to populate a database initially, 2) to recover from an extended down time on the part of the recipient, or 3) to enable systems which normally receive unsolicited data to be extended to act as a query client with minimal modification.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If there is a concern that it will be difficult to distinguish these messages from any current realtime messages, e.g., if they are going down the same pipe, the data offerer might choose to designate a unique <em>MSH-3 Sending application</em> for the messages it sends in response to a QVR. This would allow downstream systems to recognize which messages were the result of the QVR, versus which are the result of current realtime activity on the sending system. For example, there may be 2 systems receiving pharmacy dispense messages. If system A wishes to issue a QVR to receive a historical load, system B might misinterpret the QVR results coming over the pipe as actual live data. A separate Sending Application name would allow for easy differentiation.</p>
</div>
<div class="paragraph">
<p>QVR<sup>Q17</sup>QVR_Q17: Query for Previous Events</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional query by example segments</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QVR<sup>Q17</sup>QVR_Q17</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q17</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q17</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q17</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q17</sup>ACK</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>ACK<sup>Q17</sup>ACK: General Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q17</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>Q17</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The QVR message segments are identical to those of the QBP. A QVR Query Profile may use either the QSC or query by example syntactic variants as well as the query by simple parameter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_4_6_qcnack_cancel_queryacknowledge_message_event_j01">5.4.6 QCN/ACK – cancel query/acknowledge message (Event J01)</h3>
<div class="paragraph">
<p>QCN<sup>J01</sup>QCN_J01: Cancel Query</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QID">QID</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query identification Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.3</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 30%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QCN<sup>J01</sup>QCN_J01</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J01</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J01</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J01</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J01</sup>ACK</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>ACK<sup>J01</sup>ACK: General Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J01</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J01</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_5_4_7_qsx_ack_cancel_subscriptionacknowledge_message_event_j02">5.4.7 QSX /ACK – cancel subscription/acknowledge message (Event J02)</h3>
<div class="paragraph">
<p>See section <em>5.6</em>, "<em>AUXILIARY QUERY PROTOCOLS</em>" for more information about this event.</p>
</div>
<div class="paragraph">
<p>QSX<sup>J02</sup>QCN_J01: Cancel Subscription</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QID">QID</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query identification Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.3</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 31%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QSX<sup>J02</sup>QCN_J01</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J02</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J02</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J02</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J02</sup>ACK</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>ACK<sup>J02</sup>ACK: General Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ERR ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 24%;">
<col style="width: 37%;">
<col style="width: 10%;">
<col style="width: 29%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgement Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J02</sup>ACK</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>J02</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_5_queryresponse_message_segments">5.5 QUERY/RESPONSE MESSAGE SEGMENTS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section includes all message segments, except for the general message segments, used for the query/response pairs recommended for use in v 2.4 and later.</p>
</div>
<div class="sect2">
<h3 id="_5_5_1_dsp_display_data_segment">5.5.1 DSP – Display Data segment</h3>
<div class="paragraph">
<p>The DSP segment is used to contain data that has been preformatted by the sender for display. The semantic content of the data is lost; the data is simply treated as lines of text.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – DSP[<mark>DSP .anchor]</mark>### – Display Data</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00061</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set ID – DSP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00062</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Level</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00063</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00064</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical Break Point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00065</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result ID</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_1_0_dsp_field_definitions">5.5.1.0 DSP field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_1_1_dsp_1_set_id_dsp_si_00061">5.5.1.1 DSP-1 Set ID – DSP (SI) 00061</h4>
<div class="paragraph">
<p>Definition: This field is used optionally to number multiple display segments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_1_2_dsp_2_display_level_si_00062">5.5.1.2 DSP-2 Display Level (SI) 00062</h4>
<div class="paragraph">
<p>Definition: This field contains numbering to define groups of fields as assigned by the individual sites or applications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_1_3_dsp_3_data_line_tx_00063">5.5.1.3 DSP-3 Data Line (TX) 00063</h4>
<div class="paragraph">
<p>Definition: This field contains an actual line as it should be displayed. As described for the TX data type, highlighting and other special display characteristics may be included.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_1_4_dsp_4_logical_break_point_st_00064">5.5.1.4 DSP-4 Logical Break Point (ST) 00064</h4>
<div class="paragraph">
<p>Definition: This field is non‑null if this line is the last line of a logical break point in the response as defined by the responding system.</p>
</div>
<div class="paragraph">
<p>Often the lines of display text will fall into logical groups that differ from the physical size of a screen or printer page. For example, a complete battery or an entire radiology report might be thought of as comprising a logical group, though it might have as few as six or as many as 120 lines. Knowledge of the logical break points in the display data can be useful to the application system that is displaying or printing data. For this reason, <em>DSP-4-Logical break point</em> is used. The sending application (the one that formats the data) places the logical break points where appropriate. If there is a particular ancillary result ID associated with the data delineated by <em>DSP-4-Logical break point</em>, the value of this ID also can be returned in <em>DSP-5-Result ID</em>. Then if the user selects the area of the display delineated by <em>DSP-4-Logical break point</em>, the displaying system can query for the associated <em>DSP-5-Result ID</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_1_5_dsp_5_result_id_tx_00065">5.5.1.5 DSP-5 Result ID (TX) 00065</h4>
<div class="paragraph">
<p>Definition: When the user selects a result ID (defined by <em>DSP-4-Logical break point</em>) from the screen display corresponding to a record in which <em>DSP-5-Result ID</em> is non-null, the application can initiate a second query (a separate session) to the ancillary with the <em>QRD-10-What department data code</em> filled in with this non-null value (e.g., the ancillary accession number or its equivalent). The ancillary response will contain the report referenced by this result ID (e.g., accession number). The ancillary should correlate the result ID with <em>DSP-4-Logical break point</em> as follows: If more than one line of text is sent per result, <em>DSP-5-Result ID</em> should be only non-null for a DSP segment that contains a non-null <em>DSP-4-Logical break point</em>. This field may be broken into components by local agreement. A common example might be to include placer order number, filler order number, and universal service identifier. Whenever such fields are used as components of the result ID, their components will be sent as subcomponents.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_2_qak_query_acknowledgment_segment">5.5.2 QAK - Query Acknowledgment segment</h3>
<div class="paragraph">
<p>The QAK segment contains information sent with responses to a query. The QAK segment may appear as an optional segment placed after the (optional) ERR segment in any query response (message) to any original mode query.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – QAK[<mark>QAK .anchor]</mark>### – Query Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00696</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2..2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70208">0208</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00708</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Response Status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70471">0471</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01375</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Query Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01434</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hit Count Total</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01622</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This payload</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01623</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits remaining</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_2_0_qak_field_definitions">5.5.2.0 QAK field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_2_1_qak_1_query_tag_st_00696">5.5.2.1 QAK-1 Query Tag (ST) 00696</h4>
<div class="paragraph">
<p>Definition: This field may be valued by the initiating system to identify the query, and may be used to match response messages to the originating query. If it is valued, the responding system is required to echo it back as the first field in the query acknowledgment segment (QAK). This field differs from <em>MSA-2-message control ID</em> in that its value remains constant for each message (i.e., all continuation messages) associated with the query, whereas <em>MSA-2-Message control ID</em> may vary with each continuation message, since it is associated with each individual message, not the query as a whole. <em>QAK-1-Query tag</em> is not conditional on the presence of the <em>QRD-1-Query ID</em> field in the original mode queries; in the original mode queries <em>QAK-1-Query tag</em> is not used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_2_2_qak_2_query_response_status_id_00708">5.5.2.2 QAK-2 Query Response Status (ID) 00708</h4>
<div class="paragraph">
<p>Definition: This field allows the responding system to return a precise response status. It is especially useful in the case where no data is found that matches the query parameters, but where there is also no error. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70208"><em>HL7 Table 0208 – Query Response Status</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_2_3_qak_3_message_query_name_cwe_01375">5.5.2.3 QAK-3 Message Query Name (CWE) 01375</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the name of the query. These names are assigned by the function-specific chapters of this specification. Site-specific event replay query names begin with the letter "Z." Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70471"><em>User defined table 0471 – Query name</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_2_4_qak_4_hit_count_total_nm_01434">5.5.2.4 QAK-4 Hit Count Total (NM) 01434</h4>
<div class="paragraph">
<p>Definition: This field, when used, contains the total number of records found by the Server that matched the query. For tabular responses, this is the number of rows found. For other response types, the Query Profile defines the meaning of a "hit."</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_2_5_qak_5_this_payload_nm_01622">5.5.2.5 QAK-5 This Payload (NM) 01622</h4>
<div class="paragraph">
<p>Definition: This field, when used, contains the total number of matching records that the Server sent in the current response. Where the continuation protocol is used to transmit the response in partial installments, this number will differ from the value sent in <em>QAK-4-Hit count total</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_2_6_qak_6_hits_remaining_nm_01623">5.5.2.6 QAK-6 Hits Remaining (NM) 01623</h4>
<div class="paragraph">
<p>Definition: This field, when used, contains the number of matching records found by the Server that have yet to be sent. It is only meaningful when the Server uses the continuation protocol to transmit partial responses.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_3_qid_query_identification_segment">5.5.3 QID - Query Identification segment</h3>
<div class="paragraph">
<p>The QID segment contains the information necessary to uniquely identify a query. Its primary use is in query cancellation or subscription cancellation.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – QID[<mark>QID .anchor]</mark>### – Query Identification</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00696</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70471">0471</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01375</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Query Name</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_3_0_qid_field_definitions">5.5.3.0 QID field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_3_1_qid_1_query_tag_st_00696">5.5.3.1 QID-1 Query Tag (ST) 00696</h4>
<div class="paragraph">
<p>Definition: This field identifies the instance of a query.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_3_2_qid_2_message_query_name_cwe_01375">5.5.3.2 QID-2 Message Query Name (CWE) 01375</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the name of the query. These names are assigned by the function-specific chapters of this specification. Site-specific query names begin with the letter "Z." Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70471"><em>User defi__ned table 0471 – Query name</em></a> for suggested values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_4_qpd_query_parameter_definition_segment">5.5.4 QPD – Query Parameter Definition segment</h3>
<div class="paragraph">
<p>The QPD segment defines the parameters of the query.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – QPD[<mark>QPD .anchor]</mark>### – Query Parameter Definition</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70471">0471</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01375</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Query Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00696</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3-n</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">varies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01435</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Parameters (in successive fields)</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_4_0_qpd_field_definitions">5.5.4.0 QPD field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_4_1_qpd_1_message_query_name_cwe_01375">5.5.4.1 QPD-1 Message Query Name (CWE) 01375</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the name of the query. These names are assigned by the function-specific chapters of this specification. It is one to one with the Query Profile for this query name, and it is in fact an identifier for that Query Profile. Site-specific query names begin with the letter "Z." Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70471"><em>User defined table 0471 – Q__uery name</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_4_2_qpd_2_query_tag_st_00696">5.5.4.2 QPD-2 Query Tag (ST) 00696</h4>
<div class="paragraph">
<p>Definition: This field may be valued by the initiating system to identify the query, and may be used to match response messages to the originating query. If this field is valued, the responding system is required to echo it back as the first field in the query acknowledgement segment (QAK).</p>
</div>
<div class="paragraph">
<p>This field differs from <em>MSA-2-Message control ID</em> in that its value remains constant for each message (i.e., all continuation messages) associated with the query, whereas <em>MSA-2-Message control ID</em> may vary with each continuation message, since it is associated with each individual message, not the query as a whole.</p>
</div>
<div class="paragraph">
<p><strong><em>Implementation considerations:</em></strong> It is not necessary to value this field in implementations where the only return message on the socket will be the response to the query that was just sent. Conversely, in an "asynchronous" implementation where many queries, responses, and other messages may be communicated bidirectionally over the same socket, it is essential that this field be valued so that the Client knows to which query the Server is responding.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_4_3_qpd_3_user_parameters_varies_01435">5.5.4.3 QPD-3 User Parameters (Varies) 01435</h4>
<div class="paragraph">
<p>Definition: These successive parameter fields hold the values that the Client passes to the Server.</p>
</div>
<div class="paragraph">
<p>The client data is presented as a sequence of HL7 fields. Beginning at <em>QPD-3-User parameters</em>, the remaining fields of the QPD segment carry user parameter data. Each QPD user parameter field corresponds to one parameter defined in the Query Profile, where each name, type, optionality, and repetition of each parameter has been specified. While these parameters are understood to be usually "anded" together, the user SHALL inspect the required Query Profile to properly understand each. Except in the QSC variant, the parameter names do not need to be stated in the query; they are understood to be positional based on the Query Profile.</p>
</div>
<div class="paragraph">
<p>Each parameter field may be specified in the Query Profile to be of any single data type, including the complex QIP and QSC types. Parameter fields may also contain the sort control (SRT) field or the segment group (ID) field defined in Sections <em>5.5.6.6</em>, "<em>RCP-6 Sort-by Field (SRT)</em> 01624," and <em>5.5.6.7</em>, "<em>RCP-7 Segment Group Inclusion (ID)</em> 01594," below.</p>
</div>
<div class="paragraph">
<p>Parameter fields in the QPD segment appear in the same order as in the Query Profile.</p>
</div>
<div class="sect4">
<h5 id="_5_5_4_3_1_note_on_qpd_usage_for_query_by_example_variant">5.5.4.3.1 Note on QPD usage for query by example variant.</h5>
<div class="paragraph">
<p><strong>Note:</strong> Query By Example: The Query by Example is an extension of Query by Parameter (QBP) in which search parameters are passed by sending them in the segment which naturally carries them. Thus if one wanted to perform a "find_candidates" query using query by example, one would send the demographics information on which to search in the PID and/or PD1 segments leaving blank those fields in the segment sent which are not query parameters. If, for example, religion were not one of the query parameters, PID-17 would be left blank when the PID was sent in the query. Parameters which do not occur naturally in an HL7 message, such as search algorithm, confidence level, etc, would continue to be carried in the QPD segment as they are in the Query by Parameter. The segments and fields available for use as query parameters would be specified in the Query Profile for the query.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_5_qri_query_response_instance_segment">5.5.5 QRI – Query Response Instance segment</h3>
<div class="paragraph">
<p>The QRI segment is used to indicate the weight match for a returned record (where the responding system employs a numeric algorithm) and/or the match reason code (where the responding system uses rules or other match options).</p>
</div>
<div class="paragraph">
<p>Examples of the use of this segment appear in Chapter 3, "Patient Administration," section 3.3.57, "Find Candidates and Response."</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – QRI – Query Response Instance</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01436</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Candidate Confidence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2..2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70392">0392</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01437</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match Reason Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70393">0393</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01438</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm Descriptor</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_5_0_qri_field_definitions">5.5.5.0 QRI field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_5_1_qri_1_candidate_confidence_nm_01436">5.5.5.1 QRI-1 Candidate Confidence (NM) 01436</h4>
<div class="paragraph">
<p>Definition: This field contains a numeric value indicating the match weight or confidence level associated with the record.</p>
</div>
<div class="paragraph">
<p>Example: |0.88| or |12.32|</p>
</div>
<div class="paragraph">
<p>One use of this optional field is in Patient Look-up transactions where the searching system employs a numeric algorithm for determining potential matches to patient/person look-ups.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_5_2_qri_2_match_reason_code_cwe_01437">5.5.5.2 QRI-2 Match Reason Code (CWE) 01437</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains a coded value indicating what search components (e.g., name, birth date, social security number) of the record returned matched the original query where the responding system does not assign numeric match weights or confidence levels. In short, it provides a method for passing a descriptive indication of why a particular record was found.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_5_3_qri_3_algorithm_descriptor_cwe_01438">5.5.5.3 QRI-3 Algorithm Descriptor (CWE) 01438</h4>
<div class="paragraph">
<div class="title">Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70392"><em>User-defined Table 0392 – Match reason</em></a> in Chapter 2C, Code Tables, for suggested values.</div>
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains a text value indicating the name or identity of the specific search algorithm to which the <em>RCP-5 Search confidence threshold</em> and the <em>QRI-1 Candidate confidence</em> refer. Note that there are sometimes significant differences among the algorithms in their numeric scales (e.g., one is 0-100, another might be 10 – 20) as well as their meanings of the same value (two algorithms with an 80% match might not return the same records). Refer to <em><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70393">User-defined Table 0393 – Match algorithms</a></em> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
<div class="paragraph">
<p>Example: |MATCHWARE_1.2^^HL70393| or |LINKSOFT_2.01^^HL70393|</p>
</div>
<div class="paragraph">
<p>One use of this optional field is in Patient Look-up transactions where the searching system employs a numeric algorithm for determining potential matches to patient/person look-ups.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_6_rcp_response_control_parameter_segment">5.5.6 RCP – Response Control Parameter segment</h3>
<div class="paragraph">
<p>The RCP segment is used to restrict the amount of data that should be returned in response to query.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – RCP[<mark>RCP .anchor]</mark>### – Response Control Parameter</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70091">0091</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00027</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70126">0126</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00031</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CNE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70394">0394</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01440</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01441</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execution and Delivery Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70395">0395</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modify Indicator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01624</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..256</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70391">0391</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01594</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment group inclusion</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_6_0_rcp_field_definitions">5.5.6.0 RCP field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_6_1_rcp_1_query_priority_id_00027">5.5.6.1 RCP-1 Query Priority (ID) 00027</h4>
<div class="paragraph">
<p>Definition: This field contains the time frame in which the response is expected. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70091"><em>HL7 Table 0091 – Query priority</em></a> in Chapter 2C, Code Tables, for valid values. Table values and subsequent fields specify time frames for response.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_6_2_rcp_2_quantity_limited_request_cq_00031">5.5.6.2 RCP-2 Quantity Limited Request (CQ) 00031</h4>
<div class="paragraph">
<p>Components: &lt;Quantity (NM)&gt; ^ &lt;Units (CWE)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Units (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the maximum length of the response that can be accepted by the requesting system. Valid entries are numerical values (in the first component) given in the units specified in the second component. Default is LI (lines).</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70126"><em>HL7 Table 0126 – Quantity limited request</em></a> in Chapter 2C, Code Tables, for valid entries for the second component. In a segment pattern response, a line is defined as a single segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_6_3_rcp_3_response_modality_cne_01440">5.5.6.3 RCP-3 Response Modality (CNE) 01440</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field specifies the timing and grouping of the response message(s). Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70394"><em>HL7 Table 0394 – Response modality</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_6_4_rcp_4_execution_and_delivery_time_dtm_01441">5.5.6.4 RCP-4 Execution and Delivery Time (DTM) 01441</h4>
<div class="paragraph">
<p>Definition: Specifies the time the response is to be returned. This field is only valued when <em>RCP-1-Query priority</em> contains the value <strong>D</strong> (Deferred).</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_6_5_rcp_5_modify_indicator_id_01443">5.5.6.5 RCP-5 Modify Indicator (ID) 01443</h4>
<div class="paragraph">
<p>Definition: This field specifies whether the subscription is new or is being modified. Refer to <em><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70395">HL7 Table 0395 – Modify indicator</a></em> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_6_6_rcp_6_sort_by_field_srt_01624">5.5.6.6 RCP-6 Sort-by Field (SRT) 01624</h4>
<div class="paragraph">
<p>Components: &lt;Sort-by Field (ST)&gt; ^ &lt;Sequencing (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: For queries requesting a tabular response, this field specifies by which fields the response is to be sorted, and the order(s) in which sorting is to be performed. When the QSC variant is not in use, the values specified for the first component in this field are derived from the ColName field of the Output Specification and Commentary; see section <em>5.3.3.1</em>, "<em>Query Profile template for query with tabular response</em>." When the QSC variant is used, the values are derived from the ColName field of the Input/Output Specification and Commentary; see section <em>5.9.4.1</em>, "<em>Pharmacy example</em>" for an example.</p>
</div>
<div class="paragraph">
<p>Each repetition of this field specifies a single sort field. Thus, the first repetition of this field specifies the primary sort field; the second repetition specifies the secondary sort field; etc.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_6_7_rcp_7_segment_group_inclusion_id_01594">5.5.6.7 RCP-7 Segment Group Inclusion (ID) 01594</h4>
<div class="paragraph">
<p>Definition: Specifies those optional segment groups which are to be included in the response. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70391"><em>HL7 Table 0391—Segment group</em></a> in Chapter 2C, Code Tables, for values for Segment Group. This is a repeating field, to accommodate inclusion of multiple segment groups. The default for this field, not present, means that all relevant groups are included.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_7_rdf_table_row_definition_segment">5.5.7 RDF – Table Row Definition segment</h3>
<div class="paragraph">
<p>The RDF segment defines the content of the row data segments (RDT) in the tabular response (RTB).</p>
</div>
<div class="paragraph">
<p>As an optional segment in a query either a QBP or QBS, this segment can be used to limit the number of columns returned and to specify what column positions the fields occupy (where supported, these features can be used to override the defaults for the particular query). If omitted, all fields defined for the query are returned in their default column order.</p>
</div>
<div class="paragraph">
<p>As a required segment in a tabular response (RTB) to either a QBP or QBS, this segment defines the contents of the table row data (RDT) segments that follows. It is not necessarily an echo back of the segment as it appeared in the query.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – RDF[<mark>RDF .anchor]</mark>### – Table Row Definition</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00701</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Columns per Row</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E:\\V2\\v2.9 final Nov from Frank\\V29_CH02C_Tables.docx#HL70440[0440]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00702</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column Description</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_7_0_rdf_field_definitions">5.5.7.0 RDF field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_7_1_rdf_1_number_of_columns_per_row_nm_00701">5.5.7.1 RDF-1 Number of Columns per Row (NM) 00701</h4>
<div class="paragraph">
<p>Definition: This field specifies the number of data columns (and therefore the number of fields) contained within each row of returned data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_5_7_2_rdf_2_column_description_rcd_00702">5.5.7.2 RDF-2 Column Description (RCD) 00702</h4>
<div class="paragraph">
<p>Components: &lt;Segment Field Name (ST)&gt; ^ &lt;HL7 Data Type (ID)&gt; ^ &lt;Maximum Column Width (NM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Each repetition of this field consists of three components:</p>
</div>
<div class="paragraph">
<p>The segment field name that identifies the field occupying the column. The segment field name SHALL agree with the column name as it appears in the Query Profile. Use of the @ sign as prefix to the column name is optional.</p>
</div>
<div class="paragraph">
<p>The 2 or 3 character HL7 data type, as defined in Chapter 2. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70440"><em>HL7 Table 0440 – Data types</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
<div class="paragraph">
<p>The maximum width of the column, as dictated by the responding system. (This may vary from the HL7-defined maximum field length.)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_5_8_rdt_table_row_data_segment">5.5.8 RDT – Table Row Data segment</h3>
<div class="paragraph">
<p>The RDT segment contains the row data of the tabular data response message (TBR).</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – RDT[<mark>RDT .anchor]</mark>### – Table Row Data</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">varies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00703</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column Value</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_5_5_8_0_rdt_field_definitions">5.5.8.0 RDT field definitions</h4>

</div>
<div class="sect3">
<h4 id="_5_5_8_1_rdt_1_column_value_varies_00703">5.5.8.1 RDT-1 Column Value (varies) 00703</h4>
<div class="paragraph">
<p>Definition: This field is a requested field. Fields occur in the position order defined for the query or table (unless overridden by an optional RDF segment on a stored procedure request or Virtual Table query message), separated by field delimiters.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_6_auxiliary_query_protocols">5.6 AUXILIARY QUERY PROTOCOLS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses properties of queries that can be described as global properties. These properties enable the Client and Server to deal with timing and sizing issues and to handle exceptions.</p>
</div>
<div class="sect2">
<h3 id="_5_6_1_immediate_vs_deferred_response">5.6.1 Immediate vs. deferred response</h3>
<div class="paragraph">
<p>Responses to queries can be either immediate or deferred. In the immediate mode, the responding process gives the response immediately or in a short period during which the requesting process will wait for the response. In the deferred mode, the response is returned asynchronously, as a separate message pair. Also, a time interval for the deferred transaction may be specified.</p>
</div>
<div class="paragraph">
<p>In the case of immediate mode query, the Server does NOT send a General Acknowledgement (ACK). The acknowledgement of the query is contained within the response message. In the case of deferred mode, the query is acknowledged immediately by an ACK. The Server sends the deferred response at the appropriate time. The Client acknowledges the response with an ACK. In short, the deferred query transaction consists of 2 "round trips."</p>
</div>
<div class="paragraph">
<p>If an immediate mode query message is malformed, a negative ACK is immediately sent.</p>
</div>
<div class="paragraph">
<p>Use cases for Deferred Response include:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) evaluate the query conditions at a certain point in time and then return the response. For example, "At 9 AM tomorrow, evaluate query and return response";</p>
</div>
<div class="paragraph">
<p>2) produce a large report to be communicated to the Server at an off-peak hour. For example, a response which contains all admissions records for the month to be sent at 4:00 a.m., or a reference lab results listing to be sent at noon. A deferred response can benefit both Server and Client in such cases, especially where the generation, communication, and receipt of segments can all be done at times of otherwise low-volume processing.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>If the Query Profile indicates that the Server will support both immediate and deferred responses, then the Client may indicate the desired value of this property by sending it in the <em>RCP-1 Response priority</em> field. If the Server supports only one response type, then the value specified by the Client SHALL agree.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image2.wmf" alt="extracted-media/media/image2"></span></p>
</div>
<div class="paragraph">
<p>The following examples demonstrate how the same query could be invoked in either immediate or deferred mode.</p>
</div>
<div class="sect3">
<h4 id="_5_6_1_0_hiddentext">5.6.1.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_6_1_1_immediate_response">5.6.1.1 Immediate response</h4>
<div class="paragraph">
<p>The Client submits the following query and indicates that an immediate response is desired by setting <em>RCP-1-Response priority</em> to "I".</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201400-0800||QBP<sup>Q42</sup>QBP_Q13|ACK9901|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q42^Tabular Dispense History<sup>HL70471|Q0010|555444222111</sup><sup>^MPI</sup>MR| |19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>RDF|3|PatientList<sup>ST</sup>20<sub>PatientName<sup>XPN</sup>48</sub>MedicationDispensed<sup>ST</sup>40~RXD.3<sup>DTM</sup>24</p>
</div>
<div class="paragraph">
<p>The Server responds one minute later.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201401-0800||RTB<sup>K42</sup>RTB_K13|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q010|OK|Q42^Tabular Dispense History^HL7nnn|4</p>
</div>
<div class="paragraph">
<p>QPD|Q42^Tabular Dispense History<sup>HL7nnn|Q0010|555444222111</sup><sup>^MPI</sup>MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RDF|7|PatientId<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>OrderControlCode<sup>ID</sup>2~ MedicationDispensed<sup>CWE</sup>100<sub>DispenseDate<sup>DTM</sup>24</sub>QuantityDispensed<sup>NM</sup>20~ OrderingProvider<sup>XCN</sup>120</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|525440345^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821-0700|100|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00172409660^BACLOFEN 10MG TABS^NDC |199809221415-0700|10|88<sup>Seven</sup>Henry<sup>^</sup>DR^MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00054384163^THEOPHYLLINE 80MG/15ML SOLN<sup>NDC|199810121145-0700|10|99</sup>Assigned<sup>Amanda</sup><sup>^DR</sup>MD</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_6_1_2_deferred_response_example">5.6.1.2 Deferred response example</h4>
<div class="paragraph">
<p>The Client submits the following query and indicates that a deferred response is desired by setting <em>RCP-1-Response priority</em> to "D".</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201400-0800||QBP<sup>Q42</sup>QBP_Q13|ACK9901|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q42^Tabular Dispense History<sup>HL7nnn|Q0010|555444222111</sup><sup>^MPI</sup>MR| |19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RCP|D|999^RD|</p>
</div>
<div class="paragraph">
<p>RDF|3|PatientList<sup>ST</sup>20<sub>PatientName<sup>XPN</sup>48</sub>MedicationDispensed<sup>ST</sup>40~RXD.3<sup>DTM</sup>24</p>
</div>
<div class="paragraph">
<p>The Server responds one minute later with a general acknowledgement.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201401-0800||ACK<sup>Q42</sup>ACK|8875|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>The Server responds the following morning with the desired data.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811210300-0800||RTB<sup>K42</sup>RTB_K13|9950|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QAK|Q010|OK|Q42^Tabular Dispense History^HL7nnn|4</p>
</div>
<div class="paragraph">
<p>QPD|Q42^Tabular Dispense History<sup>HL7nnn|Q0010|555444222111</sup><sup>^MPI</sup>MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RDF|7|PatientId<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>OrderControlCode<sup>ID</sup>2~ MedicationDispensed<sup>CWE</sup>100<sub>DispenseDate<sup>DTM</sup>24</sub>QuantityDispensed<sup>NM</sup>20~ OrderingProvider<sup>XCN</sup>120</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|525440345^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821-0700|100|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00172409660^BACLOFEN 10MG TABS^NDC |199809221415-0700|10|88<sup>Seven</sup>Henry<sup>^</sup>DR^MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00054384163^THEOPHYLLINE 80MG/15ML SOLN<sup>NDC|199810121145-0700|10|99</sup>Assigned<sup>Amanda</sup><sup>^DR</sup>MD</p>
</div>
<div class="paragraph">
<p>The Client responds immediately with a general acknowledgement.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811210300-0800||ACK<sup>K42</sup>ACK|8750|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|9950|</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_6_2_query_cancellation">5.6.2 Query cancellation</h3>
<div class="paragraph">
<p>Canceling a query is equivalent to canceling an order in that it is asking the discontinuation of a request for which a response may already be on its way. In the case of an interactive query, a cancellation request is a courtesy on the part of the Client, but not strictly required. How long the query will stay open is an implementation issue.</p>
</div>
<div class="paragraph">
<p>Although the effect to the Client is the same as if it had not sent any message (no further query data is received), receipt of this message by the Server enables it to discard any unsent continuation data that might be queued.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|||||||QCN</sup>Jnn^QCN_J01|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>QID|Q001|Q99<sup>SomeQuery</sup>0003|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_6_3_interactive_continuation_of_response_messages">5.6.3 Interactive continuation of response messages</h3>
<div class="paragraph">
<p>The Interactive Continuation Protocol defines the methodology for the intentional transmission of a large query-response payload over multiple HL7 messages. Without this protocol, the response would be returned in a single large logical message.</p>
</div>
<div class="paragraph">
<p>The protocol is called interactive because there is an ongoing dialog between the Client and the Server. The dialog commences when the Client issues a query for a potentially large amount of data, but specifies in the <em>RCP-2-Quantity limited request,</em> that only a limited amount of data is to be returned in each continued response. The Server then returns one response message containing data up to the requested quantity. The Client may continue to ask for further subsets of the data until the entire set is exhausted or may choose to cancel the query.</p>
</div>
<div class="paragraph">
<p>This use of the term "continuation" responses in queries should not be confused with its use in continuing an unsolicited fragmented message. In the case of continuing a response to query the control is on the side of the querying application and there is an explicit cancellation event. In the case of continuation of an unsolicited message, the control is on the part of the sending application and there is no concept of canceling the message transmission.</p>
</div>
<div class="paragraph">
<p>Segment fragmentation and message fragmentation are discussed in Chapter 2.</p>
</div>
<div class="sect3">
<h4 id="_5_6_3_0_hiddentext">5.6.3.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_6_3_1_interactive_continuation_algorithm_and_rules">5.6.3.1 Interactive continuation algorithm and rules</h4>
<div class="paragraph">
<p>The rules for the interactive continuation (of a query response) are as follows:</p>
</div>
<div class="paragraph">
<p>If the Server is sending a subset of the data, the message is terminated with a DSC segment with the <em>DSC-1-Continuation pointer</em> set to the appropriate pointer value and the <em>DSC-2 -Continuation type</em> set to "I".</p>
</div>
<div class="paragraph">
<p>If the Client wishes to receive the next installment, the query is sent again with a DSC segment following the RCP. The <em>DSC-1-Continuation pointer</em> echoes the value sent by the Server.</p>
</div>
<div class="paragraph">
<p>The Server continues to send installments in response to the Client&#8217;s request until there is no more data. The end of data is signified by the absence of the DSC segment OR an empty value in <em>DSC-1-Continuation pointer</em>.</p>
</div>
<div class="paragraph">
<p>If the Client wishes to cancel the query before the end of the data is reached, a Cancel query is sent.</p>
</div>
<div class="paragraph">
<p>In addition to <em>DSC-1-Continuation pointer</em>, <em>QAK-1-Query tag</em> may be used to confirm to the Client which query instance the Server is responding to, since the Client may not be relied upon to have retained the text of each query message and continuation request.</p>
</div>
<div class="paragraph">
<p>The value of <em>MSH-10-Message control ID</em> will be different for every message sent by the Client (i.e., the initial query and each continuation request). Thus the value of <em>MSA-2-Message control ID</em> for each message sent by the Server (which echoes the value of <em>MSH-10-Message control ID</em> from the Client) will vary among multiple response payload messages. By contrast, <em>QAK-1-Query tag</em> will remain the same across all response payload messages to a given query instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_6_3_2_use_case">5.6.3.2 Use case</h4>
<div class="paragraph">
<p>One use of queries is to retrieve data from one application for presentation to users of another. This approach might be used for users of a patient care system retrieving data from lab or other ancillaries. It also might permit users of a pharmacy system to retrieve a patient&#8217;s lab results from the lab system or non-pharmacy order data from the patient care system. Almost any other application system could be the source of data or the system initiating the query for its users.</p>
</div>
<div class="paragraph">
<p>Of particular interest is the case where the inquiring user formulates the query online at the terminal of one system and waits while that system sends the query to another. The inquiring user gets the response and displays it at their terminal. The user formulating such a query may only have limited understanding of what data is available for a given patient. Sometimes the user&#8217;s preference would be to make a simple query such as "give me recent data in reverse chronological sequence" rather than "give me data for yesterday," since there may be some data available for today, or there may be data from two days ago that is of interest. The user will look at the data returned and simply quit looking at it after finding the part that is of interest. (The time frames or the sort sequence may differ, or the user may wish to impose some selectivity on the response, but the general principle remains the same. The user would prefer to make a vague statement of the interest, have the data presented in order of decreasing likelihood of interest, and quit when he or she has seen enough.)</p>
</div>
<div class="paragraph">
<p>While beneficial to the user, this way of requesting data could be very burdensome when the resulting query takes place over an inter-application interface. If the Server were to retrieve, format, and send all the data the user might like to see, the processing load would be extremely high and the response time unacceptable.</p>
</div>
<div class="paragraph">
<p>The interactive continuation protocol provides a way to permit the users to formulate queries loosely while limiting the processing burden on the Server. The Client specifies the general constraints of the query and an amount of data to be returned. (For example, the query might be for lab results for patient #12379 and 44 lines would be requested.) The Server retrieves and formats the specified amount of data and returns it with a special key field, <em>DSC-1-Continuation pointer</em>. The Server presents the requested data to the user and retains the continuation pointer field for use if another query is needed. The internal structure of the value is not known to the Client.</p>
</div>
<div class="paragraph">
<p>If, after viewing the data, the user requests more, the Client sends the query again in a format that is identical with the first, except that <em>DSC-1-Continuation pointer</em> value is included and the requested amount of data may be changed. The Server may use the continuation pointer field as a key into its database to continue retrieval and formatting of the results. If the user does not request more data, no further messages are exchanged.</p>
</div>
<div class="paragraph">
<p>The initiating system may also explicitly terminate the query by sending a QCN^J01 (cancel query) message. Receipt of the QCN^J01 message by the responding system enables it to discard any unsent continuation data that might be queued.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_6_3_3_example_of_interactive_continuation_protocol">5.6.3.3 Example of interactive continuation protocol</h4>
<div class="paragraph">
<p>The user wishes to know all the medications dispensed for the period between January 1, 1998, and December 31, 1999, for the patient whose medical record number is "555444222111". The Client submits the following query and invokes the interactive continuation protocol. Note that the quantity has been limited to 8 lines.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|IE||200009171400-0800||QBP<sup>Q41</sup>QBP_Q15|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q41<sup>DispenseHistory</sup>HL7nnnn|Q001|555444222111<sup>^</sup>MPI ^MR||19980101|19991231|</p>
</div>
<div class="paragraph">
<p>RCP|I|8^LI|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 7 prescription dispenses meeting the criteria. As shown in the following response, eight lines of data are returned as requested. The response ends with a DSC segment showing the continuation pointer and the indication that this is a logical breaking point.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||200009171401-0800||RDY<sup>R41</sup>RDY_K15|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q001|OK|Q41<sup>DispenseHistory</sup>HL7nnnn|^8</p>
</div>
<div class="paragraph">
<p>QPD|Q41<sup>DispenseHistory</sup>HL7nnnn|Q001|555444222111<sup>^</sup>MPI^MR||19980101|19991231|</p>
</div>
<div class="paragraph">
<p>DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:09-17-00</p>
</div>
<div class="paragraph">
<p>DSP||| DISPENSE HISTORY REPORT PAGE 1</p>
</div>
<div class="paragraph">
<p>DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL 120 mg TAB 10/12/1999</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL ER TAB 180MG 09/21/1999</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam BACLOFEN 10MG TABS 08/22/1999</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam THEOPHYLLINE 80MG/15ML SOL 05/29/1999</p>
</div>
<div class="paragraph">
<p>DSP||| &lt;&lt; END OF Screen&gt;&gt;</p>
</div>
<div class="paragraph">
<p>DSC|77|I|</p>
</div>
<div class="paragraph">
<p>The Client wishes to receive another payload. [multiblock footnote omitted]</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|IE||199811201405-0800||QBP<sup>Q41</sup>QBP_Q15|8890|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q41<sup>DispenseHistory</sup>HL7nnnn|Q001|555444222111<sup>^</sup>MPI^MR||19980101|19991231|</p>
</div>
<div class="paragraph">
<p>RCP|I|8^LI|</p>
</div>
<div class="paragraph">
<p>DSC|77|I|</p>
</div>
<div class="paragraph">
<p>The Server returns the next payload and indicates in <em>QAK-4-Hit count</em> that this is the last of the data..</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201407-0800||RDY<sup>K15</sup>RDY_K15|8898|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8890|</p>
</div>
<div class="paragraph">
<p>QAK|Q001|OK|Q41<sup>DispenseHistory</sup>HL7nnnn|<sup>7</sup>^Y|</p>
</div>
<div class="paragraph">
<p>QPD|Q41<sup>DispenseHistory</sup>HL7nnnn|Q001|555444222111<sup>^</sup>MPI^MR||19980101|19991231|</p>
</div>
<div class="paragraph">
<p>DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:09-17-99</p>
</div>
<div class="paragraph">
<p>DSP||| DISPENSE HISTORY REPORT PAGE 1</p>
</div>
<div class="paragraph">
<p>DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL 120 mg TAB 05/29/1998</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL ER TAB 180MG 04/21/1998</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam BACLOFEN 10MG TABS 04/22/1998</p>
</div>
<div class="paragraph">
<p>DSP||| &lt;&lt; END OF REPORT&gt;&gt;</p>
</div>
<div class="paragraph">
<p>The query/response is now completed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_6_3_4_message_fragmentation_example">5.6.3.4 Message fragmentation example</h4>
<div class="paragraph">
<p>Query responses, like unsolicited updates, may need to force the continuation of a message, or even a segment, across multiple physical messages. This is more precisely described as fragmenting. Fragmentation is discussed in detail in Chapter 2. Those aspects pertaining to how this would apply to a query response are repeated here for the reader&#8217;s convenience.</p>
</div>
<div class="paragraph">
<p>The Client requests the last chest x-ray for the patient whose medical record number is 555444222111. The following query is submitted.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|CIS||RAD||199910180900-0700||QBP</sup>Q61^QBP_Q11|7777|P|2.7|</p>
</div>
<div class="paragraph">
<p>QPD|Q61^Radiology Result<sup>HL7nnnn|Q98|555444222111</sup><sup>^</sup>MR|</p>
</div>
<div class="paragraph">
<p>RCP|I|</p>
</div>
<div class="paragraph">
<p>The Server returns the following response but the OBX segment that contains a DICOM image overflows its buffer. The segment is fragmented as follows:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|RAD||CIS||||RSP</sup>K61^RSP_K61|5555|P|2.8|</p>
</div>
<div class="paragraph">
<p>MSA|AA|7777|</p>
</div>
<div class="paragraph">
<p>QAK|Q98|OK|Q61^Radiology Result^HL7nnnn|</p>
</div>
<div class="paragraph">
<p>QPD|Q61^Radiology Result<sup>HL7nnnn|Q98|555444222111</sup><sup>^</sup>MR|</p>
</div>
<div class="paragraph">
<p>PID|||5554442221111<sup>^</sup>^MR|</p>
</div>
<div class="paragraph">
<p>ORC</p>
</div>
<div class="paragraph">
<p>OBR</p>
</div>
<div class="paragraph">
<p>OBX||ED|13^^L||abcdefghij|</p>
</div>
<div class="paragraph">
<p>ADD|</p>
</div>
<div class="paragraph">
<p>DSC|99|F|</p>
</div>
<div class="paragraph">
<p>The Client returns an ACK upon receipt of the response.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|CIS||RAD||||ACK</sup>K61^ACK|7780|P|2.8|</p>
</div>
<div class="paragraph">
<p>MSA|AA|5555|</p>
</div>
<div class="paragraph">
<p>The Server sends the following continued response. Note that the ADD segment will contain the remainder of the data from the fragmented segment. The response then continues on as normal.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|RAD||CIS||||RSP</sup>K61^RSP_K61|5560|P|2.7||99|</p>
</div>
<div class="paragraph">
<p>ADD|klmnop|</p>
</div>
<div class="paragraph">
<p>OBX|</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>The Client returns an ACK upon receipt of the response.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|CIS||RAD||||ACK</sup>K61|7782|P|2.8|</p>
</div>
<div class="paragraph">
<p>MSA|AA|5560|</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_6_4_batch_message_as_a_query_response">5.6.4 Batch message as a query response</h3>
<div class="paragraph">
<p>The HL7 query also can be used to query for a batch in the following manner:</p>
</div>
<div class="paragraph">
<p>a) Use the value B of <em>RCP-3-Response modality</em> to specify a batch response.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If using old style query mode, the value BB or BL of <em>QRD-5-Deferred response type</em> may be used to specify a batch response. The query will be acknowledged with a general acknowledgment as in the Deferred Access example above</p>
</div>
<div class="paragraph">
<p>b) In addition, insert into the batch file the query defining and RCP segments as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 24%;">
<col style="width: 76%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[FHS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(file header segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[BHS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(batch header segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query defining segment Note: if using old style query mode, the QRD and QRF segments may be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RCP]</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(one or more HL7 messages)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[BTS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(batch trailer segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[FTS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(file trailer segment)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>c) The acknowledgment of a batch is described in Chapter 2.</p>
</div>
<div class="paragraph">
<p>d) The Query Profile should stipulate if the batch modality is supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_6_5_query_error_response">5.6.5 Query error response</h3>
<div class="paragraph">
<p>A query/response error can occur at 3 levels:</p>
</div>
<div class="paragraph">
<p>Communication failure (broken connection, timeout)</p>
</div>
<div class="paragraph">
<p>Malformed message (message reject)</p>
</div>
<div class="paragraph">
<p>Malformed query (application error)</p>
</div>
<div class="paragraph">
<p>If the application receiving the query detects an error while processing the query, the preferred method of response is to return an Application Error (AE) or Application Reject (AR) condition in the <em>MSA-1-Acknowledgement code</em> of the applicable query response message. Further description of the error code is to be included in <em>ERR-1-Error code and location</em>. Note that <em>MSA-6-Error condition</em> is retained for backward compatibility for those applications not using the ERR segment. Thus far, this method is consistent with the methods used elsewhere for reporting errors in acknowledgement messages, irrespective of the type of message being acknowledged. In addition, because this is a query response, it is important to include the QAK segment because it specifies the query tag that will identify the particular query instance that was in error. This is of particular importance where a query response may span more than one message.</p>
</div>
<div class="paragraph">
<p>In summary, use the ERR segment to describe the error if the message fails because of</p>
</div>
<div class="paragraph">
<p>a malformed message</p>
</div>
<div class="paragraph">
<p>a malformed query – problem with query tag, problems with parameters</p>
</div>
<div class="paragraph">
<p>The ERR segment supersedes <em>QAK-2-Query response status</em>.</p>
</div>
<div class="paragraph">
<p>There are 3 common situations that can arise in a query error response:</p>
</div>
<div class="paragraph">
<p><strong>Situation 1: Malformed Message</strong></p>
</div>
<div class="paragraph">
<p>The query message itself is bad. The parser does not get to the actual query content. Something is wrong with the envelope, i.e., the message is malformed.</p>
</div>
<div class="paragraph">
<p>The only response is a negative ACK message containing the MSH, MSA and the ERR. That is, the Server creates an ACK message with AR in <em>MSA-1-Acknowledgement code</em> in the above sentence. The dialogue is ended.</p>
</div>
<div class="paragraph">
<p><strong>Situation 2: Malformed Query</strong></p>
</div>
<div class="paragraph">
<p>The query message got to the Server and is legitimate, but the Server cannot process the query for some reason, i.e., the query is malformed.</p>
</div>
<div class="paragraph">
<p>The Response message indicates a negative acknowledgement and shows the problem in the ERR. The response message contains the MSH, MSA, ERR, QAK and the query defining segment if available. That is, the Server creates an ACK message with AE in <em>MSA-1-Acknowledgement code</em> in the above sentence. The rest of the message is absent.</p>
</div>
<div class="paragraph">
<p>Note that the continuation (DSC) segment is not sent or, if it is, its continuation pointer field (<em>DSC-1-Continuation pointer</em>) is null.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The use of AE (application error) and AR (application reject) codes in <em>QAK-2-Query response status</em> has been deprecated in favor of the ERR segment.</p>
</div>
<div class="paragraph">
<p><strong>Situation 3: No data found</strong></p>
</div>
<div class="paragraph">
<p>The query is well formed, but there is no data to be returned by the query. This is not strictly an error condition. This example clarifies the protocol to be followed.</p>
</div>
<div class="paragraph">
<p>The Response message contains MSH, MSA, QAK, and query defining segment. The QAK would indicate "no records found". The rest of the message is absent, i.e., no blank rows or segments are sent.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If the responding application successfully processes the query, but is unable to find any qualifying data, this is not an error condition. The responding application returns an Application Accept (AA) in the MSA segment of the query response message, but does not return any data segments (DSP, RDT, or iterations of the items that are counted in hit counts). The continuation (DSC) segment is not sent or, if it is, its continuation pointer field (<em>DSC-1- Continuation pointer</em>) is null. If the QAK segment is being used, the field <em>QAK-2-Query response</em> status is valued with NF (no data found, no errors).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_7_publish_and_subscribe">5.7 PUBLISH AND SUBSCRIBE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section outlines the framework/process of the publish and subscribe machinery.</p>
</div>
<div class="sect2">
<h3 id="_5_7_1_introduction">5.7.1 Introduction</h3>
<div class="paragraph">
<p>"Publish and subscribe" refers to the ability of one system, the "Publisher", to offer a data stream that can be sent to recipient systems upon subscription. In one sense, the entire HL7 unsolicited update paradigm, in which the sender sends out a stream of messages to recipients, is a kind of publish and subscribe mechanism. Subscriptions to unsolicited updates are established at interface set-up time when analysts on both sides agree to start sending a stream of data.</p>
</div>
<div class="paragraph">
<p>This section describes a mechanism by which the Publisher defines a stream of data, but also agrees to selectively subset the message stream based on query-like data constraints. In the normal case, the right of the Subscriber to subscribe is decided at interface setup time. At runtime, the Subscriber controls the data rules under which it sends messages.</p>
</div>
<div class="paragraph">
<p>Runtime subscription has existed in earlier versions of HL7, but little attention has been drawn to it. Original mode queries could define an open ended time interval in <em>QRF-9-When quantity/timing qualifier</em>. The unexplained semantics of this field had been interpreted to mean: If the QRF-9 specified an end time in the future, then the source system would keep sending results using the query continuation protocol.</p>
</div>
<div class="paragraph">
<p>This section elaborates on such a mechanism, and more cleanly ties the selective filtering into the whole query facility.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_7_2_details">5.7.2 Details</h3>
<div class="paragraph">
<p>Subscription is a process/protocol that allows one system to request that prospective data be sent for a specified period of time, or for an open-ended period of time until further notice. It allows a message stream to be selectively filtered by a query-like mechanism. Specific messages have been defined for subscription and the canceling of a subscription.</p>
</div>
<div class="paragraph">
<p>A Publisher is one who possesses and transmits streams of data. The Publisher might be a mediator or a broker, such as an interface engine. The Publisher is not necessarily the system that collected the data, but it is the system willing to transmit it</p>
</div>
<div class="paragraph">
<p>With traditional "unsolicited update subscriptions" a Publisher sends the entire data stream to the recipients. A Publisher normally transmits unfiltered data. However, the Publisher may agree to selectively filter the stream of data within parameters as defined by analysts. For each filterable stream, the Publisher defines a Query Profile that lists the data values that may be used in the filter expression, and defines the segment pattern for the messages that are selected.</p>
</div>
<div class="paragraph">
<p>If supported in the Query Profile, a subscription may be modified at a later date. <em>RCP-6-Modify indicator</em> is set to "M", and the Action Code parameter is set to "A" or "D" as appropriate. If modification is allowed, the Server bears responsibility for maintaining the filter list. If, as is usually the case, the onus of retaining the filters is on the Client, modification is not allowed and would not be part of the Query Profile.</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_7_3_examples">5.7.3 Examples</h3>
<div class="paragraph">
<p>A lab system normally sends all reports to the central archive. To provide better service to other departments, the Lab decides to offer a filtered stream in addition to the full stream going to the archive.</p>
</div>
<div class="paragraph">
<p>The lab decides that it will allow recipients to select based on the MRN of the patient, on the type of study (OBR-4), and on the ordering provider (OBR-16). It names this filtered stream "ORU-Subscription" and writes a conformance specification.</p>
</div>
<div class="paragraph">
<p>At interface setup time, permission is given for four systems, CommunityNorth, CommunitySouth, CommunityEast and CommunityWest to receive this filtered stream.</p>
</div>
<div class="paragraph">
<p>The Query Profile for this published filtered stream might be:</p>
</div>
<div class="sect3">
<h4 id="_5_7_3_0_hiddentext">5.7.3.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_7_3_1_example_of_a_publish_and_subscribe_query_profile">5.7.3.1 Example of a publish and subscribe Query Profile</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Publication ID (Query ID=Z83):</th>
<th class="tableblock halign-left valign-top">Z83</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publish</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publication Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORU Subscription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QSB<sup>Z83</sup>QSB_Q16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORU<sup>R01</sup>ORU_R01</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns lab results reports for the patient(s) as constrained in the input parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends Lab Results, either filtered or unfiltered, as specified in the input parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A standard query response is not received from the server. Instead, actual ORU messages are returned corresponding to the constraints expressed in the input parameters.</p>
</div>
<div class="paragraph">
<p>The input parameters are ANDed when selecting data to be returned. That is, all input parameters that are specified SHALL be satisfied in order for a result report to be sent.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R01</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>QSB<sup>Z83</sup>QSB_Q16: Query Grammar: QSB Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec. Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See the definition of the ORU^R01 Message Structure in Chapter 7, section 7.3.1, ORU – Unsolicited Observation Message (Event R01).</p>
</div>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 17%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 4%;">
<col style="width: 5%;">
<col style="width: 6%;">
<col style="width: 5%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z83)</th>
<th class="tableblock halign-left valign-top">ColName</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL #</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Query Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MRN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ActionCode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0323</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientLocation</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PV1.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HospitalService</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PV1.10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRVC</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR.4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PVDR</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR.16</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z83)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z83^ORU Subscription^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MRN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more patient identifiers may be sent. When a list is provided, results will be sent if any parameter matches any ID known for a patient. Sending no value matches all patients</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ActionCode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the subscription is being modified, the desired action e.g., Add or Delete is carried in this field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientLocation</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a list is provided, results will be sent if any parameter matches PV1.3 for any result. Sending no value matches all results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HospitalService</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a list is provided, results will be sent if any parameter matches PV1.10 for any result. Sending no value matches all results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRVC</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a list is provided, results will be sent if any parameter matches OBR.4 for any result.. Sending no value matches all results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PVDR</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a list is provided, results will be sent if any parameter matches OBR.16 for any result.. Sending no value matches all results.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 26%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 37%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z99)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ch</strong>aracters, <strong>Li</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment group inclusion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What segment group(s) are to be included. If this field is not valued, all segment groups will be included.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_5_7_4_establishing_a_subscription">5.7.4 Establishing a subscription</h3>
<div class="paragraph">
<p>To establish the subscription to see lab results for two patients, an authorized Subscriber (e.g., CommunityWest) would send a query message with event code Q99:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|CPR|COMWEST|PS</sup>LAB||||QSB<sup>Q99</sup>QSB_Q16|8888|P|2.8|</p>
</div>
<div class="paragraph">
<p>QPD|Q99<sup>ORU_Subscription</sup>HL7nnnn|Q0044|1234<sup>^</sup>MPI<sup>MR~4567</sup><sup>^MPI</sup>MR|</p>
</div>
<div class="paragraph">
<p>RCP||||||N|</p>
</div>
<div class="paragraph">
<p>As results are generated by the Lab, they are all sent to the archive. In addition, the Lab has a list of all subscription requests (such as the message, above). For each message, it checks the query filters associated with the subscription against the message being considered. If the message matches the query, it is sent to the recipient.</p>
</div>
<div class="paragraph">
<p>For example, a hit on patient 4567 would result in the message:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|PS</sup>LAB||CPR|COMWEST||||ORU<sup>R01</sup>ORU_R01|4409|P|2.8|</p>
</div>
<div class="paragraph">
<p>PID|||4567<sup>^</sup>MPI^MR|&#8230;&#8203;.</p>
</div>
<div class="paragraph">
<p>OBR|&#8230;&#8203;.</p>
</div>
<div class="paragraph">
<p>OBX|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The result message has message type ORU<sup>R01</sup>ORU_R01 (as specified by the Query Profile).</p>
</div>
</div>
<div class="sect2">
<h3 id="_5_7_5_canceling_a_subscription">5.7.5 Canceling a subscription</h3>
<div class="paragraph">
<p>Canceling a subscription is analogous to canceling a query. See sections 5.4.6 and 0.</p>
</div>
<div class="paragraph">
<p>The template would be as follows:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|||||||QSX</sup>Jnn^QSX_J01|</p>
</div>
<div class="paragraph">
<p>QID&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>To cancel the subscription cited in the previous section, CommunityWest would send a cancel message with event code J99:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|CPR|COMWEST|PS</sup>LAB||||QSX<sup>J99</sup>QSX_J01|</p>
</div>
<div class="paragraph">
<p>QID|Q0044|Q99<sup>ORU_Subscription</sup>HL70003|</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_8_query_implementation_considerations">5.8 QUERY IMPLEMENTATION CONSIDERATIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implementation issues are discussed in section 5.2.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_9_queryresponse_message_examples">5.9 QUERY/RESPONSE MESSAGE EXAMPLES</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_5_9_1_query_by_parameter_qbp_segment_pattern_response_rsp">5.9.1 Query by parameter (QBP) / segment pattern response (RSP)</h3>
<div class="sect3">
<h4 id="_5_9_1_0_hiddentext">5.9.1.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_9_1_1_proposed_dispense_history_example_and_query_profile">5.9.1.1 Proposed dispense history example and Query Profile</h4>
<div class="paragraph">
<p>Example: The user wishes to know all the medications dispensed for the patient whose medical record number is "555444222111" for the period beginning 5/31/98 and ending 5/31/99. The following QBP message is generated:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201400-0800||QBP<sup>Z81</sup>QBP_Q11|ACK9901|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z81^Dispense History<sup>HL7nnnn|Q001|555444222111</sup><sup>^MPI</sup>MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 4 prescription dispenses for the period beginning 5/31/98 and ending 5/31/99and returns the following RSP message:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen hosp|PCR||199811201400-0800||RSP<sup>Z82</sup>RSP_Z82|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|ACK9901|</p>
</div>
<div class="paragraph">
<p>QAK|Q001|OK|Z81^Dispense History^HL7nnnn|4|</p>
</div>
<div class="paragraph">
<p>QPD|Z81^Dispense History<sup>HL7nnnn|Q001|555444222111</sup><sup>^MPI</sup>MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>PID|||555444222111<sup>^</sup>MPI<sup>MR||Everyman</sup>Adam||19600614|M||C|2101 Webster # 106<sup>^Oakland</sup>CA<sup>94612||</sup><sup>^</sup><sup>510</sup>6271111|<sup>^</sup><sup>^510</sup>6277654|||||343132266|||N|||||||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199805121345-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>BID</sup><sup>19980529|00378112001</sup>Verapamil Hydrochloride 120 mg TAB^NDC |120||mgm||||||||||||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100|||1331665|3|||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199805291030-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>^D100</sup><sup>20020731</sup>^^TAKE 1 TABLET DAILY –GENERIC FOR CALAN SR|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |100||180MG|TABLET SA|||G|||0|BC3126631<sup>CHU</sup>Y^L||213220929|0|0|19980821|||</p>
</div>
<div class="paragraph">
<p>RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821|100|||213220929|0|TAKE 1 TABLET DAILY –GENERIC FOR CALAN SR||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134037||||||199809221330-0700|||8877<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^555</sup>555-5001||||||RXD|1|00172409660^BACLOFEN 10MG TABS^NDC|199809221415-0700|10|||235134037|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134030||||||199810121030-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^555</sup>555-5001||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00054384163^THEOPHYLLINE 80MG/15ML SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO</p>
</div>
<div class="sect4">
<h5 id="_5_9_1_1_1_associated_dispense_history_query_profile">5.9.1.1.1 Associated dispense history Query Profile</h5>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z81):</th>
<th class="tableblock halign-left valign-top">Z81</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dispense History</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z81</sup>QBP_Q11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z82</sup>RSP_Z82</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May specify patient, medication, a date range, and how the response is to be sorted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient pharmacy dispense history information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sorted by Medication Dispensed unless otherwise specified in <strong>SortControl.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDS_O01</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The QBP_Q11 message structure and related choreography can be found in <a href="#qbprsp-query-by-parametersegment-pattern-response-events-vary">5.4.1</a>.</p>
</div>
<div class="paragraph">
<p>RSP<sup>Z82</sup>RSP_Z82: Response Grammar: Pharmacy Dispense Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec. Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Identification</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PD1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional Demographics</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for PID)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- VISIT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{AL1}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allergy Information</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PV1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Visit</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PV2]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Visit – Additional Info</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- VISIT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_DETAIL begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for RXO)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TREATMENT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXC}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for RXC)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TREATMENT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_DETAIL end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ENCODED_ORDER begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Encoded Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING_ENCODED begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING_ENCODED end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ENCODED_ORDER end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Dispense</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[OBX]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Results</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for OBX)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z81)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2: Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.LL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.UL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z81)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MessageQueryName</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z81^Dispense History^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QueryTag</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientList</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MedicationDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate.LL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the earliest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate.UL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the latest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_1_2_comprehensive_pharmacy_information_examples_and_query_profile">5.9.1.2 Comprehensive pharmacy information examples and Query Profile</h4>
<div class="paragraph">
<p>The user wishes to know all the medications dispensed for the patient whose medical record number is "555444222111" for the period beginning 5/31/98 and ending 5/31/99. The following QBP message is generated:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201400-0800||QBP<sup>Z85</sup>QBP_Q11|8332|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z85^Pharmacy Information Comprehensive<sup>HL7nnnn|Q002|555444222111</sup><sup>^MPI</sup>MR ||||19980531|19990531||RXO<sub>RXG</sub>RXA|</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 4 prescription dispenses and an electrolytes panel for the period beginning 5/31/98 and ending 5/31/99and returns the following RSP message:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen hosp|PCR||199811201400-0800||RSP<sup>Z86</sup>RSP_Z86|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8332|</p>
</div>
<div class="paragraph">
<p>QAK|Q002|OK|Z85^Pharmacy Information Comprehensive^HL70003|4|</p>
</div>
<div class="paragraph">
<p>QPD|Z85^Pharmacy Information Comprehensive<sup>HL7nnnn|Q002|555444222111</sup><sup>^MPI</sup>MR ||||19980531|19990531||RXO<sub>RXG</sub>RXA|</p>
</div>
<div class="paragraph">
<p>PID|||555444222111<sup>^</sup>MPI<sup>MR||Everyman</sup>Adam||19600614|M||C|2101 Webster # 106<sup>^Oakland</sup>CA<sup>94612||</sup><sup>^</sup><sup>510</sup>6271111|<sup>^</sup><sup>^510</sup>6277654|||||343132266|||N|||||||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199805121345-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>BID</sup><sup>19980529|00378112001</sup>Verapamil Hydrochloride 120 mg TAB^NDC |120||mgm||||||||||||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100|||1331665|3|||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199805291030-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>^D100</sup><sup>20020731</sup>^^TAKE 1 TABLET DAILY –GENERIC FOR CALAN SR|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |100||180MG|TABLET SA|||G|||0|BC3126631<sup>CHU</sup>Y^L||213220929|0|0|19980821|||</p>
</div>
<div class="paragraph">
<p>RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821|100|||213220929|0|TAKE 1 TABLET DAILY –GENERIC FOR CALAN SR||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134037||||||199809221330-0700|||8877<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^555</sup>5555001||||||RXD|1|00172409660^BACLOFEN 10MG TABS^NDC|199809221415-0700|10|||199810310600-0700|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134030||||||199810121030-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^555</sup>5555001||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00054384163^THEOPHYLLINE 80MG/15ML SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO</p>
</div>
<div class="paragraph">
<p>OBX|1|ST|2951-2<sup>SODIUM</sup>LN||150|mmol/l|136‑148|H||A|F|19850301||199811180700-0800</p>
</div>
<div class="paragraph">
<p>OBX|2|ST|2823-3<sup>POTASSIUM</sup>LN||4.5|mmol/l|3.5‑5|N||N|F|19850301||199811180700-0800</p>
</div>
<div class="paragraph">
<p>OBX|3|ST|2075-0<sup>CHLORIDE</sup>LN||102|mmol/l|94‑105|N||N|F|19850301||199811180700-0800</p>
</div>
<div class="paragraph">
<p>OBX|4|ST|2028-9^CARBON DIOXIDE^LN||27|mmol/l|24‑31|N||N|F|19850301||199811180700-0800</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Note the use of <em>OBX-14-Date/time of the observation</em> to time the laboratory observations.</p>
</div>
<div class="sect4">
<h5 id="_5_9_1_2_1_comprehensive_pharmacy_information_query_profile">5.9.1.2.1 Comprehensive pharmacy information Query Profile</h5>
<div class="paragraph">
<p>The following is a highly experimental approach to establishing a super segment pattern response to a general purpose query structure. It contains all of the pharmacy information segments as possible inclusions in the response. It differs from previously defined segment pattern queries in that it cuts across multiple related standard HL7 messages although there is a logical hierarchy that can be determined.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z85):</th>
<th class="tableblock halign-left valign-top">Z85</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy Information Comprehensive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z85</sup>QBP_Q11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z86</sup>RSP_Z86</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May specify patient, medication, a date range, how the response is to be sorted, and what segment groups are to be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient pharmacy history information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sorted by Medication Dispensed unless otherwise specified in <strong>SortControl.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The QBP_Q11 message structure and related choreography can be found in <a href="#qbprsp-query-by-parametersegment-pattern-response-events-vary">5.4.1</a></p>
</div>
<div class="paragraph">
<p>RSP<sup>Z86</sup>RSP_Z86: Response Grammar: Pharmacy Information Comprehensive</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec. Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Identification</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PD1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional Demographics</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for PID)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{AL1}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allergy Information</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_DETAIL begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_DETAIL end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ENCODED_ORDER begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Encoded Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING_ENCODED begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING_ENCODED end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ENCODED_ORDER end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- DISPENSE begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Dispense</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- DISPENSE end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- GIVE begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Give</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- GIVE end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ADMINISTRATION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Administration</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ADMINISTRATION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[OBX]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Results</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for OBX)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[DSC]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z85)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderControlCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-1: Order Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderingProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-12: Ordering Provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2: Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.LL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.UL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z85)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MessageQueryName</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z85^Pharmacy Information Comprehensive^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QueryTag</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientList</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OrderControlCode</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OrderingProvider</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.12, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MedicationDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate.LL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the earliest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate.UL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the latest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 27%;">
<col style="width: 11%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z85)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ch</strong>aracters, <strong>Li</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment group inclusion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What segment group(s) are to be included. If this field is not valued, all segment groups will be included.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_9_2_query_using_qsc_variant_segment_pattern_response_examples">5.9.2 Query using QSC variant / segment pattern response examples</h3>
<div class="sect3">
<h4 id="_5_9_2_0_hiddentext">5.9.2.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_9_2_1_dispense_information_example_and_query_profile">5.9.2.1 Dispense information example and Query Profile</h4>
<div class="paragraph">
<p>The following example demonstrates that the same results, as shown in the example in 5.9.1.1, can be obtained using the QSC variant. The difference is how the input parameters are expressed.</p>
</div>
<div class="paragraph">
<p>The user wishes to know all the medications dispensed for the patient whose medical record number is "555444222111" for the period beginning 5/31/98 and ending 5/31/99. The following message is generated:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201300-0800||QBP<sup>Z87</sup>QBP_Q11|8698|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z87^Dispense Information<sup>HL7nnnn|Q001|@PID.3</sup>EQ<sup>55544422211</sup>AND|@ORC.1<sup>EQ</sup>RE^ <a href="mailto:AND|@RXD.3%5eGE%5e199805310000-0800%5eAND|@RXD.3%5eLE%5e199905310000-0800">AND|@RXD.3<sup>GE</sup>199805310000-0800<sup>AND|@RXD.3</sup>LE^199905310000-0800</a></p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 4 prescription dispenses for the period beginning 5/31/98 and ending 5/31/99 and returns the following RSP message:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201300-0800||RSP<sup>Z88</sup>RSP_Z88|8857|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8698|</p>
</div>
<div class="paragraph">
<p>QAK|Q001|OK|Z87^Dispense Information^HL7nnnn|4</p>
</div>
<div class="paragraph">
<p>QPD|Z87^Dispense Information<sup>HL7nnnn|Q001|@PID.3</sup>EQ<sup>55544422211</sup>AND~ORC.1<sup>EQ</sup>RE^ <a href="mailto:AND<sub>@RXD.3%5eGE%5e199805310000-0800%5eAND</sub>@RXD.3%5eLE%5e199905310000-0800">AND<sub>@RXD.3<sup>GE</sup>199805310000-0800<sup>AND</sub>@RXD.3</sup>LE^199905310000-0800</a></p>
</div>
<div class="paragraph">
<p>PID|||555444222111<sup>^</sup>MPI<sup>MR||Everyman</sup>Adam||19600614|M||C|2101 Webster # 106<sup>^Oakland</sup>CA<sup>94612||</sup><sup>^</sup><sup>510</sup>6271111|<sup>^</sup><sup>^510</sup>6277654|||||343132266|||N|||||||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199905121345-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>BID</sup><sup>19990529|00378112001</sup>Verapamil Hydrochloride 120 mg TAB^NDC |120||mgm||||||||||||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC|199905291115-0700|100|||1331665|3|||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199905291030-0700|||77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>^D100</sup><sup>20020731</sup>^^TAKE 1 TABLET DAILY –GENERIC FOR CALAN SR|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC|100||180MG|TABLET SA|||G|||0|BC3126631<sup>CHU</sup>Y^L||213220929|0|0|19990821|||</p>
</div>
<div class="paragraph">
<p>RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC|19990821|100|||213220929|0|TAKE 1 TABLET DAILY –GENERIC FOR CALAN SR||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134037||||||199809221330-0700|||88<sup>Seven</sup>Henry<sup>^</sup>DR<sup>MD||</sup><sup>^</sup><sup>510</sup> 2673900||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00172409660^BACLOFEN 10MG TABS^NDC|199809221415-0700|10|||235134037|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134030||||||199810121030-0700|||99<sup>Assigned</sup>Amanda<sup>^</sup>DR<sup>MD||</sup><sup>^</sup><sup>510</sup> 2673700||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00054384163^THEOPHYLLINE 80MG/15ML SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO</p>
</div>
<div class="sect4">
<h5 id="_5_9_2_1_1_associated_dispense_information_query_profile">5.9.2.1.1 Associated dispense information Query Profile</h5>
<div class="paragraph">
<p>Note that the following Query Profile contains many more input parameters. The user is allowed to populate as many of these as desired.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z87):</th>
<th class="tableblock halign-left valign-top">Z87</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dispense Information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z87</sup>QBP_Q11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z88</sup>RSP_Z88</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selection criteria are chosen from a Virtual Table. May specify patient, medication, and a date range.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient pharmacy dispense history information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sorted by Medication Dispensed unless otherwise specified in <strong>SortControl.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDS_O01</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>QBP<sup>Z87</sup>QBP_Q11: Query Grammar: QBS Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec. Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ARV}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Restriction</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional query by example segments</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>RSP<sup>Z88</sup>RSP_Z88: Response Grammar: Pharmacy Information Comprehensive</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec. Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Identification</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PD1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional Demographics</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for PID)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ALLERGY begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{AL1}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allergy Information</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- VISIT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PV1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Visit</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PV2]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Visit – Additional Info</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- VISIT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ALLERGY end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_DETAIL begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.8.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for RXO)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMPONENT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXC}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for RXC)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMPONENT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_DETAIL end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_ENCODED begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Encoded Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.8.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING_ENCODED begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING_ENCODED end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ORDER_ENCODED end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Dispense</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.8.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{RXR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Route</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{RXC}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pharmacy/Treatment Component</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[OBX]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Results</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for OBX)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z87)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>255</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ST</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 62%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z87)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z87^Dispense Information^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A query expression whose operands are derived from the 'ColName' column in the 'Input Specification: Virtual Table' given below.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 6%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 9%;">
<col style="width: 9%;">
<col style="width: 13%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z87)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderControlCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-1 Order Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QuantityDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-4 Actual Dispense Amount</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderingProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-12 Ordering Provider</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Virtual Table Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 62%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z87)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderControlCode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.2, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.3, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QuantityDispensed</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderingProvider</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.12, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 27%;">
<col style="width: 11%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z87)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment group inclusion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What segment group(s) are to be included. If this field is not valued, all segment groups will be included.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_2_2_dispense_information_query_showing_different_instantiation">5.9.2.2 Dispense information query showing different instantiation</h4>
<div class="paragraph">
<p>The following example shows how the same QSC style query can be invoked in a very different way producing very different results.</p>
</div>
<div class="paragraph">
<p>The user wishes to know all the medications ever dispensed for the patient whose medical record number is "555444222111" prescribed by Dr Lister (provider number 99). The following message is generated. Note that the same Query has been used, but different input specifications were used.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201300-0800||QBP<sup>Z87</sup>QBP_Q11|8698|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q33^Dispense Information^HL7nnnn|Q005| @PID.3<sup>EQ</sup>55544422211<sup>AND|@ORC.1</sup>EQ<sup>RE</sup>AND|@ORC.12.1<sup>EQ</sup>99</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 2 prescription dispenses as prescribed by Dr. Lister. The response is clearly different than the response to the first query.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201300-0800||RSP<sup>Z88</sup>RSP_Z88|8857|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8698|</p>
</div>
<div class="paragraph">
<p>QAK|Q005|OK|Q33^Dispense Information^HL7nnnn|2|</p>
</div>
<div class="paragraph">
<p>QPD|Q33^Dispense Information^HL7nnnn|Q005| @PID.3<sup>EQ</sup>55544422211<sup>AND<sub>@ORC.1</sup>EQ<sup>RE</sup>AND</sub>@ORC.12.1<sup>EQ</sup>99</p>
</div>
<div class="paragraph">
<p>PID|||555444222111<sup>^</sup>MPI<sup>MR||Everyman</sup>Adam||19600614|M||C|2101 Webster # 106<sup>^Oakland</sup>CA<sup>94612||</sup><sup>^</sup><sup>510</sup>6271111|<sup>^</sup><sup>^510</sup>6277654|||||343132266|||N|||||||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||89968665||||||199603121345-0700|||99<sup>Assigned</sup>Amanda<sup>^</sup>DR^MD ||<sup>^</sup><sup>^510</sup> 2673600||||||</p>
</div>
<div class="paragraph">
<p>RXE|1<sup>BID</sup><sup>19980529|00182196901</sup>VERAPAMIL HCL ER TAB 180MG ER^NDC |120||mgm||||||||||||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC|199603122000-0700|100|||1331665|3|||||||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO||||</p>
</div>
<div class="paragraph">
<p>ORC|RE||235134030||||||199810121030-0700|||88<sup>PRIMARY</sup>PATRICIA<sup>H</sup>III<sup>DR</sup>MD||<sup>^</sup><sup>^555</sup> 5551004||||||</p>
</div>
<div class="paragraph">
<p>RXD|1|00054384163^THEOPHYLLINE 80MG/15ML SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||</p>
</div>
<div class="paragraph">
<p>RXR|PO</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_2_3_lab_results_history_example">5.9.2.3 Lab results history example</h4>
<div class="paragraph">
<p>The user wishes to know all the lab results for the patient whose medical record is 80302641876 and where the result report date/time is between March 21, 1999 and June 24, 1999 and the Lab department is chemistry. This Query Name might be invoked once with a query tag of 123 in the following manner:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;| PCR|Gen Hosp|LIS.RMS||199907131030-0800||QBP<sup>Z89</sup>QBP_Q11|4460|P|2.8|</p>
</div>
<div class="paragraph">
<p>QPD|Z89^Lab Results History<sup>HL7nnnn|123|@PID.3.1.1</sup>EQ<sup>80302641876</sup>AND| @OBR.22<sup>GE</sup>19990321<sup>AND|@OBR.22</sup>LE<sup>19990624</sup>AND|@OBR.24<sup>EQ</sup>"CHEMISTRY"</p>
</div>
<div class="paragraph">
<p>RCP|I||R|</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_2_4_lab_results_history_query_profile"><strong><em>5.9.2.4</em></strong> Lab results history Query Profile</h4>
<div class="paragraph">
<p>The "Lab Results History" query returns laboratory results information in the form of the Segment Pattern Response corresponding to the ORU^R01 – unsolicited transmission of an observation message. It returns all of the results which meet the criteria defined in the QPD – Query Parameter Definition Segment of the RSP^R11 – Segment Pattern Response message.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z89):</th>
<th class="tableblock halign-left valign-top">Z89</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lab Results History</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z89</sup>QBP_Q11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSP<sup>Z90</sup>RSP_Z90</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May specify patient, report time, laboratory department, and LOINC code of result to be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient laboratory results information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORU_O01</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>QBP<sup>Z89</sup>QBP_Q11: Query Grammar: QBS Message</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ARV}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Restriction</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[&#8230;&#8203;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional query by example segments</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QBP end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>RSP<sup>Z90</sup>RSP_Z90: Response Grammar: Pharmacy Information Comprehensive</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RCP">RCP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Control Parameter</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Identification</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PD1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional Demographics</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NK1}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Next of Kin/Associated Parties</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for PID)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- VISIT begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PV1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Visit</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[PV2]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient Visit – Additional Info</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- VISIT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- PATIENT end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common Order</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQ1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{TQ2}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timing/Quantity Order Sequence</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- TIMING end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observations Report ID</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.5.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for ORC/OBR)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[CTD]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contact Data</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11.6.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[OBX]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observation/Result</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{NTE}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes and Comments (for OBX)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- OBSERVATION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- COMMON_ORDER end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- SPECIMEN begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specimen</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.4.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{OBX}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observation Related to Specimen</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- SPECIMEN end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- QUERY_RESPONSE end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z89)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>255</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ST</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 62%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z89)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z89^Lab Results History^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A query expression whose operands are derived from the 'ColName' column in the 'Input Specification: Virtual Table' given below.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z89)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResultReportTime.LL</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR.22</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR-22: Results rpt/status chng – date/time – lower limit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResultReportTime.UL</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR.22</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR-22: Results rpt/status chng – date/time – upper limit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LabDept</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0074</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR.24</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBR-24: Diagnostic Serv Sect ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOINCCode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBX.3.4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBX-3-4: Observation identifier – alternate identifier</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 64%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z89)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientList</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result Report Time.LL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The earliest date and time for which results are to be returned. If this field is not valued, the earliest results that conform to the other query parameters will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result Report Time.UL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The latest date and time for which results are to be returned. If this field is not valued, the latest results that conform to the other query parameters will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LabDept</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The section(s) or department(s) of the laboratory reporting the results. As many <strong>LabDept</strong> values may be specified as desired. If this field is not valued, results that conform to the other query parameters from all sections or departments will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LOINCCode</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The LOINC identifier for the results to be reported. As many <strong>LOINCCode</strong> values may be specified as desired. If this field is not valued, results that conform to the other query parameters for all LOINC codes will be returned.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 26%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 37%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z89)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment group inclusion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What segment group(s) are to be included. If this field is not valued, all segment groups will be included.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If a LOINC code is used as one of the operands of the input specification expression, all of the other OBX segments which are part of the same OBR as the selected OBX will be returned along with the selected OBX. In other words, if an OBX segment that is part of a panel is selected by the query, the entire panel will be returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_2_5_lab_example_different_instantiation">5.9.2.5 Lab example different instantiation</h4>
<div class="paragraph">
<p>The same Query Name might be invoked with a different query tag (456) as follows:</p>
</div>
<div class="paragraph">
<p>The user wishes to know all the lab results reported having a LOINC code of 6777-7 between March 21, 1999 and March 23, 1999.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|PCR|GenHosp|LIS||199907131040-0800||QBP</sup>Z89^QBP_Z89|4495|D|2.8|</p>
</div>
<div class="paragraph">
<p>QPD|Z89<sup>LabResultsHistory</sup>HL7nnnn||@OBX.3.4<sup>EQ</sup>6777-7<sup>AND|@OBR.22</sup>GE<sup>19990321</sup>AND|@OBR.22<sup>LE</sup>19990323</p>
</div>
<div class="paragraph">
<p>RCP|I||R|</p>
</div>
<div class="paragraph">
<p>The second instance of the "Lab Results for Specified Criteria" query would clearly return quite different results than the first even though both are invocations of the same query.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_9_3_query_by_parameter_qbp_tabular_response_rtb">5.9.3 Query by parameter (QBP) / tabular response (RTB)</h3>
<div class="sect3">
<h4 id="_5_9_3_0_hiddentext">5.9.3.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_9_3_1_mpi_example">5.9.3.1 MPI example</h4>
<div class="paragraph">
<p>The user wishes to know the identity of the patient whose medical record number is "555444222111".</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|PCR|GenHosp|MPI||199811201400-0800||QBP</sup>Z91^QBP_Q13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z91<sup>WhoAmI</sup>HL7nnnn|Q0009|555444222111<sup>^</sup>MPI^MR</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>RDF|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p>The MPI system returns the following RTB message:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|MPI|GenHosp|PCR||199811201400-0800||RTB</sup>Z92^RTB_K13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q0009|OK|Z91<sup>WhoAmI</sup>HL7nnnn|1|</p>
</div>
<div class="paragraph">
<p>QPD|Z91<sup>WhoAmI</sup>HL7nnnn|Q0009|555444222111<sup>^MPI</sup>MR</p>
</div>
<div class="paragraph">
<p>RDF|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam||19600614|M||</p>
</div>
<div class="sect4">
<h5 id="_5_9_3_1_1_mpi_query_profile">5.9.3.1.1 MPI Query Profile</h5>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z89):</th>
<th class="tableblock halign-left valign-top">Z91</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who Am I</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z91</sup>QBP_Q13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Z92</sup>RTB_K13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find the identity of the patient for specified medical record number(s)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Z91</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Z92</sup>RTB_K13: Response Grammar: Who Am I</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#RDT">RDT</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z91)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z91)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z91^Who Am I^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.)<br>
<br>
If this field is not valued, all values for this field are considered to be a match.<br>
<br>
If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigning Authority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier type code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 13%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z91)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z91)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3 Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mother&#8217;sMaidenName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-6 Mother&#8217;s Maiden Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-7 Date/Time of Birth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-8 Sex</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Race</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-10 Race</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_3_2_pharmacy_example">5.9.3.2 Pharmacy example:</h4>
<div class="paragraph">
<p>The user wishes to know all the medications dispensed for the patient whose medical record number is "555444222111" for the period beginning 5/31/98 and ending 5/31/99. The following QBP message is generated:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201400-0800||QBP<sup>Q42</sup>QBP_Q13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Q42^Tabular Dispense History<sup>HL7nnn|Q0010|555444222111</sup><sup>^MPI</sup>MR| |19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RDF|3|PatientList<sup>ST</sup>20<sub>PatientName<sup>XPN</sup>48</sub>MedicationDispensed<sup>ST</sup>40~RXD.3<sup>DTM</sup>24</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 4 prescription dispenses meeting the criteria and returns the following RTB message:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201400-0800||RTB<sup>K42</sup>RTB_K13|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q010|OK|Q42^Tabular Dispense History^HL7nnn|4</p>
</div>
<div class="paragraph">
<p>QPD|Q42^Tabular Dispense History<sup>HL7nnn|Q0010|555444222111</sup><sup>^MPI</sup>MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RDF|7|PatientId<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>OrderControlCode<sup>ID</sup>2~ MedicationDispensed<sup>CWE</sup>100<sub>DispenseDate<sup>DTM</sup>24</sub>QuantityDispensed<sup>NM</sup>20~ OrderingProvider<sup>XCN</sup>120</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|525440345^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821-0700|100|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00172409660^BACLOFEN 10MG TABS^NDC |199809221415-0700|10|88<sup>Seven</sup>Henry<sup>^</sup>DR^MD</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|00054384163^THEOPHYLLINE 80MG/15ML SOLN<sup>NDC|199810121145-0700|10|99</sup>Assigned<sup>Amanda</sup><sup>^DR</sup>MD</p>
</div>
<div class="sect4">
<h5 id="_5_9_3_2_1_qbprtb_dispense_history_query_profile">5.9.3.2.1 QBP/RTB dispense history Query Profile</h5>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z89):</th>
<th class="tableblock halign-left valign-top">Z93</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular Dispense History</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z93</sup>QBP_Q13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Z94</sup>RTB_K13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns response sorted by Date Dispensed unless otherwise specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find medications dispensed between specified date range for specified medical record numbers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Z93</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Z94</sup>RTB_K13: Response Grammar: Who Am I</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#RDT">RDT</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z93)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2: Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.LL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.UL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z93)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z93^Tabular Dispense History^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assigning Authority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier type code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.LL</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the earliest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.UL</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the latest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 13%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z93)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z93)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3 Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.LL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3 Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.UL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3 Date/Time Dispensed</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_9_4_query_using_qsc_variant_tabular_response_rtb">5.9.4 Query using QSC variant / tabular response (RTB)</h3>
<div class="sect3">
<h4 id="_5_9_4_0_hiddentext">5.9.4.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_9_4_1_pharmacy_example">5.9.4.1 Pharmacy example</h4>
<div class="paragraph">
<p>The user wishes to know all the medications dispensed for the patient whose medical record number is "555444222111" for the period beginning 5/31/98 and ending 5/31/99. The following message is generated:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201400-0800||QBP<sup>Z95</sup>QBP_Q13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z95^Dispense Information^HL7nnnn|Q504 |PID.3<sup>EQ</sup>55544422211<sup>AND<sub>RXD.3</sup>GE<sup>19980531</sup>AND</sub>RXD.3<sup>LE</sup>19990531</p>
</div>
<div class="paragraph">
<p>RDF|3|PatientList<sup>ST</sup>20|PatientName<sup>XPN</sup>48|OrderControlCode<sup>ID</sup>2|OrderingProvider<sup>XCN</sup>120|MedicationDispensed<sup>ST</sup>40|DispenseDate<sup>DTM</sup>24|QuantityDispensed<sup>NM</sup>20|</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 4 prescription dispenses meeting the criteria and returns the following RTB message:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201400-0800||RTB<sup>Z96</sup>RTB_K13|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q001|OK|Z95^Dispense Information^HL7nnnn|4</p>
</div>
<div class="paragraph">
<p>QPD|Z95^Dispense Information^HL7nnnn|Q504 |PID.3<sup>EQ</sup>55544422211<sup>AND<sub>RXD.3</sup>GE<sup>19980531</sup>AND</sub>RXD.3<sup>LE</sup>19990531</p>
</div>
<div class="paragraph">
<p>RDF|3|PatientList<sup>ST</sup>20<sub>PatientName<sup>XPN</sup>48</sub>OrderControlCode<sup>ID</sup>2<sub>OrderingProvider<sup>XCN</sup>120</sub>MedicationDispensed<sup>ST</sup>40<sub>DispenseDate<sup>DTM</sup>24</sub>QuantityDispensed<sup>NM</sup>20|</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD |525440345^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|77<sup>Hippocrates</sup>Harold<sup>H</sup>III<sup>DR</sup>MD |00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821-0700|100</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|88<sup>Seven</sup>Henry<sup>^</sup>DR^MD |00172409660^BACLOFEN 10MG TABS^NDC |199809221415-0700|10</p>
</div>
<div class="paragraph">
<p>RDT|555444222111<sup>^</sup>MPI<sup>MR|Everyman</sup>Adam|RE|99<sup>Assigned</sup>Amanda<sup>^</sup>DR^MD |00054384163^THEOPHYLLINE 80MG/15ML SOLN^NDC|199810121145-0700|10</p>
</div>
<div class="sect4">
<h5 id="_5_9_4_1_1_qbprtb_dispense_history_query_profile_using_qsc_variant">5.9.4.1.1 QBP/RTB dispense history Query Profile using QSC variant</h5>
<div class="paragraph">
<p>Note that this Query Profile includes no separate Output Description and Commentary. In the QBP/RTB combination using the QSC variant, the selection criteria in <em>QPD-3-user parameters</em> and the desired return data in <em>RDF-2-column description</em> are constructed from the same Virtual Table, which appears in the Input Specification.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z95):</th>
<th class="tableblock halign-left valign-top">Z95</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular Dispense History</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z95</sup>QBP_Q13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Z96</sup>RTB_K13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selection criteria are chosen from a Virtual Table. May specify patient, medication, and a date range.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient pharmacy dispense history information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Columns from the <strong>Virtual Table</strong> listed in the Input/Output Specification are specified for output in the RDF segment.</p>
</div>
<div class="paragraph">
<p><strong>If no columns are specified in the RDF segment, all columns will be returned.</strong></p>
</div>
<div class="paragraph">
<p>Response is sorted by Medication Dispensed unless otherwise specified in <strong>SortControl.</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Z95</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Z96</sup>RTB_K13: Response Grammar: Who Am I</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#RDT">RDT</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z95)</th>
<th class="tableblock halign-left valign-top">Field Description</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>255</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ST</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z95)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z95^Tabular Dispense History^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A query expression whose operands are derived from the 'ColName' column in the 'Input/Output Specification: Virtual Table' given below.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input/Output Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z95)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3 Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderControlCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-1 Order Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QuantityDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-4 Actual Dispense Amount</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderingProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-12 Ordering Provider</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Virtual Table Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22%;">
<col style="width: 10%;">
<col style="width: 6%;">
<col style="width: 62%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z95)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientList</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientName</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OrderControlCode</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MedicationDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.2, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.3, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QuantityDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OrderingProvider</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.12, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 14%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 34%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z95)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_5_9_5_query_by_parameter_qbp_display_response_rdy">5.9.5 Query by parameter (QBP) / display response (RDY)</h3>
<div class="paragraph">
<p>The user wishes to know all the medications dispensed for the patient whose medical record number is "555444222111" for the period beginning 5/31/98 and ending 5/31/99. The following QBP message is generated.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199909171400-0800||QBP<sup>Z97</sup>QBP_Q15|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z97<sup>DispenseHistoryDisplay</sup>HL7nnnn|Q005|555444222111<sup>^</sup>MPI^MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 4 prescription dispenses meeting the criteria and returns the following RDY message:</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199909171401-0800||RDY<sup>Z98</sup>RDY_K15|8858|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8699|</p>
</div>
<div class="paragraph">
<p>QAK|Q005|OK|Z97^DispenseHistoryDisplay|4</p>
</div>
<div class="paragraph">
<p>QPD|Z97<sup>DispenseHistoryDisplay</sup>HL7nnnn|Q005|555444222111<sup>^</sup>MPI^MR||19980531|19990531|</p>
</div>
<div class="paragraph">
<p>DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:09-17-99</p>
</div>
<div class="paragraph">
<p>DSP||| DISPENSE HISTORY REPORT PAGE 1</p>
</div>
<div class="paragraph">
<p>DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL 120 mg TAB 05/29/1998</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL ER TAB 180MG 08/21/1998</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam BACLOFEN 10MG TABS 09/22/1998</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam THEOPHYLLINE 80MG/15ML SOL 10/12/1998</p>
</div>
<div class="paragraph">
<p>DSP||| &lt;&lt; END OF REPORT &gt;&gt;</p>
</div>
<div class="sect3">
<h4 id="_5_9_5_0_hiddentext">5.9.5.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_9_5_1_dispense_history_display_query_profile">5.9.5.1 Dispense history display Query Profile</h4>
<div class="paragraph">
<p>Note that this Query Profile includes no separate Output Description and Commentary. In Query Profiles that specify an RDY response message, the display format follows the response grammar.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z97):</th>
<th class="tableblock halign-left valign-top">Z97</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dispense History</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z97</sup>QBP_Q15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>Z98</sup>RDY_K15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May specify patient, medication, a date range, and how the response is to be sorted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient pharmacy dispense history information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns data formatted for screen display. Data are sorted by Medication Dispensed unless otherwise specified in <strong>SortControl.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Z97</sup>QPB_Q15 can be found in 5.4.3. Use the QBP<sup>Q15</sup>QPB_Q15 Message structure.</p>
</div>
<div class="paragraph">
<p>RDY<sup>Z98</sup>RDY_K15: Response Grammar: Dispense History</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#DSP">DSP</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Data</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">The data will display as follows: (Query ID=Z97)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:mm-dd-yy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| DISPENSE HISTORY REPORT PAGE n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP|||XXXXX XXXXXx, XXXXX XXXXXXXXXXXXXXXX mm/dd/ccyy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| &lt;&lt; END OF REPORT &gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z97)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2: Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.LL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate.UL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;<br>
=</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-3: Date/Time Dispensed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22%;">
<col style="width: 10%;">
<col style="width: 6%;">
<col style="width: 62%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z97)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MessageQueryName</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z97^Dispense History^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QueryTag</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientList</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MedicationDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate.LL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the earliest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate.UL</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the latest value to be returned for Date/Time Dispensed. If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 26%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 37%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z97)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_5_9_6_query_using_qsc_variant_qbp_display_response_rdy">5.9.6 Query using QSC variant (QBP) / display response (RDY)</h3>
<div class="paragraph">
<p>The user wishes to know all the medications ever dispensed for the patient whose medical record number is "555444222111" prescribed by Dr Lister (provider number 99). The following message is generated. (Note the similarity between the QPD segment here and that used in the query in Section 5.8.4.)</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PCR|Gen Hosp|PIMS||199811201300-0800||QBP<sup>Z79</sup>QBP_Q15|8698|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z79^Dispense Information^HL7nnnn|Q503 |PID.3<sup>EQ</sup>55544422211<sup>AND|ORC.1</sup>EQ<sup>RE</sup>AND|ORC.12.1<sup>EQ</sup>99</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The pharmacy system identifies medical record number "555444222111" as belonging to Adam Everyman and locates 2 prescription dispenses as prescribed by Dr. Lister. The response is clearly different than the response to the first query.</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|PIMS|Gen Hosp|PCR||199811201300-0800||RDY<sup>Z80</sup>RDY_K15|8857|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>MSA|AA|8698|</p>
</div>
<div class="paragraph">
<p>QAK|Q003|OK|Z79^Dispense Information^HL7nnnn|2</p>
</div>
<div class="paragraph">
<p>QPD|Z79^Dispense Information^HL7nnnn|Q503 |@PID.3<sup>EQ</sup>55544422211<sup>AND<sub>ORC.1</sup>EQ<sup>RE</sup>AND</sub>@RXD.3<sup>GE</sup>199711200000-0800<sup>AND~@RXD.3</sup>LE^199811200000-0800</p>
</div>
<div class="paragraph">
<p>DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:09-17-99</p>
</div>
<div class="paragraph">
<p>DSP||| DISPENSE HISTORY REPORT PAGE 1</p>
</div>
<div class="paragraph">
<p>DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam VERAPAMIL HCL 120 mg TAB 05/29/1998</p>
</div>
<div class="paragraph">
<p>DSP|||555444222111 Everyman,Adam THEOPHYLLINE 80MG/15ML SOL 10/12/1998</p>
</div>
<div class="paragraph">
<p>DSP||| &lt;&lt; END OF REPORT &gt;&gt;</p>
</div>
<div class="sect3">
<h4 id="_5_9_6_0">5.9.6.0</h4>

</div>
<div class="sect3">
<h4 id="_5_9_6_1_dispense_history_display_query_profile_using_qsc_variant">5.9.6.1 Dispense history display Query Profile using QSC variant</h4>
<div class="paragraph">
<p>Note that this Query Profile includes no separate Output Description and Commentary. In Query Profiles that specify an RDY response message, the display format follows the response grammar.</p>
</div>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z79):</th>
<th class="tableblock halign-left valign-top">Z79</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dispense Information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z79</sup>QBP_Q15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDY<sup>Z80</sup>RDY_Z80</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selection criteria are chosen from a Virtual Table. May specify patient, order control code, medication, a date range, quantity dispensed, and ordering provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To retrieve patient pharmacy dispense history information from the Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns data formatted for screen display. Data are sorted by Medication Dispensed unless otherwise specified in <strong>SortControl.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The QBP_Q15 and RDY_K15 message structures and related choreography can be found in <a href="#qbprdy-query-by-parameterdisplay-response-events-vary">5.4.3</a>.</p>
</div>
<div class="paragraph">
<p>RDY<sup>Z80</sup>RDY_Z80: Response Grammar: Dispense History</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#DSP">DSP</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display Data</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">The data will display as follows: (Query ID=Z79)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| GENERAL HOSPITAL – PHARMACY DEPARTMENT DATE:mm-dd-yy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| DISPENSE HISTORY REPORT PAGE n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP|||MRN Patient Name MEDICATION DISPENSED DISP-DATE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP|||XXXXX XXXXXx, XXXXX XXXXXXXXXXXXXXXX mm/dd/ccyy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSP||| &lt;&lt; END OF REPORT &gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z79)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">ElementName</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>255</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ST</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z79)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z79^Dispense Information^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SelectionCriteria</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A query expression whose operands are derived from the 'ColName' column in the 'Input/Output Specification: Virtual Table' given below.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Input Specification: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z79)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">ElementName</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3: Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderControlCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-1 Order Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MedicationDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Dispense/Give Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DispenseDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-2 Date/Time Dispensed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QuantityDispensed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD.4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RXD-4 Actual Dispense Amount</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OrderingProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC.12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORC-12 Ordering Provider</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Virtual Table Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z79)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PatientList</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combination of values for <em>PatientList.ID, and PatientList.AssigningAuthority,</em> are intended to identify a unique entry on the PATIENT_MASTER table. The <em>PatientList.IdentifierTypeCode</em> is useful for further filtering or to supply uniqueness in the event that the assigning authority may have more than one coding system. (The PATIENT_MASTER table contains a constraint that prevents multiple patients from being identified by the same combination of field values.) This PATIENT_MASTER entry will be searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query conditions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If one PID.3 is specified, only 1 segment pattern will be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Assigning Authority</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier type code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, PID.3.5, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OrderControlCode</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.1, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MedicationDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.2, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DispenseDate</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.3, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QuantityDispensed</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, RXD.4, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OrderingProvider</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this field, ORC.12, is not valued, all values for this field are considered to be a match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 14%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 34%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z79)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_5_9_7">5.9.7<br></h3>
<div class="paragraph">
<p>Query by example (QBP) / tabular response (RTB)</p>
</div>
<div class="paragraph">
<p>This section demonstrates how to use a different syntax for passing query parameters to the query server. This syntactic variant is called "query by example" because, instead of passing query parameter as fields of the QBP segment, they are passed as fields of existing HL7 segments. Nevertheless, the Query Profile will clearly specify which fields of the HL7 segment can carry useful values. Note that both the QBP syntax and the "query by example" syntax have the same expressive power. Also note that when segments are used in the "query by example" variant, the required/optional characteristics of each field should be defined in the Query Profile, and that field optionality in queries may be different from the usual optionality of the segment when used in other HL7 messages.</p>
</div>
<div class="paragraph">
<p>This sample shows how the "query by example" might be used to find a list of candidates matching a set of demographics. Because demographic data is naturally carried by the existing PID segment, the message designer may, for stylistic or practical reasons, decide to pass the demographic parameters such as patient name or patient age in a PID segment.</p>
</div>
<div class="paragraph">
<p>The Client wishes to see a list of patients whose demographics are as follows:</p>
</div>
<div class="paragraph">
<p>Last Name: Nuclear<br>
First Name: Ned<br>
Sex: Male<br>
DOB: 12/11/48</p>
</div>
<div class="paragraph">
<p>The Client wishes to do this using the peekaboo algorithm with an 80% confidence level.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|PCR|GenHosp|MPI||199811201400-0800||QBP</sup>Z77^QBP_Q13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z77<sup>find_candidates</sup>HL7nnnn|Q0001|peekaboo|80|</p>
</div>
<div class="paragraph">
<p>PID|||||Nuclear&amp;Ned||19481211|M</p>
</div>
<div class="paragraph">
<p>RCP|I|25^RD|</p>
</div>
<div class="paragraph">
<p>RDF|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p>The MPI system returns the following RTB message</p>
</div>
<div class="paragraph">
<p><strong>MSH</strong>|<sup>~\&amp;|MPI|GenHosp|PCR||199811201400-0800||RTB</sup>Z78^RTB_R13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p><strong>MSA</strong>|AA|8699|</p>
</div>
<div class="paragraph">
<p><strong>QAK</strong>|</p>
</div>
<div class="paragraph">
<p><strong>QPD</strong>|Z77<sup>find_candidates</sup>HL7nnnn|Q0001|peekaboo|80|</p>
</div>
<div class="paragraph">
<p><strong>RDF</strong>|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p><strong>RDT</strong>|555444222111<sup>^</sup>MPI&amp;KP.NCA&amp;L<sup>MR|Nuclear</sup>Ned||19481211|M||</p>
</div>
<div class="sect3">
<h4 id="_5_9_7_0_hiddentext">5.9.7.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_5_9_7_1_mpi_query_profile_using_qbe_variant">5.9.7.1 MPI Query Profile using QBE variant</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z77):</th>
<th class="tableblock halign-left valign-top">Z77</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular Patient List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z77</sup>QBP_Q13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Z78</sup>RTB_K13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Query By Example: passes algorithm data via QBP segment and patient match information via PID segment.</p>
</div>
<div class="paragraph">
<p>Only PID fields listed in the QBE Input Parameter Specification may be populated to be matched against. Fields not populated will be considered as matching all returned records.</p>
</div>
<div class="paragraph">
<p>The PID segment is required for this query/response pattern.</p>
</div>
<div class="paragraph">
<p>Output columns are chosen from a Virtual Table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To find patient records that closely (as specified by the Client) match a set of input criteria using a specified algorithm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response returns requested columns from the Virtual Table. If no columns were requested, all columns are returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Z77</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Z78</sup>RTB_K13: Response Grammar: Who Am I</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#RDT">RDT</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z77)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Query Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>48</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ST</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConfidenceLevel</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Confidence Level</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z77)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z77^Tabular Patient List^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the search algorithm that is used to look up the parameter values specified in the PID segment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConfidenceLevel</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The degree of accuracy that the search algorithm must achieve in order to score a "hit."</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QBE Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 16%;">
<col style="width: 13%;">
<col style="width: 8%;">
<col style="width: 6%;">
<col style="width: 5%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 7%;">
<col style="width: 5%;">
<col style="width: 9%;">
<col style="width: 14%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Field Name (Query ID=Z77)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key/</p>
</div>
<div class="paragraph">
<p>Search</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TBL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Identifier Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5-Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-7-Date/time of Birth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-8-Sex</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QBE Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17%;">
<col style="width: 10%;">
<col style="width: 7%;">
<col style="width: 66%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input Parameter (Query ID=Z77)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comp. Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the patient. May be specified in full or in part.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and time of the patient&#8217;s birth. Year, month, and day SHALL be specified; time is optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrative gender of the patient.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 13%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z77)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z77)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3 Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MothersMaidenName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-6 Mother&#8217;s Maiden Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-7 Date/Time of Birth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-8 Sex</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Race</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-10 Race</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The same query as described above could be sent as a pure Query by Parameter query, without the "query by example" variant, as follows.</p>
</div>
<div class="paragraph">
<p>Notice that the query uses only a single QPD segment to carry all the parameters. The response to the query is the same as for the "query by example" variant above.</p>
</div>
<div class="paragraph">
<p>Example: the Client wishes to do this using the peekaboo algorithm with an 80% confidence level.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|PCR|GenHosp|MPI||199811201400-0800||QBP</sup>Z75^QBP_Q13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p>QPD|Z75<sup>find_candidates</sup>HL7nnnn|Q0001|peekaboo|80|Nuclear^Ned|19481211|M</p>
</div>
<div class="paragraph">
<p>RDF|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p>RCP|I|999^RD|</p>
</div>
<div class="paragraph">
<p>The MPI system returns the following RTB message:</p>
</div>
<div class="paragraph">
<p><strong>MSH</strong>|<sup>~\&amp;|MPI|GenHosp|PCR||199811201400-0800||RTB</sup>Z76^RTB_R13|8699|P|2.8||||||||</p>
</div>
<div class="paragraph">
<p><strong>MSA</strong>|AA|8699|</p>
</div>
<div class="paragraph">
<p><strong>QAK</strong>|</p>
</div>
<div class="paragraph">
<p>QPD|Z75<sup>find_candidates</sup>HL7nnnn|Q0001|peekaboo|80|Nuclear^Ned|19481211|M</p>
</div>
<div class="paragraph">
<p><strong>RDF</strong>|PatientList<sup>CX</sup>20<sub>PatientName<sup>XPN</sup>48</sub>Mother&#8217;sMaidenName<sup>XPN</sup>48<sub>DOB<sup>DTM</sup>24</sub>Sex<sup>IS</sup>1~Race<sup>CWE</sup>80|</p>
</div>
<div class="paragraph">
<p><strong>RDT</strong>|555444222111<sup>^</sup>MPI&amp;KP.NCA&amp;L<sup>MR|Nuclear</sup>Ned|19481211|M||</p>
</div>
</div>
<div class="sect3">
<h4 id="_5_9_7_2_mpi_query_profile_non_query_by_example_version">5.9.7.2 MPI Query Profile – Non query by example version</h4>
<div class="paragraph">
<p>Query Profile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 39%;">
<col style="width: 61%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Statement ID (Query ID=Z75):</th>
<th class="tableblock halign-left valign-top">Z75</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tabular Patient List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QBP<sup>Z75</sup>QBP_Q13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Mode:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Trigger (= MSH-9):</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTB<sup>Z76</sup>RTB_K13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patient identifier and matching algorithm requirements are passed via the input parameters. Output columns are chosen from a Virtual Table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Purpose:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To find patient records that closely (as specified by the Client) match a set of input criteria using a specified algorithm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Characteristics:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response returns requested columns from the Virtual Table. If no columns were requested, all columns are returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on Segment Pattern:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The message structure for QBP<sup>Z75</sup>QPB_Q13 can be found in 5.3.1.2. Use the QBP<sup>Q13</sup>QPB_Q13 Message structure.</p>
</div>
<div class="paragraph">
<p>RTB<sup>Z76</sup>RTB_K13: Response Grammar: Who Am I</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Sec Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.14.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ERR]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QAK">QAK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Acknowledgement</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#QPD">QPD</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Parameter Definition</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#RDF">RDF</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Definition Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#RDT">RDT</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table Row Data Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.5.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- ROW_DEFINITION end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ DSC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.15.4</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Specification</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 14%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 3%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 9%;">
<col style="width: 8%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z75)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Query Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>48</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ST</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConfidenceLevel</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Confidence Level</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5-Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-7-Date/Time of Birth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-8-Sex</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>QPD Input Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 11%;">
<col style="width: 6%;">
<col style="width: 63%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Parameter (Query ID=Z75)</th>
<th class="tableblock halign-left valign-top">Comp. Name</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageQueryName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL be valued <strong>Z75^Tabular Patient List^HL7nnnn</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueryTag</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique to each query message instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algorithm</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the search algorithm that is used to look up the parameter values specified in the PID segment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConfidenceLevel</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The degree of accuracy that the search algorithm must achieve in order to score a 'hit'.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the patient. May be specified in full or in part.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and time of the patient&#8217;s birth. Year, month, and day SHALL be specified; time is optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrative gender of the patient.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>RCP Response Control Parameter Field Description and Commentary</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 13%;">
<col style="width: 25%;">
<col style="width: 13%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Seq (Query ID=Z75)</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Com­po­nent Name</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Priority</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>D</strong>)eferred or (<strong>I</strong>)mmediate. Default is <strong>I</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity Limited Request</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CQ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of units (specified by the following component) that will be returned in each increment of the response. If no value is given, the entire response will be returned in a single increment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CH</strong>aracters, <strong>LI</strong>nes, <strong>P</strong>a<strong>G</strong>es, or <strong>R</strong>ecor<strong>D</strong>s. Default is <strong>LI</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response Modality</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>R</strong>eal time or <strong>B</strong>atch. Default is <strong>R</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort-by Field</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment field name of an output column by which the response may be sorted. SHALL contain a <strong>Y</strong> in the Sort column of the output specification table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequencing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As specified in HL7 Table 0397- Sequencing. Default is <strong>A</strong>scending.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Output Specification and Commentary: Virtual Table</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 3%;">
<col style="width: 6%;">
<col style="width: 8%;">
<col style="width: 8%;">
<col style="width: 10%;">
<col style="width: 11%;">
<col style="width: 9%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ColName (Query ID=Z75)</th>
<th class="tableblock halign-left valign-top">Key/

Search</th>
<th class="tableblock halign-left valign-top">Sort</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">TYPE</th>
<th class="tableblock halign-left valign-top">Opt</th>
<th class="tableblock halign-left valign-top">Rep</th>
<th class="tableblock halign-left valign-top">Match Op</th>
<th class="tableblock halign-left valign-top">TBL</th>
<th class="tableblock halign-left valign-top">Segment Field Name</th>
<th class="tableblock halign-left valign-top">Service Identifier Code</th>
<th class="tableblock halign-left valign-top">Element Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CX</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>O</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-3 Patient Identifier List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatientName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-5 Patient Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MothersMaidenName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-6 Mother&#8217;s Maiden Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOB</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-7 Date/Time of Birth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sex</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-8 Sex</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Race</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID.10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID-10 Race</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_10_superseded_queryresponse_trigger_events_and_message_pairs">5.10 SUPERSEDED QUERY/RESPONSE TRIGGER EVENTS AND MESSAGE PAIRS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>If the reader is defining a new query, please refer to the new recommended query/response pairs defined in section</strong> <em>5.4</em>*, "<strong><em>QUERY/RESPONSE MESSAGE PAIRS</em></strong>." This section is retained for backward compatibility and the framework for the existing functional queries.*</p>
</div>
<div class="sect2">
<h3 id="_5_10_1_display_message">5.10.1 Display message</h3>
<div class="paragraph">
<p><strong>The UDM message does not have a direct replacement in the new methodology.</strong></p>
</div>
<div class="paragraph">
<p>If the reader is defining a new query, please refer to the new recommended query/response pairs defined in section <em>5.3.3.4</em>. <strong><em>This section is retained for backward compatibility as of v 2.4 and withdrawn as of v 2.7.</em></strong> See section <em>5.4</em>, "<em>QUERY/RESPONSE MESSAGE PAIRS</em>," for current query/response pairs.hiddentext</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>=== 5.10.2 Original mode queries</p>
</div>
<div class="paragraph">
<p>If the reader is defining a new query, please refer to the new recommended query/response pairs defined in section <em>5.3.3.4</em>. <strong><em>This section is retained for backward compatibility as of v 2.4 and withdrawn as of v 2.7.</em></strong> See section <em>5.4</em>, "<em>QUERY/RESPONSE MESSAGE PAIRS</em>," for current query/response pairs.</p>
</div>
<div class="paragraph">
<p>== 5.11 OUTSTANDING ISSUES</p>
</div>
<div class="paragraph">
<p>It is not clear that there is a good use case for the super segment pattern as described in the example in section <em>5.9.1.2.1</em>, "<em>Comprehensive pharmacy information Query Profile</em>."</p>
</div>
<div class="paragraph">
<p>As currently written the usage and naming of segment groups is not clear:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1. Can a segment group name refer to more than one structure?</p>
</div>
<div class="paragraph">
<p>2. Can the same structure have more than one segment group name?</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This has implications for table 0391, the segment group table, which is an itemization of the segment group names.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Formerly known as the Conformance Statement, this artifact will be referred to throughout the rest of this document as the <strong>Query Profile</strong> to distinguish it from an implementor assertion of conformance to a particular profile. The Query Profile is understood to include the definition of the appropriate response message(s).
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-10-03 14:25:19 -0600
</div>
</div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>2.1 Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_2_1_introduction">2.1 Introduction</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Control chapter of this Standard defines the generic rules that apply to all messages. Subsequent sections define functionally specific messages to be exchanged among certain applications. The specific aspects of message definition that are addressed herein are:</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) the form to be used in functional chapters for describing messages. This includes their purpose, their contents, and the interrelationships among them. This form is called an abstract message definition because it is purely a level 7 (application) definition.</p>
</div>
<div class="paragraph">
<p>b) the HL7 encoding rules for converting an abstract message into a string of characters that comprises an actual message.</p>
</div>
<div class="paragraph">
<p>c) the programming procedures required to exchange messages using the HL7 specifications.</p>
</div>
<div class="paragraph">
<p>d) the anticipated relationship with lower level protocols.</p>
</div>
<div class="paragraph">
<p>e) certain message segments that are components of all messages.</p>
</div>
<div class="paragraph">
<p>f) a single message, the acknowledgment message, that MAY be used unchanged in multiple applications.</p>
</div>
<div class="sect2">
<h3 id="_2_1_1_ansi_modal_verbs">2.1.1 ANSI modal verbs</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>An effort has been made in this version of Chapter 2 to use the ANSI MODAL verbs as described in ISO/IEC Directive, Appendix G, as delineated in the following table:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">To convey the Sense of:</th>
<th class="tableblock halign-left valign-top">Use the following (in UPPERCASE)</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required/Mandatory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL NOT*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Best Practice/Recommendation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHOULD*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHOULD NOT*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acceptable Permitted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAY*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEED NOT*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*Usage of any of these in lower case does not carry the same weight.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_2_conceptual_approach">2.2 Conceptual Approach</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_2_1_assumptions">2.2.1 Assumptions</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The HL7 Standard makes no assumptions about the ownership of data. It also makes no requirements of its own on the subsequent action of the recipient of data, nor does it make any assumption about the design or architecture of the receiving application system. The scope of HL7 is restricted to the specification of messages between application systems, and the events triggering them. HL7 does not explicitly support, but can be used with, systems that support store and forward and data broadcast facilities (see the HL7 Implementation Support Guide).</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_2_trigger_events">2.2.2 Trigger events</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Standard is written from the assumption that an event in the real world of healthcare creates the need for data to flow among systems. The real-world event is called the <strong>trigger event</strong>. For example, the trigger event <strong>a patient is admitted</strong> MAY cause the need for data about that patient to be sent to a number of other systems. The trigger event, <strong>an observation (e.g., a CBC result) for a patient is</strong> <strong>available,</strong> MAY cause the need for that observation to be sent to a number of other systems. When the transfer of information is initiated by the application system that deals with the triggering event, the exchange is termed an <strong>unsolicited update</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: No assumption is made about the design or architecture of the application/ system creating the unsolicited update. The scope of HL7 is restricted to the specification of messages between application/ systems and the events triggering them.</p>
</div>
<div class="paragraph">
<p>HL7 allows the use of trigger events at several different levels of data granularity and inter-relationships. For example, most Patient Administration (ADT) trigger events concern single objects (such as an admit event, which creates a message that contains data about a single person and/or account). Other ADT trigger events are concerned with relationships between more than one object (e.g., the merge events, which specify patient or account merges). Some ADT trigger events pertain to a collection of objects that MAY have no significant inter-relationships (e.g., a record-oriented location-based query, whose response contains data about a collection of inpatients who are related only temporarily, by local geography).</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_3_acknowledgments_original_mode">2.2.3 Acknowledgments: original mode</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When the unsolicited update is sent from one system to another, this acknowledgment mode specifies that it be acknowledged at the application level. The reasoning is that it is not sufficient to know that the underlying communications system guaranteed delivery of the message. It is also necessary to know that the receiving application processed the data successfully at a logical application level.</p>
</div>
<div class="paragraph">
<p>The acknowledgment MAY contain data of interest to the system that initiated the exchange. For example, if a patient care system has processed the trigger event <strong>a lab test is ordered for a patient</strong>, it MAY send an unsolicited update to a lab application identifying the patient, the test ordered, and various other information about the order. The ancillary system will acknowledge the order when it has processed it successfully. For some pairings of patient care and ancillary department systems the acknowledgment MAY also include the ancillary identification number that was assigned (HL7 does not require Order Entry and Results Reporting applications to interface in this manner, but it supports those that do).</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: <span class="line-through">Original mode acknowledgment was replaced by enhanced mode acknowledgment in version 2.2. Implementers SHALL always value MSH-15 and MSH-16</span> Original mode allows the sender to transmit and receive on a single communication channel.</p>
</div>
<div class="paragraph">
<p>The HL7 Standard makes no functional interpretation of the requirement that a system commit the data in a message to its database before acknowledging it. All that is required is that the receiving system accept responsibility for the data, providing the same integrity test that it would apply to data from any source. To continue the prior example, the ancillary system MAY acknowledge the order after placing it in an input queue, expecting to fully process the order into its database at a future time. The only assumption is that the input queue is maintained at the same level of integrity as the database.</p>
</div>
<div class="paragraph">
<p>Instances of messages are transient by nature, and can not be expected by transmitter and/or receiver to be persistent after acknowledgment.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_4_acknowledgments_enhanced_mode">2.2.4 Acknowledgments: enhanced mode</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The HL7 acknowledgment paradigm has been extended to distinguish both accept and application acknowledgments, as well the conditions under which each is required. With a positive accept acknowledgment, the receiving system commits the message to safe storage in a manner that releases the sending system from the need to resend the message. After the message has been processed by the receiving system, an application acknowledgment MAY be used to return the resultant status to the sending system.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_5_queries">2.2.5 Queries</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Query documentation including messages, segments, special protocols, implementation considerations and examples have been moved to chapter 5. The unsolicited display messages were also moved because their message syntax is query-like in nature.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_3_communications_environment">2.3 Communications Environment</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The HL7 Standard defines the messages as they are exchanged among application entities and the procedures used to exchange them. As such, it conceptually operates at the seventh level of the ISO model for Open System Intercon­nection (OSI). It is primarily concerned with the data content and interrelationship of messages and with communicating certain application-level error conditions.</p>
</div>
<div class="paragraph">
<p>Since the OSI protocols are not universally implemented, the HL7 Working Group is interested in providing standards that will be useful in the interim. It is also recognized that there is now, and will continue to be, interest in communicating health data among systems operating in communications environ­ments that provide a high level of functionality, but use protocols other than ISO OSI. The universe of environments of interest to HL7 includes, but is not restricted to:</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) ad hoc environments that do not provide even basic transport reliability. Such environments consist of point-to-point RS-232 links, modems, and even LANs, if their connection to host computers is made via RS-232 communications links. Until OSI high level standards become truly prevalent, many healthcare interfaces will be implemented over such links. In such an environment, the HL7 Lower Level Protocols (LLP) MAY be used between systems to enhance the capabilities of the communications environment. The HL7 Lower Level Protocols are defined in the HL7 Implementation Guide, which is not an official part of the Standard.</p>
</div>
<div class="paragraph">
<p>b) environments that support a robust transport level, but do not meet the high level requirements. This includes environments such as TCP/IP, DECNET, and SNA.</p>
</div>
<div class="paragraph">
<p>c) ISO and proprietary networks that implement up to presentation and other high level services. IBM&#8217;s SNA LU6.2 and IETF NFS are examples of complete proprietary networks.</p>
</div>
<div class="paragraph">
<p>d) two or more applications running on the same physical and/or logical machine that are not tightly integrated. In these environments, the messaging capabilities MAY be provided by inter-process communications services (e.g., Pipes in a UNIX System).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The HL7 Standard assumes that the communications environment will provide the following capabilities:</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) error free transmission. Applications can assume that they correctly received all of the transmitted bytes in the order in which they were sent. This implies that error checking is done at a lower level. However, sending applications MAY NOT assume that the message was actually received without receiving an acknowledgment message.</p>
</div>
<div class="paragraph">
<p>b) character conversion. If the two machines exchanging data use different representations of the same character set, the communications environment will convert the data from one representation to the other.</p>
</div>
<div class="paragraph">
<p>c) message length. HL7 sets no limits on the maximum size of HL7 messages. The Standard assumes that the communications environment can transport messages of any length that might be necessary. In practice, sites MAY agree to place some upper bound on the size of messages and MAY use the message continuation protocol, described later in this chapter, for messages that exceed the upper limit.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> Just as HL7 makes no assumptions about the design or architecture of the application systems sending and receiving HL7 messages, it makes no assumptions about the communications environment beyond those listed above. In particular, aside from the above assumptions, the communications environment, including its architecture, design and implementation, is outside the scope of HL7.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_4_message_framework">2.4 Message Framework</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>This section defines the constituents of messages and provides the methodology for defining abstract messages that are used in later chapters. Message construction rules can be found in section 2.4.5.</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="_2_4_1_messages">2.4.1 Messages</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A <strong>message</strong> is the atomic unit of data transferred between systems. It is comprised of a group of segments in a defined sequence. Each message has a <strong>message type</strong> that defines its purpose. For example the ADT Message type is used to transmit portions of a patient&#8217;s Patient Administration (ADT) data from one system to another. A three-character code contained within each message identifies its type. These are listed in the Message Type list, Appendix A.</p>
</div>
<div class="paragraph">
<p>The real-world event that initiates an exchange of messages is called a trigger event. See Section <em>2.2.2</em>, "<em>Trigger events</em>," for a more detailed description of trigger events. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70003"><em>HL7 Tabl__e</em> <em>0003 – Event type</em></a> in Chapter 2C, Code Tables, for a listing of all defined trigger events. These codes represent values such as <strong>A patient is admitted</strong> or <strong>An order event occurred</strong>. There is a one-to-many relationship between message types and trigger event codes. The same trigger event code SHALL NOT be associated with more than one message type; however a message type MAY be associated with more than one trigger event code.</p>
</div>
<div class="paragraph">
<p>All message types and trigger event codes beginning with the letter "Z" are reserved for locally defined messages. Z codes SHALL NOT be defined within the HL7 Standard.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_4_2_segments_and_segment_groups">2.4.2 Segments and segment groups</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A <strong>segment</strong> is a logical grouping of data fields. Segments of a message MAY be required or optional. They MAY occur only once in a message or they MAY be allowed to repeat. Each segment is given a name. For example, the ADT message MAY contain the following segments: Message Header (MSH), Event Type (EVN), Patient ID (PID), and Patient Visit (PV1).</p>
</div>
<div class="paragraph">
<p>Each segment is identified by a unique three-character code known as the Segment ID. Although the actual segments are defined in various chapters, the ID codes assigned to the various segments are listed in Appendix A.</p>
</div>
<div class="paragraph">
<p>All segment ID codes beginning with the letter <strong>Z</strong> are reserved for locally defined segments. Z Codes SHALL NOT be defined within the HL7 Standard.</p>
</div>
<div class="paragraph">
<p>Two or more segments MAY be organized as a logical unit called a segment group. A segment group MAY be required or optional and might or might not repeat. As of v 2.5, the first segment in a newly defined segment group will be required to help ensure that unparsable messages will not be inadvertently defined. This required first segment is known as the anchor segment.</p>
</div>
<div class="paragraph">
<p>A segment group is assigned a name that represents a permanent identifier that SHALLNOT be changed.</p>
</div>
<div class="paragraph">
<p>A named segment X MAY occur more than once in an abstract message syntax. This differs from repetition described earlier in this section. When this occurs, the following rules SHALL be adhered to:</p>
</div>
<div class="paragraph">
<p>If, within an abstract message syntax, a named segment X appears in two individual or group locations, and</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) Either appearance is optional or repeating in an individual location or,</p>
</div>
<div class="paragraph">
<p>b) either appearance is optional or repeating in a group location</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>then, the occurrences of segment X SHALL be separated by at least one required segment of a different name so that no ambiguity can exist as to the individual or group location of any occurrence of segment X in a message instance.</p>
</div>
<div class="paragraph">
<p>Examples of proper segment grouping</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 33%;">
<col style="width: 35%;">
<col style="width: 32%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ SEG 1}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG1 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG2 ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG1 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG1 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ SEG1 }</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Examples of unparsable segment grouping</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 26%;">
<col style="width: 26%;">
<col style="width: 24%;">
<col style="width: 24%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example 4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ SEG 1}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ SEG1 }</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG1 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ SEG1 }</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG1 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG2 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ SEG2 ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG3 ]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEG3</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In each of these examples it is not possible to tell which part of the message SEG1 belongs.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_4_3_fields">2.4.3 Fields</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: A field is a string of characters. Fields for use within HL7 segments are defined by HL7. A comprehensive data dictionary of all HL7 fields is provided in Appendix A.</p>
</div>
<div class="paragraph">
<p>Refer to section <a href="#protocol-for-interpreting-repeating-fields-in-an-update-message"><em>2.10.5</em></a>, "<a href="#protocol-for-interpreting-repeating-fields-in-an-update-message"><em>Protocol for interpreting repeating segments or segment groups in an update Message</em></a>" for information on updating records in a database.</p>
</div>
<div class="paragraph">
<p>Version control rules regarding fields can be found in section <em>2.7</em>, "<em>Version compatibility definition</em>".</p>
</div>
<div class="paragraph">
<p>Local extension rules regarding fields can be found in section <em>2.10</em>, "<em>Local Extension</em>".</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_2_4_3_1_field_or_component_status">2.4.3.1 Field or Component Status</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>HL7 does not care how systems actually store data within an application. When fields are transmitted, they are sent as character strings</p>
</div>
<div class="paragraph">
<p>A field SHALL exist in one of three population states in an HL7 message:</p>
</div>
<div class="paragraph">
<p><strong>Populated</strong>. (Synonyms: valued, non-blank, not blank, not empty.) The sending system sends a value in the field. For example, if a sending system includes medical record number, that would be communicated as |1234567<sup>^</sup>MR^KP-CA|.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Note:</strong> that the field might be populated with a code that means "no information" or "unknown".</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Not populated</strong>. (Synonyms: unpopulated, not valued, unvalued, blank, empty, not present, missing.) The sending system does not supply a value for the field. The Sender might or might not have a value for the field. The receiving system can make no inference regarding the absence of an element value if there is not a conformance profile governing the implementation. However, if there is a Conformance Message Profile in effect, then special rules apply; see section 2.B, "Conformance Using Message Profiles".</p>
</div>
<div class="paragraph">
<p><strong>Null. HL7 v2.x does not have an explicit concept for null values.</strong></p>
</div>
<div class="paragraph">
<p><strong>Populated with Delete Indicator:</strong> Any existing value for the corresponding data base element in the receiving application SHOULD be deleted. This is symbolically communicated as two double-quotes between the delimiters (i.e., |""|).Employing consecutive double quote characters as the only content of a field for other purposes is prohibited.</p>
</div>
<div class="paragraph">
<p>Refer to Chapter <a href="#<em>Message_construction_rules">_2.5</em></a>, "<a href="#<em>Message_construction_rules">_Message construction rules</em></a>" for information on data fields with a delete indicator.</p>
</div>
<div class="paragraph">
<p>The various chapters of the Standard contain segment attribute tables. These tables list and describe the data fields in the segment and characteristics of their usage. In defining a segment, the following information is specified about each field:</p>
</div>
<div class="paragraph">
<p>1. SEQ : Position</p>
</div>
<div class="paragraph">
<p>2. LEN : Normative Length</p>
</div>
<div class="paragraph">
<p>3. C.LEN : Conformance Length</p>
</div>
<div class="paragraph">
<p>4. DT : Data Type</p>
</div>
<div class="paragraph">
<p>5. OPT: Optionality</p>
</div>
<div class="paragraph">
<p>6. RP/# : Repitition</p>
</div>
<div class="paragraph">
<p>7. TBL# : Table Identifier</p>
</div>
<div class="paragraph">
<p>8. ITEM# : ID Number</p>
</div>
<div class="paragraph">
<p>9. Element Name</p>
</div>
<div class="paragraph">
<p>Chapter 2A contains similar tables that describe the components of a data type. In defining a data type, the following information is specified about each component:</p>
</div>
<div class="paragraph">
<p>1. SEQ : Position</p>
</div>
<div class="paragraph">
<p>2. LEN : Normative Length</p>
</div>
<div class="paragraph">
<p>3. C.LEN : Conformance Length</p>
</div>
<div class="paragraph">
<p>4. DT : Data Type</p>
</div>
<div class="paragraph">
<p>5. OPT: Optionality</p>
</div>
<div class="paragraph">
<p>6. TBL# : Table Identifier</p>
</div>
<div class="paragraph">
<p>7. Component Name</p>
</div>
<div class="paragraph">
<p>8. Comments</p>
</div>
<div class="paragraph">
<p>9. SEC.REF: The reference to where the data type is defined</p>
</div>
<div class="paragraph">
<p>The following sections describe the information that is provided in the table.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_2_position_sequence_within_the_segment">2.4.3.2 Position (sequence within the segment)</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: Ordinal position of the data field within the segment. This number is used to refer to the data field in the text comments that follow the segment definition table.</p>
</div>
<div class="paragraph">
<p>In the segment attribute tables this information is provided in the column labeled <strong>SEQ</strong>.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_3_length">2.4.3.3 Length</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: If applicable, the number of characters that one occurrence of the data field or component MAY occupy if populated.</p>
</div>
<div class="paragraph">
<p>For full discussion, consult section 2.5.5</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_4_conformance_length">2.4.3.4 Conformance Length</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: If applicable, the conformance length that applies to the field or component. For full discussion, consult section 2.5.5</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_5_data_type">2.4.3.5 Data type</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: The basic building block used to construct or restrict the contents of a data field.</p>
</div>
<div class="paragraph">
<p>In the segment attribute tables this information is provided in the column labeled <strong>DT</strong>. If the data type of the field is variable, the notation "varies" will be displayed.</p>
</div>
<div class="paragraph">
<p>There are a number of data types defined by HL7. See section <em>2.14</em>, "<a href="file:///D:\Eigene%20Dateien\V27_CH02A_DataTypes.doc"><em>Data types</em></a>" and in Chapter 2A.</p>
</div>
<div class="paragraph">
<p>Each field is assigned a data type that defines the value domain of the field – the possible values that it SHALL take. The data type SHALL have a type taken from the list of data types defined in chapter 2A.</p>
</div>
<div class="paragraph">
<p>Data types MAY be either primitive or composite. Primitive data types consist of a series of characters as specified by the data type. Composite data types are made up of a series of components that are themselves assigned to a data type, which MAY again be either primitive or composite data types. In the case of composite data types, the components of a component are called sub-components, and they SHALL only be assigned primitive data types.</p>
</div>
<div class="paragraph">
<p>Note that the data types do not specify how systems actually store data within an application. When fields are transmitted, they are sent as character strings as specified by the data type.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_6_optionality">2.4.3.6 Optionality</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: Whether the field is required, optional, or conditional in a segment.</p>
</div>
<div class="paragraph">
<p>In the segment attribute tables this information is provided in the column labeled <strong>OPT</strong>.</p>
</div>
<div class="paragraph">
<p>The designations for optionality are:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 8%;">
<col style="width: 4%;">
<col style="width: 88%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required but MAY be Empty: The field or data type component description SHALL stipulate when the field or data type component MAY be empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C(a/b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>conditional on the trigger event or on some other field(s). The field definitions following the segment attribute table SHOULD specify the algorithm that defines the conditionality for this field. An element with a conditional usage code has an associated condition predicate (See section 2.B.79.9 “Condition Predicate” that determines the requirements (usage code) of the element.</p>
</div>
<div class="paragraph">
<p>If the condition predicate associated with the element is true, follow the rules for <strong><em>a</em></strong> which SHALL be one of “R”, “RE”, “O” or X”:</p>
</div>
<div class="paragraph">
<p>If the condition predicate associated with the element is false, follow the rules for <strong><em>b</em></strong> which SHALL be one of “R”, “RE”, “O” or X”.</p>
</div>
<div class="paragraph">
<p><strong><em>a</em></strong> and <strong><em>b</em></strong> can be valued the same.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not used with this trigger event</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left in for backward compatibility with previous versions of HL7. The field definitions following the segment attribute table SHOULD denote the optionality of the field for prior versions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Withdrawn</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> For Versions 2.3 and higher: the optionality of fields SHOULD be explicitly documented in the segment field definitions that follow each segment definition table; if the optionality of fields within a segment changes depending on the trigger event, that optionality SHOULD also be explicitly documented.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Conditionality defined in Chapter 2 is further expanded by the requirements stated in Chapter 2B. See Chapter 2.B for the explanation of the c(a/b) approach.</p>
</div>
<div class="paragraph">
<p>For version 2.5 and higher, the optionality, table references, and lengths of data type components are supplied in component tables of the data type definition. The component definitions that follow the component table will elaborate on the optionality and table references. Where needed, additional detailed field definitions will follow the formal segment attribute tables. (See also Sections 2.14, ”Message delimiters”, 2.14,”Data types “ ).</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_7_repetition">2.4.3.7 Repetition</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: Whether the field MAY repeat. The value that appears in the repetitions column is the maximum number of allowed occurrences, e.g., a value of '3' would mean that the field can have '3 occurrences'; if unspecified, there is only one occurrence, i.e., cannot repeat.</p>
</div>
<div class="paragraph">
<p>In the segment attribute tables this information is provided in the column labeled <strong>RP/#.</strong> Note that components and subcomponents MAY NOT repeat, so this does not apply to components and subcomponents.</p>
</div>
<div class="paragraph">
<p>The designations for Repetition are:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 4%;">
<col style="width: 82%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N or blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no repetition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the field MAY repeat an indefinite or site-determined number of times</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(integer)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the field MAY repeat up to the number of times specified by the integer</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Each occurrence MAY contain the number of characters specified by the field&#8217;s maximum length. See Section <em>2</em>.</p>
</div>
<div class="paragraph">
<p>Usage Note: For improved readability some work groups opt to leave the Repetition fields blank to indicate that the field SHALL NOT repeat. A blank SHALL NOT be construed to mean that the field MAY optionally repeat.</p>
</div>
<div class="paragraph">
<p>As of v2.5 the Repetition column is to be left blank if the field SHALL NOT repeat.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_8_table">2.4.3.8 Table</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Refer to Chapter 2.C, "Code Tables".</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_9_id_number">2.4.3.9 ID number</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: a small integer that uniquely identifies the data item throughout the Standard<strong>.</strong> In the segment definition this information is provided in the column labeled <strong>ITEM #.</strong></p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_3_10_name">2.4.3.10 Name</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Definition: Descriptive name for the data item. In the segment attribute tables this information is provided in the column labeled <strong>ELEMENT NAME</strong>.</p>
</div>
<div class="paragraph">
<p>When the same name is used in more than one segment, it SHALL have the same data type and semantic meaning in each segment as well as the same ID number. To deal with any ambiguities arising from this convention, whenever a field is referenced herein, the segment name and position SHALL always be included.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_4_4_message_delimiters">2.4.4 Message delimiters</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In constructing a message, certain special characters are used. They are the segment terminator, the field separator, the component separator, subcomponent separator, repetition separator, escape character and truncation character. The segment terminator is always a carriage return (in ASCII 13,hex 0D). The other delimiters are defined in the MSH segment, with the field delimiter in the 4th character position, and the other delimiters occurring as in the field called Encoding Characters, which is the first field after the segment ID. The delimiter values used in the MSH segment are the delimiter values used throughout the entire message. In the absence of other considerations, HL7 recommends the suggested values found in Figure 2-1 delimiter values.</p>
</div>
<div class="paragraph">
<p>At any given site, the subset of the possible delimiters MAY be limited by negotiations between applications. This implies that the receiving applications will use the agreed upon delimiters, as they appear in the Message Header segment (MSH), to parse the message.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The binary representation of the delimiter characters will vary with the character set used in the message.</p>
</div>
<div class="paragraph">
<p>Figure 2-1. Delimiter values</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19%;">
<col style="width: 9%;">
<col style="width: 15%;">
<col style="width: 57%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delimiter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suggested Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encoding Character Position</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Terminator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;cr&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates a segment record. This value cannot be changed by implementers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">|</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separates two adjacent data fields within a segment. It also separates the segment ID from the first data field in each segment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Component Separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separates adjacent components of data fields where allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repetition Separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separates multiple occurrences of a field where allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escape Character</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escape character for use with any field, component, or sub-component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subcomponent Separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separates adjacent subcomp­onents of data fields where allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Truncation character</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicated character to be used for the truncation pattern - See 2.4.5.2, Truncation Pattern.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_2_4_5_length">2.4.5 Length</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>While the length is not generally of conceptual importance in HL7 messages, most HL7 aware applications are implemented using some form of data storage that imposes length limitations on the data. This section describes how the lengths of the fields are controlled, and how interoperability can be arranged in this context.</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_2_4_5_0_normative_length">2.4.5.0 Normative Length</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For some fields or components, the value domain of the content leads to clearly established boundaries for minimum and/or maximum length of the content. In these cases, these known limits are specified for the item. Normative lengths are only specified for primitive data types.</p>
</div>
<div class="paragraph">
<p>Examples of value domains that have clearly established boundaries for minimum and maximum length:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A date/time field: See 2.A.22 DTM date/time for detailed examples.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>o 4..4 for year</p>
</div>
<div class="paragraph">
<p>o 4..6 for Year to month</p>
</div>
<div class="paragraph">
<p>o 8..8 for year to day</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A component whose values are limited to a set of fixed length strings, e.g.(ABC, SYL, or IDE)A component that contains a reference to a field in a message</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The information is given in one of two forms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The minimum and the maximum length separated by two dots, e.g. m..n</p>
</li>
<li>
<p>the list of possible values for length separated by commas, e.g. x,y,z</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a normative length is asserted and assertion is a range, conformant messages SHALL have a length that lies within the boundaries specified. The boundaries are inclusive, so a length of 1..2 means the length of the item SHALL be either 1 or 2. When a normative length is asserted and assertion is a list of values, conformant messages SHALL have a length that is one of the values in the list.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The minimum length is always 1 or more. If an item is optional, and there is no content present, the item is considered as not populated, rather than present with a length of 0.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The deletion indicator is treated as having no length and therefore fits to all length specifications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_5_1_length_persistent_data_stores">2.4.5.1 Length &amp; Persistent Data Stores</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For many fields or components, the value domain of the content does not lead to clearly established boundaries for minimum and/or maximum length of the content.</p>
</div>
<div class="paragraph">
<p>Examples of value domains that do not have clearly established boundaries for minimum and maximum length:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Parts of Names and Addresses</p>
</li>
<li>
<p>Codes defined in external code systems</p>
</li>
<li>
<p>Descriptive text</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In many cases, systems store the information of these value domains using data storage mechanisms that have fixed lengths, such as relational databases, and must impose a limitation on the amount of information that can be stored. Though this does not directly impact on the length of the item in the instance, nevertheless the storage length has great significance for establishing interoperability.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_5_2_truncation_pattern">2.4.5.2 Truncation Pattern</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For technical and/or architectural reasons, many applications must define a limit to the length that they will store for a particular item. This creates a need for the length of an element to be defined somewhere and raises the question of what is intended to happen if a real world value is longer than the acceptable value. The problem of how to handle this is unaffected by whether it is the standard that defines the length, or the receiving system that defines the length: what can be done?</p>
</div>
<div class="paragraph">
<p>The most obvious response is that the data must be rejected, and either the message cannot be constructed or must be rejected completely. For some data items, this is the only clinically safe behaviour.On the other hand, for some data items such as names and addresses, this is generally unwelcome information – the system can still function to some degree in the presence of truncated data.</p>
</div>
<div class="paragraph">
<p>However truncation of data can have later consequences – if a data item such as a particularly long surname is truncated, and then returned to the source application in the truncated form, the source application might not correctly match on the truncated name.</p>
</div>
<div class="paragraph">
<p>For this reason, when values are truncated because they are too long (whether because some applicable specification limits the length of the item, or because the application is not able to store the full value), the value SHOULD be truncated at N-1, where N is the length limit, and the final character replaced with a special truncation character. This means that whenever that value is subsequently processed later, either by the system, a different system, or a human user, the fact that the value has been truncated has been preserved, and the information can be handled accordingly.</p>
</div>
<div class="paragraph">
<p>The truncation character is not fixed; applications MAY use any character. The truncation character used in the message is defined in MSH-2. The default truncation character in a message is # (ASCII 35, HEX 23),because the character must come from the narrow range of allowed characters in an instance. The truncation character only represents truncation when it appears as the last character of a truncatable field. It SHALL be escaped if the last character of the data that is the maximum allowable size for the component is the truncation character.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>For a field with a conformance length of 5 where the content is |1234\P\| the truncation character is not representing truncation, it is the actual data.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The selection of # as truncation character is taken from ISO 22220 and 27527.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_5_3_conformance_length">2.4.5.3 Conformance Length</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If populated, the conformance length column specifies the minimum length that applications must be able to store. Conformant applications SHALL NOT truncate a value that is shorter than the length specified. The conformance length is also the minimum value that SHOULD be assigned to maximum length in an implementation profile.</p>
</div>
<div class="paragraph">
<p>In addition, the conformance length MAY be followed by a “=” or a “<mark>”. The “=” denotes the value MAY never be truncated, and the “</mark>” denotes that the truncation behaviour defined for the data type applies.</p>
</div>
<div class="paragraph">
<p>Applications are not required to implement the truncation pattern, even if it can be applied to an item. Applications SHOULD declare their adoption of the truncation pattern in their conformance profiles.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_5_4_type_and_componentfield_lengths">2.4.5.4 Type and Component/Field lengths</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Either normative or conformative lengths MAY be specified on a primitive data type. Whether or not normative or conformance lengths are specified on the data type, they MAY also be specified on the components and/or fields where the data type is used. If specified here, they override the length specified for the type (but must be consistent with the information on the type). If not specified, then the information specified on the data type itself – if present – applies where the data type is used.</p>
</div>
<div class="paragraph">
<p>Minimum and maximum lengths are not assigned for composite data types (data types having more than one component). Not only can the minimum or maximum lengths be indeterminate, it is misleading to report a length with separator characters included, and also misleading to associate a length with a composite component that must be broken up when it is stored. For these reasons derived lengths are not reported in this standard, though implementers MAY derive them as desired.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_2_4_5_5_implications_for_implementers">2.4.5.5 Implications for Implementers</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In an ideal world, the standard would be able to determine the maximum length for a value with authority, and all implementations would be able to handle the maximum length. However neither of these are true, and so this specification defines both normative maximum length, conformance length, and whether a value MAY be truncated. This following table summarises how these various parameters interact, provides an example of each combination, and outlines the implications for implementations. The second data type listed refers to the underlying data type the cited one is based upon.</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 69%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID/DT</th>
<th class="tableblock halign-left valign-top">Child DT</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2..5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CX.5 MAY contain a number of fixed values, all of which have a length between 2 and 5. Other values are not allowed.</p>
</div>
<div class="paragraph">
<p>Truncation is not allowed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The conformance length is 15 – applications SHALL be able to properly handle all values, which includes the range of allowed lengths for this component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ED.3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ED.3 is one of the few examples where an ID value is taken from an externally derived code system (IANA mime types in this case).</p>
</div>
<div class="paragraph">
<p>The conformance length is 32: applications SHALL be able to handle mime types up to a length of 32. Applications can choose to handle more if desired.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since truncation is not allowed, applications SHALL respond with an error if the length of a mime type exceeds the length it can handle without truncation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If populated, the value SHALL be at least one character. There is no upper limit to the number of characters that are allowed, since this specification cannot apply a limit to the external code systems that CWE is provided to support. In particular, Snomed-CT (post-coordinated) expressions MAY be provided in the coding identifier component.</p>
</div>
<div class="paragraph">
<p>However this specification does not impose the requirement to support arbitrarily long values in this very common component. Instead, applications SHALL support codesystem identifiers up to 20 characters long.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Since the identifier is useless if truncated, truncation SHALL NOT be allowed.</p>
</div>
<div class="paragraph">
<p>Application designers SHOULD consider the range of possible values and how they are handled. If the application imposes a maximum limit, this SHOULD be published in the application conformance profile.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FN.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50#</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FN.1 contains a surname. This specification is not in a position to impose an upper normative limit on the length of all surnames in the world.</p>
</div>
<div class="paragraph">
<p>However our collective experience shows that values longer than 50 are rarely encountered, so applications SHALL be able to handle values up to the length of 50 without truncation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Applications MAY choose to truncate values longer than 50 characters. If applications do this, the truncation pattern SHOULD be followed in order to reduce the risks of downstream handling of the data following truncation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAD.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>XAD.5 is postal/zip code. This specification is not able to impose a normative limit on the size of postal codes around the world, but our collective experience is that 12 covers all the currently known postal systems.</p>
</div>
<div class="paragraph">
<p>Because postal code is used as an identifier in postal delivery systems, it is not appropriate to truncate the value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN.12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPN.12 specifies the date that a person name became applicable. By default, this field allows a highly precise date including milliseconds and a time zone. Applications are not required to implement this level of precision; they MAY truncate the value to a the day containing the specified time interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4..24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8#</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE.16</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4..24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE.16 specifies the date that a value set was published. In some contexts, the publication date of a value set MAY be identified by a date precise to at least hours and minutes in order to allow multiple releases in a single day.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4..24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8#</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>However this is an unusual use case; nearly all value sets only identify their publication date to the nearest day.</p>
</div>
<div class="paragraph">
<p>For this reason applications are only required to handle value sets specified to the particular day. However, since the publication date identifies a particular version of the value set, applications are not allowed to truncate the publication date. This specification recommends but does not require that applications support a full date time for this value.</p>
</div>
<div class="paragraph">
<p>Note that the base DTM type default conformance length is that all applications are required to be able to store a full day, and are allowed to truncate dates to this length. These rules MAY be overridden where DTM is used.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTE.1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTE.1 is the segment Id. The segment id MAY have any value between 1 and 9999. Applications are required to handle all these values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4=</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SN.2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SN.2 is a numerical value from a structured numeric presented in decimal form. It has a normative length of 16.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..16</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The NM data type defines its own truncation pattern driven by the semantics of numbers. The truncation character SHALL NOT be used. While there is no conformance length specified, the truncation rules for the NM data type SHALL always be followed; the application SHALL reject the instance if it is unable to conform to these rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ED.5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ED.5 is text data of arbitrary length. This specification does not apply either a normative length or a conformance length. This does not mean that applications are not required to handle data of infinite length. Applications MAY choose to define limits on the length of data handled in their conformance profiles.</p>
</div>
<div class="paragraph">
<p>Note that the length of data handled can depend on the type of the data.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_2_4_6_acknowledgment_choreography">2.4.6 Acknowledgment Choreography</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Acknowledgment Choreography is defined as the definition of the acknowledgments to be expected for a given trigger event. It is required to document the expected acknowledgment based on the values in link:#_MSH-15<em>_Accept Acknowledgment Type[MSH-15] and link:#_MSH-16</em>_Application Acknowledgment[MSH-16].</p>
</div>
<div class="paragraph">
<p>As of V2.9, all chapters SHALL include in their trigger event definitions the acknowledgment choreography.</p>
</div>
<div class="paragraph">
<p>The first row SHALL contain the words "Acknowledgment Choreography". The second row SHALL contain the message definition being described. When multiple message definitions have the same response in the same chapter all of the message pairs MAY be listed in the second row.</p>
</div>
<div class="paragraph">
<p>The values rows MSH-15 and MSH-16 are extracted from the valid values for the field.</p>
</div>
<div class="paragraph">
<p>The Application ACK row SHOULD contain the message expected in reponse to the processing of the message named in third row containing the value(s) for MSH-16 in that column.</p>
</div>
<div class="paragraph">
<p>An example can be found in Section 2.11.2</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 18%;">
<col style="width: 22%;">
<col style="width: 6%;">
<col style="width: 16%;">
<col style="width: 19%;">
<col style="width: 19%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgment Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XXX<sup>YYY</sup>ZZZ/XXX<sup>YYY</sup>ZZZ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Original mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Enhanced mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL, SU, ER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK^xxx ^ACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>xxx</sup>ACK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>xxx</sup>xxxx_xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>xxx</sup>xxxx_xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>xxx</sup>xxxx_xxxx</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For proper formatting please consult the styleguide.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_5_message_construction_rules">2.5 Message construction rules</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>This section addresses HL7 general rules for composing messages. Both the sender and receiver of the data must have predictable rules for how they will process the data. The reader is also referred to Section 2.B, "Conformance Using Message Profiles", where procedures for ensuring messaging integrity are discussed in detail.</p>
</div>
<div class="paragraph">
<p>In constructing a message, certain special characters are used. They are the segment terminator, the field separator, the component separator, subcomponent separator, repetition separator, escape character and the truncation character. The segment terminator is always a carriage return (in ASCII 13, hex 0D).The other delimiters are defined in the MSH segment, with the field delimiter in the 4th character position, and the other delimiters occurring as in the field called Encoding Characters, which is the first field after the segment ID. The delimiter values used in the MSH segment are the delimiter values used throughout the entire message. In the absence of other considerations, HL7 recommends the suggested values found in Figure 2-1 delimiter values.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> These message construction rules define the standard HL7 encoding rules, creating variable length delimited messages. Although only one set of encoding rules has been defined as a standard since HL7 Version 2.3, other encoding rules are possible (but since they are non-standard, they MAY only be used by a site-specific agreement).</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="_2_5_1_message_construction_pseudocode">2.5.1 Message Construction Pseudocode</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>procedure construct_message ( data ) \{</p>
</div>
<div class="paragraph">
<p>identify_message_needed;</p>
</div>
<div class="paragraph">
<p>identify_separators_used;</p>
</div>
<div class="paragraph">
<p>validate( data );</p>
</div>
<div class="paragraph">
<p>order_segments( data, segment_list );</p>
</div>
<div class="paragraph">
<p>foreach segment in ( segment_list ) \{</p>
</div>
<div class="paragraph">
<p>insert segment.name; /* e.g., MSH */</p>
</div>
<div class="paragraph">
<p>/* gather all data for fields */</p>
</div>
<div class="paragraph">
<p>foreach field in ( fields_of( segment ) ) \{</p>
</div>
<div class="paragraph">
<p>insert field separator; /* e.g., | */</p>
</div>
<div class="paragraph">
<p>/* gather occurrences (MAY be multiple only for fields that are allowed to repeat */</p>
</div>
<div class="paragraph">
<p>foreach occurrence in ( occurrences_of( field ) ) \{</p>
</div>
<div class="paragraph">
<p>construct_occurrence( occurrence );</p>
</div>
<div class="paragraph">
<p>if not last ( populated occurrence ) insert repetition_separator; /* e.g., ~ */</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>break if last ( populated field );</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>insert segment_terminator; /* always&lt;cr&gt;! */</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>return;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>procedure construct_occurrence ( occurrence ) \{</p>
</div>
<div class="paragraph">
<p>/* gather populated components */</p>
</div>
<div class="paragraph">
<p>foreach component in ( components_of( occurrence ) ) \{</p>
</div>
<div class="paragraph">
<p>get_subcomponent_data( component );</p>
</div>
<div class="paragraph">
<p>/* gather all data for subcomponents */</p>
</div>
<div class="paragraph">
<p>foreach subcomponent in ( subcomponents_of( component ) ) \{</p>
</div>
<div class="paragraph">
<p>substitute( escape_character, \E\ );</p>
</div>
<div class="paragraph">
<p>/* escape the field separator */</p>
</div>
<div class="paragraph">
<p>substitute( field_separator, \F\ );</p>
</div>
<div class="paragraph">
<p>/* escape the encoding characters */</p>
</div>
<div class="paragraph">
<p>substitute( component_separator, \S\ );</p>
</div>
<div class="paragraph">
<p>substitute( repetition_separator, \R\ );</p>
</div>
<div class="paragraph">
<p>substitute( subcomponent_separator, \T\ );</p>
</div>
<div class="paragraph">
<p>substitute (truncation_character, \P\ ) /<strong>See 2.6.2Truncation Character escape</strong>/</p>
</div>
<div class="paragraph">
<p>insert subcomponent;</p>
</div>
<div class="paragraph">
<p>if not last ( populated subcomponent ) insert subcomponent_separator; /* e.g., &amp; */</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>if not last ( populated component ) insert component_separator; /* e.g., ^ */</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>return;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_2_5_1_0_message_construction_flow_chart">2.5.1.0 Message Construction Flow Chart</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The flow charts on the following pages represent another view of the message construction rules. The first shows the rules for transmitting a message; the second shows transmitting field occurrences.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image1.wmf" alt="extracted-media/media/image1"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image2.wmf" alt="extracted-media/media/image2"></span></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_5_2_rules_for_the_recipient">2.5.2 Rules for the recipient</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The following rules apply to receiving HL7 messages and converting their contents to data values:</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) ignore segments, fields, components, subcomponents, and extra repetitions of a field that are present but were not expected.</p>
</div>
<div class="paragraph">
<p>b) treat optional segments that were expected but are not present as consisting entirely of fields that are not present.</p>
</div>
<div class="paragraph">
<p>c) treat fields and components that are expected but were not included in a segment as not present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_5_3_encoding_rules_notes">2.5.3 Encoding rules notes</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If a segment is to be continued across messages, use the extended encoding rules. These rules are defined in terms of the more general message continuation protocol (see Section <em>2.9.2</em>, "<em>Continuation messages and segments</em>").</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_6_use_of_escape_sequences_in_fields">2.6 Use of escape sequences in fields</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_6_1_formatting_codes">2.6.1 Formatting codes</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When delimiters are included in any component, the delimiters SHALL be escaped. Failure to do so can alter the meaning of the component. The escape character is whichever ASCII character is specified in the &lt;escape character&gt; component of MSH-2 Encoding Characters. For purposes of this section, the character \ will be used to represent the character so designated in a message. An escape sequence consists of the escape character followed by an escape code ID of one character, zero (0) or more data characters, and another occurrence of the escape character. The following escape sequences are defined:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 79%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\F\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\S\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">component separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\T\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subcomponent separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\R\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">repetition separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\E\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">escape character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\P\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">truncation character</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When a field, component or sub-component of type TX, FT, or CF is being encoded, additional escape character(s) MAY be used to signal certain special characteristics of portions of the text field. The escape character is whatever display ASCII character is specified in the &lt;escape character&gt; component of MSH-2 Encoding Characters.</p>
</div>
<div class="paragraph">
<p>The following additional escape sequences are defined:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21%;">
<col style="width: 79%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\H\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">start highlighting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\N\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">normal text (end highlighting)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\Xdddd&#8230;&#8203;\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hexadecimal data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\Zdddd&#8230;&#8203;\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">locally defined escape sequence</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Escape sequences SHALL NOT contain nested escape sequences.</p>
</div>
<div class="paragraph">
<p>For the purposes of determining length, all the characters inside the escape (all between the opening and closing \, not including the \ symbols themselves) count towards the length. This applies to all the escape sequences, including the formatting ones described below.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_6_2_truncation_character_escape">2.6.2 Truncation Character escape</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When the last character of a value that is expected to be truncated is the truncation character, the truncation character SHALL be escaped.</p>
</div>
<div class="paragraph">
<p>Examples of truncation character usage.</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Conformance length</th>
<th class="tableblock halign-left valign-top">Original value</th>
<th class="tableblock halign-left valign-top">Component value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abcdefgh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abcde#</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abcdef</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abcdef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abcde#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abcde\P\</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_2_6_3_escape_sequences_supporting_multiple_character_sets">2.6.3 Escape sequences supporting multiple character sets</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The following HL7 escape sequences are defined to support multiple character sets for fields, components and sub-components that are defined as data types FT, ST, and TX. They allow HL7 parsers to use escape codes (defined in the standards used below), without breaking, and without being non-conformant to the HL7 escape paradigm defined in this section.</p>
</div>
<div class="paragraph">
<p>\Cxxyy\ single-byte character set escape sequence with two hexadecimal values, xx and yy, that indicate the escape sequence defined for one of the character repertoires supported for the current message (i.e., ISO-IR xxx).</p>
</div>
<div class="paragraph">
<p>\Mxxyyzz\ multi-byte character set escape sequence with three hexadecimal values, xx, yy and zz. zz is optional.</p>
</div>
<div class="paragraph">
<p>Common character set escape sequences include the following which are defined in the standards mentioned:</p>
</div>
<div class="paragraph">
<p>Single-byte character sets:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 32%;">
<col style="width: 68%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2842\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR6 G0 (ISO 646 : ASCII)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D41\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR100 (ISO 8859 : Latin Alphabet 1)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D42\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR101 (ISO 8859 : Latin Alphabet 2)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D43\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR109 (ISO 8859 : Latin Alphabet 3)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D44\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR110 (ISO 8859 : Latin Alphabet 4)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D4C\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR144 (ISO 8859 : Cyrillic)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D47\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR127 (ISO 8859 : Arabic)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D46\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR126 (ISO 8859 : Greek)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D48\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR138 (ISO 8859 : Hebrew)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2D4D\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR148 (ISO 8859 : Latin Alphabet 5)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C284A\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR14 (JIS X 0201 -1976: Romaji)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\C2949\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR13 (JIS X 0201 : Katakana)</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Multi-byte codes:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 69%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\M2442\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR87 (JIS X 0208 : Kanji, hiragana and katakana)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\M242844\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-IR159 (JIS X 0212 : Supplementary Kanji)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_2_6_4_highlighting">2.6.4 Highlighting</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In designating highlighting, the sending application is indicating that the characters that follow somehow can be made to stand out, but leaving the method of doing so to the receiving application. Depending on device characteristics and application style considerations, the receiving application MAY choose reverse video, boldface, underlining, blink, an alternate color or another means of highlighting the displayed data. For example the message fragment:</p>
</div>
<div class="paragraph">
<p>DSP| TOTAL CHOLESTEROL \H\240*\N\ [90 - 200]</p>
</div>
<div class="paragraph">
<p>might cause the following data to appear on a screen or report:</p>
</div>
<div class="paragraph">
<p>TOTAL CHOLESTEROL 240* [90 - 200]</p>
</div>
<div class="paragraph">
<p>whereas another system might choose to show the 240* in red.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_6_5_special_character">2.6.5 Special character</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The special character escape sequences (\F\, \S\, \R\, \T\, \P\ and \E\) allow the corresponding characters to be included in the data in a text field, though the actual characters are reserved. For example, the message fragment</p>
</div>
<div class="paragraph">
<p>DSP| TOTAL CHOLESTEROL 180 \F\90 - 200\F\</p>
</div>
<div class="paragraph">
<p>DSP| \S\----------------\S\</p>
</div>
<div class="paragraph">
<p>would cause the following information to be displayed, given suitable assignment of separators:</p>
</div>
<div class="paragraph">
<p>TOTAL CHOLESTEROL 180 |90 - 200|</p>
</div>
<div class="paragraph">
<p><sup>----------------</sup></p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_6_6_hexadecimal">2.6.6 Hexadecimal</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When the hexadecimal escape sequence (\Xdddd&#8230;&#8203;\) is used the X SHALL be followed by 1 or more pairs of hexadecimal digits (0, 1, . . . , 9, A, . . . , F). Consecutive pairs of the hexadecimal digits represent 8-bit binary values. The interpretation of the data is entirely left to an agreement between the sending and receiving applications that is beyond the scope of this Standard.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_6_7_usage_and_examples_of_formatted_text">2.6.7 Usage and Examples of Formatted Text</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If the field is of the formatted text (FT) data type, formatting commands also SHALL be surrounded by the escape character. Each command begins with the "." (period) character. The following formatting commands are available:</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 18%;">
<col style="width: 82%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.sp &lt;number&gt;\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End current output line and skip &lt;number&gt; vertical spaces. &lt;number&gt; is a positive integer or absent. If &lt;number&gt; is absent, skip one space. The horizontal character position remains unchanged. Note that only for purposes of compatibility with previous versions of HL7, "^\.sp\" is equivalent to "\.br\."</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.br\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Begin new output line. Set the horizontal position to the current left margin and increment the vertical position by 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.fi\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Begin word wrap or fill mode. This is the default state. It can be changed to a no-wrap mode using the .nf command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.nf\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Begin no-wrap mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.in &lt;number&gt;\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indent &lt;number&gt; of spaces, where &lt;number&gt; is a positive or negative integer. This command cannot appear after the first printable character of a line.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.ti &lt;number&gt;\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temporarily indent &lt;number&gt; of spaces where number is a positive or negative integer. This command cannot appear after the first printable character of a line.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.sk &lt; number&gt;\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip &lt;number&gt; spaces to the right.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\.ce\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End current output line and center the next line.</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The component separator that marks each line defines the extent of the temporary indent command (.ti), and the beginning of each line in the no-wrap mode (.nf). Examples of formatting instructions that are NOT included in this data type include: width of display, position on page or screen, and type of output devices.</p>
</div>
<div class="paragraph">
<p>Figure 2-3 is an example of the FT data type from a radiology impression section of a radiology report:</p>
</div>
<div class="paragraph">
<p>Figure 2-3. Formatted text as transmitted</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">| \.in+4\\.ti-4\ 1. The cardiomediastinal silhouette is now within normal limits.\.br\\.ti-4\ 2. Lung fields show minimal ground glass appearance.\.br\\.ti-4\ 3. A loop of colon visible in the left upper quadrant is distinctly abnormal with the appearance of mucosal effacement suggesting colitis.\.br\.in-4\|</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Figure 2-4 shows one way of presenting the data in Figure 2-3. The receiving system can create many other interpretations by varying the right margin.</p>
</div>
<div class="paragraph">
<p>Figure 2-4. Formatted text in one possible presentation</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1. The cardiomediastinal silhouette is now within normal limits.</p>
</div>
<div class="paragraph">
<p>2. Lung fields show minimal ground glass appearance.</p>
</div>
<div class="paragraph">
<p>3. A loop of colon visible in the left upper quadrant is distinctly abnormal with the appearance of mucosal effacement suggesting colitis.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_2_6_8_local">2.6.8 Local</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When the local escape sequence (\Zdddd&#8230;&#8203;\) is used the Z SHALL be followed by characters that are valid in a TX field. The interpretation of the data is entirely left to an agreement between the sending and receiving applications that is beyond the scope of this Standard.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_7_version_compatibility_definition">2.7 Version compatibility definition</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The rules, described in section <em>2.5</em>, <em>Message construction rules,</em> for receiving HL7 messages and converting their contents to data values allow the following definition of a backward compatibility requirement between the 2.x versions of HL7:</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: If an issue is not covered explicitly under these rules, no assumption SHOULD be made that the change is allowed.</p>
</div>
<div class="paragraph">
<p>The keys to understanding version compatibility are the following 2 axioms, plus the processing rules which state that unexpected information SHOULD be discarded.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Old receivers receiving new messages SHOULD be able to continue receiving messages without error.</p>
</li>
<li>
<p>New receivers SHOULD be able to understand old messages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section elaborates on what the kinds of changes can be done that satisfies these axioms. Only HL7 changes introduced in new versions are included. Local extensions are discussed in section <em>2.10</em>, "<em>Local Extension</em>".</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="_2_7_1_adding_messages_or_message_constituents">2.7.1 Adding messages or message constituents</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>When a new message or a new constituent of an HL7 message is introduced it SHALL be defined as described below. A sending system SHOULD be able to send a new message or new constituent; the receiver, regardless of its version level, SHALL ignore any message or message constituent it is not expecting without generating an application failure. This does not preclude a receiver notifying the sender that additional element was ignored, but the receiving application SHOULD NOT fail just from the existence of additional element.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) New messages MAY be introduced.</p>
</div>
<div class="paragraph">
<p>b) A new segment group MAY be defined.</p>
</div>
<div class="paragraph">
<p>c) As of V2.5 the first segment in a newly-defined segment group SHALL be marked as required.</p>
</div>
<div class="paragraph">
<p>d) New segments MAY be introduced to an existing message. In general these SHOULD be introduced at the end of a message or a segment group, but they MAY be introduced elsewhere within the message if the segment hierarchy makes this necessary. Unless needed as a technical correction or for regulatory reporting purposes, a new segment SHALL NOT be added to a deprecated message. As of v2.6 all new segments, except for those pertaining only to message transmission or control, SHALL include an Action Code field as the first or second field as appropriate.</p>
</div>
<div class="paragraph">
<p>e) Care must be taken when introducing a new segment if this results in a situation in which a named segment X appears in two individual or group locations. See section <em>2.5</em>, "<em>Message construction rules</em>".</p>
</div>
<div class="paragraph">
<p>f) New fields MAY be added at the end of a segment. A field that changes the semantic meaning of a segment (e.g., an Acton Code, or Mood code) SHALL only be introduced in a pre-existing segment if the usage of the field is conditional on it not being used in messages with pre-existing trigger events. This is to avoid the risk of reversing the intent of the segment as it is known to the recipient of an earlier version. For example, if the Sender were to send the segment with a delete action code, the recipient would not understand that the information SHOULD be deleted.</p>
</div>
<div class="paragraph">
<p>g) A new data type MAY be introduced.</p>
</div>
<div class="paragraph">
<p>h) New components MAY be added at the end of a data type.</p>
</div>
<div class="paragraph">
<p>i) A new table MAY be introduced.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_7_2_changing_messages_or_message_constituents">2.7.2 Changing messages or message constituents</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Allowable changes to messages or message constituents can be categorized as name, data type, optionality, repeatability, length or definition changes.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>a) The descriptive text name of a message or message constituent (except for segment group name) MAY be changed. This is not expected to have impact on either the sender&#8217;s ability to transmit a message or the receiver&#8217;s ability to receive and understand the message. Reasons for changing the descriptive text name include: 1) clarify a misleading name, and 2) encompassing a broader use without jeopardizing current use.</p>
</div>
<div class="paragraph">
<p>b) The data type of a field or data type component MAY be changed. A sending system SHOULD be able to send the modified field or data type; the receiver, regardless of its version level, SHOULD be able to understand the message and to ignore any message constituent it is not expecting.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) The data type of the field MAY be changed provided that the components of the new data type have the same structure and interpretation as the old data type. For example, an IS data type MAY be changed to a CE, but a PPN data type cannot be changed to a PN. An NM data type cannot be changed to an ST data type.</p>
</div>
<div class="paragraph">
<p>2) For existing fields in existing segments, data types MAY be changed if the leftmost (prior version) part of the field has the same meaning as it had in the prior version of HL7. This is in accordance with the rules governing the addition of new components and subcomponents described in the section above. In other words, if the new parts of the field (those that are part of the new data type) are ignored, what remains is the old field (defined by the old data type), which has the same meaning as it had in the prior version of HL7.</p>
</div>
<div class="paragraph">
<p>3) If a data type component has its data type changed, the structure and interpretation SHALL remain the same as the pre-existing component. Any new component is added at the end of the data type.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>c) The optionality of a message constituent MAY be changed. A sending system SHOULD be able to send the modified field; the receiver, regardless of its version level, SHOULD be able to understand the message. This pertains as follows:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) Existing optional segment groups MAY be made required.</p>
</div>
<div class="paragraph">
<p>2) Existing optional segments MAY be made conditional or required.</p>
</div>
<div class="paragraph">
<p>3) Existing optional fields MAY be made conditional or required.</p>
</div>
<div class="paragraph">
<p>4) Existing required fields MAY be made conditional if a new trigger event has been applied. The condition must be specified such that the field remains required for the pre-existing trigger events.</p>
</div>
<div class="paragraph">
<p>5) Existing optional components of a data type MAY be made conditional or required.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>d) The repeatability of a message constituent MAY be changed. A sending system SHOULD be able to send the modified message constituent; the receiver, regardless of its version level, SHOULD be able to understand the message. Note that if a non-repeating message constituent is made repeating, information sent in the new repetitions couldbe lost to the recipient who is not expecting them.</p>
</div>
<div class="paragraph">
<p>If HL7 has given, or will give, semantic meaning to the first instance, to allow backward compatibility, the first instance of the repeating constituent SHALL have the same meaning as the non-repeating constituent had in the prior version of HL7. In this way, a receiving application that interprets the message based upon the prior standard would continue to find the same intent communicated in the message.</p>
</div>
<div class="paragraph">
<p>If HL7 has not given, and will/can not give, semantic meaning to the first instance, and one or more implementation-applied business rules exist to select one of several occurrences to populate a non-repeating constituent, those same rules SHOULD be applied when a newer version of the standard allows for repetition of the constituent. By applying the prior business rules to determine the first occurrence of a repeating constituent, a receiving application that interprets the message based upon the prior standard would continue to find the same intent communicated in the message.</p>
</div>
<div class="paragraph">
<p>If, in the judgment of the owner/author of the standard section in question, changing a message constituent from non-repeating to repeating poses logical, parsing, business, or other compatibility issues, the owner/author SHOULD create a new structure to eliminate the compatibility concern.</p>
</div>
<div class="paragraph">
<p>For example, if allowing a segment to repeat implies a change to the business intent of the message, the work group(s) responsible SHOULD define a new message structure (as a new message/trigger) and retain the old structure for backward compatibility.</p>
</div>
<div class="paragraph">
<p>This pertains as follows:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) A segment group MAY change from non-repeating to repeating, subject to the backward compatibility concerns expressed above.</p>
</div>
<div class="paragraph">
<p>2) A segment group SHALL NOT be changed from repeating to non-repeating.</p>
</div>
<div class="paragraph">
<p>3) A segment MAY be changed from non-repeating to repeating, subject to the backward compatibility concerns expressed above.</p>
</div>
<div class="paragraph">
<p>4) A segment SHALL NOT be changed from repeating to non-repeating.</p>
</div>
<div class="paragraph">
<p>5) A field MAY be changed from non-repeating to repeating, subject to the backward compatibility concerns expressed above. A field SHALL NOT be changed from repeating to non-repeating.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>e) The minimum and maximum normative lengths and the conformance length and truncation status of each field or data type component MAY be changed between versions. .</p>
</div>
<div class="paragraph">
<p>f) Table definition MAY change.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) A table MAY be changed from user-defined to HL7 defined or externally defined.</p>
</div>
<div class="paragraph">
<p>2) A table MAY be changed from HL7 defined to an externally defined table. When this occurs, the data type of the field SHOULD be changed to a CNE or CWE.</p>
</div>
<div class="paragraph">
<p>3) A table MAY be changed from HL7 defined published in Chapter 2c to HL7 Defined sourced externally (HL7-EXT).</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_2_7_3_deprecating_messages_or_message_constituents">2.7.3 Deprecating messages or message constituents</h3>
<div class="paragraph">
<p>Any required, optional or conditional constituent of an HL7 message, including the message itself, MAY be deprecated. This means that one of the following situations has occurred:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="ulist">
<ul>
<li>
<p>The message or message constituent no longer has a meaningful purpose</p>
</li>
<li>
<p>The message or message constituent has been replaced by a better method</p>
</li>
</ul>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Language will be inserted stating the fact of deprecation, the version in which the deprecation occurred, and what message or message constituent, if any, replaces it. The phrase "Retained for backward compatibility only in version 2.x; refer to section n.m instead" will be the standard language for such an occurrence.</p>
</div>
<div class="paragraph">
<p>The fact of deprecation SHOULD NOT affect either the sender or the receiver because the message or message constituent is retained for backward compatibility. Implementers, by site agreement, MAY agree to not support deprecated message constituents.</p>
</div>
<div class="paragraph">
<p>The following are allowed:</p>
</div>
<div class="paragraph">
<p>a) A message MAY be deprecated.</p>
</div>
<div class="paragraph">
<p>c) A trigger event MAY be deprecated.</p>
</div>
<div class="paragraph">
<p>d) A message structure MAY be deprecated.</p>
</div>
<div class="paragraph">
<p>e) A segment in an existing message MAY be deprecated. Implementers, by site agreement, MAY agree to not support deprecated segments. If the segment that is to be deprecated has dependents the entire segment group SHALL be deprecated. For example, in a group [\{ABC[DEF][{GHI}]], DEF and/or GHI MAY be deprecated, but ABC cannot be deprecated without deprecating the whole.</p>
</div>
<div class="paragraph">
<p>f) A field MAY be deprecated by HL7. Before deprecating a field, HL7 SHALL ensure that all message structures which use that field have an appropriate non-deprecated location to move the data. Implementers, by site agreement, MAY agree to not use deprecated fields.</p>
</div>
<div class="paragraph">
<p>g) A data type MAY be deprecated provided all fields referencing it have been deprecated or there is an explicit statement that the data type is not to be used in any field defined in the future.</p>
</div>
<div class="paragraph">
<p>h) A data type component MAY be deprecated.</p>
</div>
<div class="paragraph">
<p>i) A table MAY be deprecated. This includes HL7 tables, HL7-EXT tables, user-defined tables, imported external tables and reference to external tables. Before deprecating a table, HL7 SHALL ensure that no references to the table exist.</p>
</div>
<div class="paragraph">
<p>j) An entry in an HL7-defined table MAY be deprecated. The table itself SHOULD be reviewed if it contains a substantial number of deprecated members.</p>
</div>
<div class="paragraph">
<p>k) An entry in an imported external table SHALL <strong>NOT</strong> be deprecated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_7_4_removing_messages_or_message_constituents">2.7.4 Removing messages or message constituents</h3>
<div class="paragraph">
<p>A message or message constituent MAY be removed from the standard when criteria described in this section are met. HL7 will track old names so they are not re-used.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: To refer to the detail of a withdrawn message constituent, the reader will need to review the appropriate earlier version of the standard. By site agreement senders and receivers MAY agree to continue to use messages and/or message constituents that have been removed.</p>
</div>
<div class="paragraph">
<p>a) A message constituent MAY be immediately removed from the standard based on the following criteria (immediately means in the same version in which the criteria are met.).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) A message structure MAY be removed immediately provided no message references it in the standard. Care must be taken lest a message structure is prematurely removed if the associated trigger event that contributed to its name is removed. For example, if a message structure ABC_D01 is associated with trigger events D01, D02 and D03 and D01 is changed and becomes associated with another existing message structure DEF_E01, the message structure ABC_D01 is still active and valid for trigger events D02 and D03.</p>
</div>
<div class="paragraph">
<p>2) A segment MAY be removed immediately provided no message references it in the standard.</p>
</div>
<div class="paragraph">
<p>3) A data type MAY be removed immediately provided no fields reference it. This occurs when the data type for a field is changed to a new data type that incorporates the components of the old one.</p>
</div>
<div class="paragraph">
<p>4) A table MAY be deprecated provided all fields and components, where the table has been used have been removed. This applies to HL7, user-defined and external tables. It is recognized that this might have a ripple effect.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>b) A message constituent, except as noted in points c, d and e below, will be withdrawn and removed, no sooner than, after 2 versions in a deprecated state. For example, if a message was originally deprecated in v 2.3.1, its definition can be removed when v 2.6 is published.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) A message type and its definition MAY be removed.</p>
</div>
<div class="paragraph">
<p>2) A trigger event and its definition MAY be removed.</p>
</div>
<div class="paragraph">
<p>3) A segment group in an existing message MAY be removed.</p>
</div>
<div class="paragraph">
<p>4) A segment in an existing message MAY be removed.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>c) A deprecated field in an existing segment SHALL NOT be removed from the standard. However, no sooner than, after 2 versions in a deprecated state, the field will be marked as withdrawn and all explanatory narrative will be removed</p>
</div>
<div class="paragraph">
<p>d) A deprecated component in an existing data type SHALL NOT be removed from the standard. However, no sooner than, after 2 versions in a deprecated state, the component will be marked as withdrawn and all explanatory narrative will be removed.</p>
</div>
<div class="paragraph">
<p>e) A deprecated member of an existing HL7 table SHALL NOT be removed from the standard. However, no sooner than, after 2 versions in a deprecated state, the table member will be marked as withdrawn and all explanatory narrative will be removed from the description and comment column.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_7_5_early_adoption_of_hl7_changes">2.7.5 Early adoption of HL7 changes</h3>
<div class="paragraph">
<p>Early adoption of HL7 changes that have been approved by the technical committee for the next membership ballot is a common practice and is not prohibited, but carries risk. Such changes MAY be rejected or modified in the balloting process. One example is that the change might pass but MAY be positioned differently in the segment or data type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_7_6_technical_correction_rules">2.7.6 Technical correction rules</h3>
<div class="paragraph">
<p>Technical corrections MAY be applied between versions on a case-by-case basis. These corrections SHALL be published on the HL7 website. The following meet criteria for technical correction:</p>
</div>
<div class="paragraph">
<p>a) Spelling correction</p>
</div>
<div class="paragraph">
<p>b) Incorrect section reference</p>
</div>
<div class="paragraph">
<p>c) Transcription error in an imported external table</p>
</div>
<div class="paragraph">
<p>d) Correction of an inconsistency between a segment attribute table and the field narrative</p>
</div>
<div class="paragraph">
<p>e) Erroneous examples</p>
</div>
<div class="paragraph">
<p>f) Erroneous/misleading descriptions</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_8_message_processing_rules">2.8 Message Processing Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The processing rules described here apply to all exchanges of messages, whether or not the HL7 encoding rules or Lower Layer Protocols are used. They represent the primary message processing mode. The user MAY use either the original processing rules, described in section <em>2.8.2</em>, "<em>Message response using the original processing rules</em>", or -the enhanced processing rules, described in section <em>2.8.3</em>, "<em>Response using enhanced acknowledgment</em>" . The original mode and the enhanced mode serve different purposes.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The MCF – Delayed Acknowledgment message has been removed from the standard. It was deprecated in v 2.2. Accordingly, the narrative notes regarding deferred processing have been removed from this section.</p>
</div>
<div class="paragraph">
<p>Certain variants exist and are documented elsewhere:</p>
</div>
<div class="paragraph">
<p>a) an optional sequence number protocol. Refer to section <em>2.9.1</em>, "<em>Sequence number protocol</em>".</p>
</div>
<div class="paragraph">
<p>b) an optional protocol for continuing a very long message. Refer to section <em>2.9.2</em>, "<em>Continuation messages and segments</em>".</p>
</div>
<div class="paragraph">
<p>Because the protocol describes an exchange of messages, it is described in terms of two entities, the initiating and responding systems. Each is both a sender and receiver of messages. The initiating system sends first and then receives, while the responding system receives and then sends.</p>
</div>
<div class="paragraph">
<p>In overview this exchange proceeds as follows:</p>
</div>
<div class="paragraph">
<p>Message Exchange</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 46%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiator constructs an HL7 message from application data and sends it to the responding system</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Responder receives message and processes it based on rules</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The rules differ based on whether the original acknowledge mode or the enhanced acknowledgment mode is followed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Responder sends response message</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiator processes response message</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_2_8_1_message_initiation">2.8.1 Message initiation</h3>
<div class="paragraph">
<p>The initiating application creates a message with data values as defined in the appropriate chapter of this Standard. The fields shown below SHOULD be valued in the MSH segment (as defined under the MSH segment definition of this chapter). The message is encoded according to the applicable rules and sent to the lower level protocols, which will attempt to deliver it to the responding application. (For definitions of the MSH fields see Section <em>2.13.9</em>, "<em>MSH ‑ Message Header segment</em>")</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 69%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-3-sending application</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-4-sending facility</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-5-receiving application</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-6-receiving facility</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-7-date/time of message</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-9-message type</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-10-message control ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier used to relate the response to the initial message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-11-processing ID</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-12-version ID</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-13-sequence number</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-14-continuation pointer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used in implementation of message continuation protocol. See Section <em>2.9.2</em>, "<em>Continuation messages and segments</em>". Also see chapter 5, "Queries".</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Certain other fields in the MSH segment are required for the operation of the HL7 encoding rules; they will not be relevant if other encoding rules are employed.</p>
</div>
<div class="paragraph">
<p>The event code in the second component of link:#_MSH-9<em>_Message Type  (MSG)   00009[MSH-9 Message Type] is redundantly shown elsewhere in some messages. For example, the same information is in the EVN segment of the ADT message. This is for compatibility with prior versions of the HL7 protocol. Newly defined messages SHOULD only show the event code in link:#_MSH-9</em>_Message Type  (MSG)   00009[MSH-9 Message Type].</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_8_2_message_response_using_the_original_processing_rules">2.8.2 Message response using the original processing rules</h3>
<div class="sect3">
<h4 id="_2_8_2_0_accept_and_validate_the_message_in_responding_system">2.8.2.0 Accept and validate the message in responding system</h4>
<div class="paragraph">
<p>Upon receipt of the message, when the Original Acknowledgment rules are used, the protocol software in the responding system validates it against at least the following criteria:</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: Both MSH-15 - accept acknowledgment type and MSH-16 - application acknowledgment type are not present.</p>
</div>
<div class="paragraph">
<p>a) the value in link:#_MSH-9___Message Type  (MSG)   00009[MSH-9 Message Type] is one that is acceptable to the receiver.</p>
</div>
<div class="paragraph">
<p>b) the value in link:#_MSH-12___Version ID  (VID)   00012[MSH-12 Version ID] is acceptable to the receiver.</p>
</div>
<div class="paragraph">
<p>c) the value in link:#_MSH-11___Processing ID  (PT)   0001[MSH-11 Processing ID] is appropriate for the application process handling the message.</p>
</div>
<div class="paragraph">
<p>If any of these edits fail, the protocol software rejects the message. That is, it creates an ACK message with <strong>AR</strong> in link:#_MSA-1___Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code].</p>
</div>
<div class="paragraph">
<p><strong>Note: If the Acknowledgment Code is other than AA, the reason(s) for the rejection SHOULD be sent in the ERR segment(s) to notify the sender of the exact problem.</strong></p>
</div>
<div class="paragraph">
<p>If successful, the process moves to the next step.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_8_2_1_accept_and_validateprocess_the_message_in_the_receiving_application">2.8.2.1 Accept and validate/process the message in the receiving application</h4>
<div class="paragraph">
<p>Upon successful validation by the responding system, the message is passed to the receiving application, which performs one of these functions:</p>
</div>
<div class="paragraph">
<p>a) process the message successfully, generating the functional response message with a value of <strong>AA</strong> in link:#_MSA-1___Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code].</p>
</div>
<div class="paragraph">
<p>b) send an error response, providing error information in functional segments to be included in the response message with a value of <strong>AE</strong> in link:#_MSA-1___Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code].</p>
</div>
<div class="paragraph">
<p>c) fail to process (reject) the message for reasons unrelated to its content or format (system down, internal error, etc.). For most such problems it is likely that the responding system will be able to accept the same message at a later time. The implementers must decide on an application-specific basis whether the message SHOULD be automatically sent again. The response message contains a value of <strong>AR</strong> in link:#_MSA-1___Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code].</p>
</div>
<div class="paragraph">
<p>The MSH segment in the response is constructed anew following the rules used to create the initial message described above. In particular, link:#_MSH-7<em>_Date/Time Of Message  (DTM)[MSH-7 Date/Time of Message] and link:#_MSH-10</em>_Message Control ID  (ST)  [MSH-10 Message Control ID] refer to the response message; they are not echoes of the fields in the initial message. link:#_MSH-5<em>_Receiving Application  (HD)[MSH-5 Receiving Application], link:#_MSH-6</em>_Receiving Facility  (HD)   [MSH-6 Receiving Facility], and link:#_MSH-11<em>_Processing ID  (PT)   0001[MSH-11 Processing ID] contain codes that are copied from link:#_MSH-3</em>_Sending Application  (HD)  [MSH-3 Sending Application], link:#_MSH-4<em>_Sending Facility  (HD)   00[MSH-4 Sending Facility] and link:#_MSH-11</em>_Processing ID  (PT)   0001[MSH-11 Processing ID] in the initiating message.</p>
</div>
<div class="paragraph">
<p>In all the responses described above, the following values are put in the MSA segment. Note that the field definitions for the MSA segment fields are in Section <em>2.13.8</em>, "<em>MSA ‑ Message Acknowledgment segment</em>".</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 36%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-1-acknowledgment code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As described above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-2-message control ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-10-message control ID from MSH segment of incoming message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-4-expected sequence number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As described in Section <em>2.9.1</em>, "<em>Sequence number protocol</em>," (if the sequence number protocol is being used).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERR segment fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refer to section 2.13.5 <a href="#err-error-segment">ERR - error segment</a>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The receiving application then passes the response message back to the responding system for the next step in the process.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_8_2_2_transmit_the_response_message">2.8.2.2 Transmit the response message</h4>
<div class="paragraph">
<p>Upon receiving the response message from the receiving application, the responding system transmits it to the initiating system.</p>
</div>
<div class="paragraph">
<p>The initiator processes the response message.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_8_2_3_original_mode_flow_chart">2.8.2.3 Original Mode flow chart</h4>
<div class="paragraph">
<p><span class="image"><img src="extracted-media/media/image3.png" alt="extracted-media/media/image3" width="624" height="595"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_8_3_response_using_enhanced_acknowledgment">2.8.3 Response using enhanced acknowledgment</h3>
<div class="paragraph">
<p>a) the responding system receives the message and commits it to safe storage. This means that the responding system accepts the responsibility for the message in a manner that releases the sending system from any obligation to resend the message. The responding system now checks the message header record to determine whether or not the initiating system requires an accept acknowledgment message indicating successful receipt and secure storage of the message. If it does, the accept acknowledgment message is constructed and returned to the initiator.</p>
</div>
<div class="paragraph">
<p>b) at this point, the requirements of the applications involved in the interface determine whether or not more information needs to be exchanged. This exchange is referred to as an application acknowledgment and includes information ranging from simple validation to a complex application-dependent response. If the receiving system is expected to return application-dependent information, it initiates another exchange when this information is available. This time, the roles of initiator and responder are reversed.</p>
</div>
<div class="sect3">
<h4 id="_2_8_3_0_accept_and_validate_the_message_in_responding_system">2.8.3.0 Accept and validate the message in responding system</h4>
<div class="paragraph">
<p>Upon receipt of the message, , the protocol software in the responding system makes an initial determination as to whether or not the message can be accepted, based on factors such as:</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Both MSH-15-accept acknowledgment type and MSH-16-application acknowledgment type SHALL BE valued.</p>
</div>
<div class="paragraph">
<p>a) the status of the interface</p>
</div>
<div class="paragraph">
<p>b) the availability of safe storage onto which the message can be saved</p>
</div>
<div class="paragraph">
<p>c) the syntactical correctness of the message, if the design of the receiving system includes this type of validation at this phase</p>
</div>
<div class="paragraph">
<p>d) the values of link:#_MSH-9<em>_Message Type  (MSG)   00009[MSH-9 Message Type], <a href="#msh-12-version-id-vid-00012">MSH-12 Version ID</a>, and link:#_MSH-11</em>_Processing ID  (PT)   0001[MSH-11 Processing ID], if the design of the receiving system includes this type of validation at this phase</p>
</div>
<div class="paragraph">
<p>It then examines the Message Header segment (MSH) to determine whether or not the initiating system requires an accept acknowledgment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_8_3_1_transmit_general_acknowledgment_message">2.8.3.1 Transmit general acknowledgment message</h4>
<div class="paragraph">
<p>A general acknowledgment message is not always required by the initiating system, but if it is the responding system sends one of the following:</p>
</div>
<div class="paragraph">
<p>a) a commit accept (CA) in link:#_MSA-1___Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code] if the message can be accepted for processing</p>
</div>
<div class="paragraph">
<p>b) a commit reject (CR) in link:#_MSA-1<em>_Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code] if the one of the values of link:#_MSH-9</em>_Message Type  (MSG)   00009[MSH-9 Message Type], <a href="#msh-12-version-id-vid-00012">MSH-12 Version ID</a> or link:#_MSH-11___Processing ID  (PT)   0001[MSH-11 Processing ID] is not acceptable to the receiving application</p>
</div>
<div class="paragraph">
<p>c) a commit error (CE) in link:#_MSA-1___Acknowledgment Code  (ID)  [MSA-1 Acknowledgment Code] if the message cannot be accepted for any other reason (e.g., sequence number error)</p>
</div>
<div class="paragraph">
<p><strong>Note: If the Acknowledgment Code is other than CA, the reason(s) for the rejection SHOULD be sent in the ERR segment(s) to notify the sender of the exact problem.</strong></p>
</div>
<div class="paragraph">
<p>The MSH segment in the response is constructed anew following the rules used to create the initial message described above. In particular, link:#_MSH-7<em>_Date/Time Of Message  (DTM)[MSH-7 Date/Time of Message] and link:#_MSH-10</em>_Message Control ID  (ST)  [MSH-10 Message Control ID] refer to the response message; they are not echoes of the fields in the initial message. link:#_MSH-5<em>_Receiving Application  (HD)[MSH-5 Receiving Application], link:#_MSH-6</em>_Receiving Facility  (HD)   [MSH-6 Receiving Facility], and link:#_MSH-11<em>_Processing ID  (PT)   0001[MSH-11 Processing ID] contain codes that are copied from link:#_MSH-3</em>_Sending Application  (HD)  [MSH-3 Sending Application], link:#_MSH-4<em>_Sending Facility  (HD)   00[MSH-4 Sending Facility] and link:#_MSH-11</em>_Processing ID  (PT)   0001[MSH-11 Processing ID] in the initiating message.</p>
</div>
<div class="paragraph">
<p>For this response, the following values are put in the MSA segment. Note that the field definitions for the MSA segment fields are in Section <em>2.13.8</em>, '<em>MSA ‑ Message Acknowledgment segment</em>":</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-2-message control ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-10-message control ID from the incoming message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-1-acknowledgment code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As described above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-4-expected sequence number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As described in Section <em>2.9.1</em>, "<em>Sequence number protocol</em>" (if the sequence number protocol is being used).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERR segment fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refer to section 2.13.5 <a href="#err-error-segment">ERR - error segment</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Note</strong>: MSH-15-accept acknowledgment type and MSH-16-application acknowledgment type are not valued (i.e. not present or empty). At this point, the accept portion of this message exchange is considered complete.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_8_3_2_transmit_application_acknowledgment">2.8.3.2 Transmit application acknowledgment</h4>
<div class="paragraph">
<p>If the message header segment indicates that the initiating system also requires an application acknowledgment, this SHALL be returned as the initial message of a later exchange.</p>
</div>
<div class="paragraph">
<p>For this message, the receiving system acts as the initiator. Since the message it sends is application‑specific, the layouts of these application-level response messages are defined in the relevant application-specific chapter. If needed, this application acknowledgment message can itself require (in link:#_MSH-15<em>_Accept Acknowledgment Type[MSH-15 Accept Acknowledgment Type]) an accept acknowledgment message (MSA). link:#_MSH-16</em>_Application Acknowledgment[MSH-16 Application Acknowledgment Type], however, is always NE(Never), since the protocol does not allow the application acknowledgment message to have an application acknowledgment.</p>
</div>
<div class="paragraph">
<p>For this response, the following values are put in the MSA segment. Note that the field definitions for the MSA segment fields are in Section <em>2.13.8</em>, "<em>MSA ‑ Message Acknowledgment segment</em>".</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-2-message control ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies the initial message from the original initiating system as defined in Section <em>2.8.1</em>, "<em>Message initiation</em>".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-1-acknowledgment code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uses the application (processing) acknowledgment codes as described in Section <em>2.13.8.1</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA-3-text message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text description of error.q</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERR segment fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refer to section <a href="#err-error-segment">ERR - error segment</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>At this point, the application acknowledgment portion of this message exchange is considered complete.</p>
</div>
<div class="paragraph">
<p>If the processing on the receiving system goes through multiple stages, chapter-defined messages MAY be used to relay status or informational changes to other systems (including the original initiating system). Such messages are not part of the acknowledgment scheme for the original message, but are considered to be independent messages triggered by events on the (original) responding system.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: There is no equivalent to the V2.1 original acknowledgment protocol, where the acknowledgment is always sent as a response on the same communications channel. The enhanced acknowledgment protocol with MSH-15 (accept acknowledgment type) = NE and MSH-16 (application acknowledgment type) = AL still requires that the application acknowledgment is sent on a separate communications channel.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_8_3_3_enhanced_acknowledgment_flow_chart">2.8.3.3 <span class="image"><img src="extracted-media/media/image4.png" alt="extracted-media/media/image4" width="624" height="677"></span>Enhanced acknowledgment flow chart</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_9_special_hl7_protocols">2.9 Special HL7 Protocols</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains several extensions to the basic HL7 message protocol. These extensions represent implementation choices, and are to be used on a site-specific and application-specific basis as needed.</p>
</div>
<div class="sect2">
<h3 id="_2_9_1_sequence_number_protocol">2.9.1 Sequence number protocol</h3>
<div class="paragraph">
<p>For certain types of data transactions between systems the issue of keeping databases synchronized is critical. An example is an ancillary system such as lab, which needs to know the locations of all inpatients to route stat results correctly. If the lab receives an ADT transaction out of sequence, the census/location information could be incorrect. Although it is true that a simple one-to-one acknowledgment scheme can prevent out-of-sequence transactions between any two systems, only the use of sequence numbers can prevent duplicate transactions.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: Although this sequence number protocol is limited to the use of sequence numbers on a single transaction stream between two applications, this sequencing protocol is sufficiently robust to allow the design of HL7-compatible store-and-forward applications.</p>
</div>
<div class="paragraph">
<p>a) initial conditions:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) the system receiving the data stream is expected to store the sequence number of the most recently accepted transaction in a secure fashion before acknowledging that transaction. This stored sequence number allows comparison with the next transaction&#8217;s sequence number, and the implementation of fault-tolerant restart capabilities.</p>
</div>
<div class="paragraph">
<p>2) the initiating system keeps a queue of outgoing transactions indexed by the sequence number. The length of this queue must be negotiated as part of the design process for a given link. The minimum length for this queue is one.</p>
</div>
<div class="paragraph">
<p>3) the sequence number is a positive (non-zero) integer; and it is incremented by one (by the initiating system) for each successive transaction.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>b) starting the link:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) the value of 0 (zero) for a sequence number is reserved: it is allowed only when the initiating system (re-)starts the link.</p>
</div>
<div class="paragraph">
<p>2) if the receiving system gets a transaction with a 0 (zero) in the sequence number field, it SHOULD respond with a general acknowledgment message whose MSA contains a sequence number one greater than the sequence number of the last transaction it accepted in the Expected Sequence Number field. If this value does not exist (as on the first startup of a given link), the MSA SHOULD contain a sequence number of -1, meaning that the receiving system will use the positive, non-zero sequence number of the first transaction it accepts as its initial sequence number (see re-synching the link, item e below).</p>
</div>
<div class="paragraph">
<p>3) the initiating system then sends the transaction indexed by the expected sequence number (if that expected transaction is still on its queue). Otherwise the link is frozen until an operator intervenes.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>c) normal operation of the link:</p>
</div>
<div class="paragraph">
<p>As it accepts each transaction, the receiving system securely stores the sequence number (which agrees with its expected sequence number), and then acknowledges the message by echoing the sequence number in link:#_MSA-4___Expected Sequence Number  ([MSA-4 Expected Sequence Number].</p>
</div>
<div class="paragraph">
<p>d) error conditions (from point of view of initiating system). These are generated by the receiving system, by its comparison of the sequence number sent out (with the MSH in link:#_MSH-13<em>_Sequence Number  (NM)   00[MSH-13 Sequence Number]) with the expected sequence number (link:#_MSA-4</em>_Expected Sequence Number  ([MSA-4 Expected Sequence Number] received with the MSA).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) expected sequence number is one greater than current value. The previous acknowledgment was lost. That transaction was sent again. Correct by sending next transaction.</p>
</div>
<div class="paragraph">
<p>2) expected sequence number less than current value. Initiating system can try starting again by issuing a transaction with a sequence number of zero; or freeze the link for operator intervention.</p>
</div>
<div class="paragraph">
<p>3) other errors: freeze the link for operator intervention</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>e) forcing resynchronization of sequence numbers across the link. The value of -1 for a sequence number is reserved: it is allowed only when the initiating system is re-synchronizing the link. Thus if the receiving system gets a value of -1 in the sequence number field, it SHOULD return a general acknowledgment message with a -1 in the expected sequence number field. The receiving system then resets its sequence number, using the non-zero positive sequence number of the next transaction it accepts.</p>
</div>
<div class="paragraph">
<p><strong>Note: When the initiating system sends a message with a sequence number of 0 or -1 (see b or e above), the segments beyond the MSH need not be present in the message, or, if present, all fields MAY be empty or unpopulated. In terms of the responding system, for these two cases, only a General acknowledgment message is needed.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_2_continuation_messages_and_segments">2.9.2 Continuation messages and segments</h3>
<div class="paragraph">
<p>Sometimes, implementation limitations require that large messages or segments be broken into manageable chunks. We use the term "fragmentation" to describe how a logical message is broken into one or more separate HL7 messages. HL7 consciously identifies two situations where this MAY happen.</p>
</div>
<div class="paragraph">
<p>First, a single segment mightbe too large. HL7 uses the "ADD" segment to handle breaking a single segment into several smaller segments.</p>
</div>
<div class="paragraph">
<p>Second, a single HL7 message might be too large. HL7 uses the DSC segment and the continuation protocol to handle message fragmentation.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: HL7 does not define what "too large" means. Acceptable values are subject to site negotiations.</p>
</div>
<div class="paragraph">
<p>See chapter 5 for a discussion of the continuation pointer segment and the continuation pointer field, and their use in the continuation of responses to queries and in the continuation of unsolicited update messages.</p>
</div>
<div class="sect3">
<h4 id="_2_9_2_0_segment_fragmentationcontinuation_using_the_add_segment">2.9.2.0 Segment fragmentation/continuation using the ADD segment</h4>
<div class="paragraph">
<p>Beginning with version 2.4, the ADD segment can be used <span class="underline">within</span> a message to break a long segment into shorter segments within a single HL7 message.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Unless some explicit agreement exists between systems, a receiving application SHOULD NOT infer semantic meaning from the placement of the ADD segment.</p>
</div>
<div class="paragraph">
<p>To break a large segment,</p>
</div>
<div class="paragraph">
<p>a) the segment being continued (call it ANY for this example) is ended at an arbitrary character position and terminated with the standard segment terminator (carriage return).</p>
</div>
<div class="paragraph">
<p>b) the following segment is the ADD segment. All characters after the ADD and field separator ("|") are logically part of the preceding segment. All succeeding consecutive ADD segments contribute characters to the ANY segment until a non ADD segment is found.</p>
</div>
<div class="paragraph">
<p>c) an ADD segment with no field separator takes on special meaning. See Section <a href="#segment-fragmentation-across-messages"><em>2.10.2.3</em></a>, "<a href="#segment-fragmentation-across-messages"><em>Segment fragmentation across messages</em></a>".</p>
</div>
<div class="paragraph">
<p>For example, segment "C" can be fragmented within an HL7 message as follows:</p>
</div>
<div class="paragraph">
<p>A|1</p>
</div>
<div class="paragraph">
<p>B|2</p>
</div>
<div class="paragraph">
<p>C|34</p>
</div>
<div class="paragraph">
<p>ADD|5|678|</p>
</div>
<div class="paragraph">
<p>ADD|90</p>
</div>
<div class="paragraph">
<p>D|1</p>
</div>
<div class="paragraph">
<p>This is logically the same as</p>
</div>
<div class="paragraph">
<p>A|1</p>
</div>
<div class="paragraph">
<p>B|2</p>
</div>
<div class="paragraph">
<p>C|345|678|90</p>
</div>
<div class="paragraph">
<p>D|1</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_9_2_1_segment_fragmentationcontinuation_using_the_dsc_segment">2.9.2.1 Segment fragmentation/continuation using the DSC segment</h4>
<div class="paragraph">
<p>When a message itself must be fragmented and sent as several HL7 messages, the DSC segment is used.</p>
</div>
<div class="paragraph">
<p>a) First, the logical message is broken after an arbitrary segment.</p>
</div>
<div class="paragraph">
<p>b) Next, a DSC segment is sent. The link:#_DSC-1___Continuation Pointer (ST)  [DSC-1 Continuation Pointer] field will contain a unique value that is used to match a subsequent message with this specific value.</p>
</div>
<div class="paragraph">
<p>c) The DSC terminates the first fragment of the logical message.</p>
</div>
<div class="paragraph">
<p>d) A subsequent message will contain in link:#_MSH-14<em>_Continuation Pointer  (ST)[MSH-14 Continuation Pointer], a value that matches the value from DSC-1. (The presence of a value in MSH-14 indicates that the message is a fragment of an earlier message.). Each subsequent message will have its own unique value for link:#_MSH-10</em>_Message Control ID  (ST)  [MSH-10 Message Control ID]. Coordination between link:#_DSC-1<em>_Continuation Pointer (ST)  [DSC-1 Continuation Pointer] and the subsequent message&#8217;s link:#_MSH-14</em>_Continuation Pointer  (ST)[MSH-14 Continuation Pointer] is used to link the fragments in their proper order.</p>
</div>
<div class="paragraph">
<p>e) The logical message is the concatenation of the contents of the first message (which while having no value in MSH-14, did end with DSC, and hence was actually a message fragment), plus all subsequent fragments (as identified by values in MSH-14).</p>
</div>
<div class="paragraph">
<p>f) If enhanced mode acknowledgments are used to request an accept ACK, then the receiver will acknowledge each fragment with an ACK message. Since each fragment has its own Message Control ID, each fragment level accept ACK will use the Message Control ID from the fragment it is acknowledging.</p>
</div>
<div class="paragraph">
<p>g) If enhanced mode acknowledgments are used to request an application level ACK, then the receiver will send an acknowledgment after receiving the final fragment.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The application level ACK SHOULD refer to the message by the Message Control ID of the first fragment.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The receiver can tell that a given incoming message is a fragment by the presence of the trailing DSC. Subsequent HL7 messages are identified as fragments by the presence of an MSH-14 value. The presence of a DSC in a fragment indicates that more fragments are to follow.</p>
</div>
<div class="paragraph">
<p>It is a protocol error to end a message with DSC, and then never send a fragment.</p>
</div>
<div class="paragraph">
<p>For example, a single logical message MAY be fragmented into three HL7 messages:</p>
</div>
<div class="paragraph">
<p>---- Sender HL7 message (incomplete,fragment1)---</p>
</div>
<div class="paragraph">
<p>MSH|||||||||1001||2.4|123||..</p>
</div>
<div class="paragraph">
<p>A|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>B|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>DSC|W4xy</p>
</div>
<div class="paragraph">
<p>---- Sender HL7 message (fragment 2)---</p>
</div>
<div class="paragraph">
<p>MSH|||||||||2106||2.4|124|W4xy|</p>
</div>
<div class="paragraph">
<p>C|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>D|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>DSC|V292</p>
</div>
<div class="paragraph">
<p>----- another HL7 message(fragment 3, final)---</p>
</div>
<div class="paragraph">
<p>MSH|||||||||2401||2.4|125|V292</p>
</div>
<div class="paragraph">
<p>E|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Such a sequence is logically the same as the single message:</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|2.4|123||..</p>
</div>
<div class="paragraph">
<p>A|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>B|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>C|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>D|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>E|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>See example in section <strong><em>Error! Reference source not found.</em></strong> for a more elaborate example.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_9_2_2_segment_fragmentation_across_messages">2.9.2.2 Segment fragmentation across messages</h4>
<div class="paragraph">
<p>If the last segment of a fragment itself needs to be broken, then the following idiomatic use of ADD SHALL apply.</p>
</div>
<div class="paragraph">
<p>a) the segment being continued (call it ANY for this example) is ended at an arbitrary character position and terminated with the standard segment terminator (carriage return).</p>
</div>
<div class="paragraph">
<p>b) the following segment is the ADD segment. It will contain no characters other than "ADD". (The lack of characters signals the receiver that ANY will be continued.)</p>
</div>
<div class="paragraph">
<p>c) The second following segment will be the DSC, used as described above in Section <em>2.9.2.1</em>, "<em>Segment fragmentation/continuation using the DSC segment</em>".</p>
</div>
<div class="paragraph">
<p>d) The first segment of the following fragment will be an ADD segment. The characters of this ADD segment are logically part of the ANY segment of the previous fragment.</p>
</div>
<div class="paragraph">
<p>For example</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|2.4|</p>
</div>
<div class="paragraph">
<p>ANY|12</p>
</div>
<div class="paragraph">
<p>ADD</p>
</div>
<div class="paragraph">
<p>DSC|JR97</p>
</div>
<div class="paragraph">
<p>--------- (fragment 2)</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|2.4|JR97</p>
</div>
<div class="paragraph">
<p>ADD|345</p>
</div>
<div class="paragraph">
<p>is logically the same as</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|2.4</p>
</div>
<div class="paragraph">
<p>ANY|12345</p>
</div>
<div class="paragraph">
<p>e) transaction flow for a continued unsolicited message with a continued segment.</p>
</div>
<div class="paragraph">
<p>First unsolicited message and acknowledgment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 29%;">
<col style="width: 71%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">URD</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ URS ]</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{DSP}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(last DSP is incomplete)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(contains no fields)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Continuation segment)</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 29%;">
<col style="width: 71%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(General acknowledgment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ ERR } ]</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Second unsolicited message and acknowledgment:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 29%;">
<col style="width: 71%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(contains continuation pointer from DSC segment of prior message)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(contains remainder of data from continued DSP segment from prior message)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{DSP}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Note</strong>: This second message could itself be continued with a second DSC and (if needed) a second ADD segment prior to it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(General acknowledgment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ SFT } ]</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{ ERR } ]</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_3_hl7_batch_protocol">2.9.3 HL7 batch protocol</h3>
<div class="paragraph">
<p>There are instances when it is convenient to transfer a batch of HL7 messages. Common examples would be a batch of financial posting detail transactions (DFT&#8217;s) sent from an ancillary to a financial system. Such a batch could be sent online using a common file transfer protocol, or offline via tape or diskette.</p>
</div>
<div class="sect3">
<h4 id="_2_9_3_1_hl7_batch_file_structure">2.9.3.1 HL7 batch file structure</h4>
<div class="paragraph">
<p>The structure of an HL7 batch file is given by the following (using the HL7 abstract message syntax)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[FHS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(file header segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ARV}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Restrictions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- BATCH begin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[BHS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(batch header segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ARV}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access Restrictions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ [</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- MESSAGE begin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(zero or more HL7 messages)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">] }</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- MESSAGE end</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[BTS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(batch trailer segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--- Batch end</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[FTS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(file trailer segment)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="paragraph">
<p>The sequence numbering protocol has a natural application in batch transfers. See the discussion of batch acknowledgments that follows.</p>
</div>
<div class="paragraph">
<p>Although a batch will usually consist of a single type of message, there is nothing in the definition that restricts a batch to only one message type.</p>
</div>
<div class="paragraph">
<p>The HL7 file and batch header and trailer segments are defined in exactly the same manner as the HL7 message segments. Hence the HL7 message construction rules of Sections <em>2.4.5</em> and <em>2.5</em>, can be used to encode and decode HL7 batch files.</p>
</div>
<div class="paragraph">
<p>There are only two cases in which an HL7 batch file MAY contain zero HL7 messages:</p>
</div>
<div class="paragraph">
<p>a) a batch containing zero HL7 messages MAY be sent to meet a requirement for periodic submission of batches when there are no messages to send.</p>
</div>
<div class="paragraph">
<p>b) a batch containing zero negative acknowledgment messages MAY be sent to indicate that all the HL7 messages contained in the batch being acknowledged are implicitly acknowledged. See Section <em>2.9.3.3</em>, "<em>Acknowledging batches</em>."</p>
</div>
<div class="paragraph">
<p>To better understand, why security labels MAY be applicable to batch files, we provide the following use case:</p>
</div>
<div class="paragraph">
<p>Some HIEs (likely a majority of US HIEs) push ADTs to HIE participants authorized to receive these under HIPAA. Some consider payers to be authorized to receive ADTs under HIPAA (despite the fact that ADTs are for treatment purposes and should likely only be going to providers.)</p>
</div>
<div class="paragraph">
<p>If 1..<strong>of the ADTs included in 1..</strong> BSH within a FSH contains an ADT with security label indicating that this information is not to be disclosed to payer X based on patient right under HIPAA to restrict because the patient paid for services in full out of pocket, then the HIE SHOULD NOT automatically send the entire FSH to the payers it would otherwise send it to,</p>
</div>
<div class="paragraph">
<p>The HIE would need to parse the FSH to find the 1..* BSH with security label = do not disclose to payer X. It could then send any of the other BSH on to payers as usual.</p>
</div>
<div class="paragraph">
<p>It would then parse the 1..* BSH with security label = do not disclose to payer X to find the 1..*MSH with the security label = do not disclose to payer X, and then send those MSH to the payers besides payer X.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_9_3_2_related_segments_and_data_usage">2.9.3.2 Related segments and data usage</h4>
<div class="paragraph">
<p>The following segments relate to the HL7 Batch Protocol:</p>
</div>
<div class="paragraph">
<p>BHS Batch Header (See section <em>2.13.2</em>)</p>
</div>
<div class="paragraph">
<p>BTS Batch Trailer (See section <em>2.13.3</em>)</p>
</div>
<div class="paragraph">
<p>FHS File Header (See section <em>2.13.6</em>)</p>
</div>
<div class="paragraph">
<p>FTS File Trailer (See section <em>2.13.7</em>)</p>
</div>
<div class="paragraph">
<p>The BTS segment contains a field, link:#_BTS-3___Batch Totals  (NM)   00095[BTS-3 Batch Totals], which MAY have one or more totals drawn from fields within the individual messages. The method for computing such totals will be determined on a site or application basis unless explicitly stated in a functional chapter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_9_3_3_acknowledging_batches">2.9.3.3 Acknowledging batches</h4>
<div class="paragraph">
<p>In general, the utility of sending batches of data is that the data is accepted all at once, with errors processed on an exception basis. However, it is a permissible application of HL7 to acknowledge all messages. Several options for acknowledgment are given and will be chosen on an application basis. In these cases, the sequence numbering protocol can be useful to the applications processing the batch.</p>
</div>
<div class="paragraph">
<p>The options are:</p>
</div>
<div class="paragraph">
<p>a) all messages are acknowledged in the response batch.</p>
</div>
<div class="paragraph">
<p>b) the receiving system prints some form of batch control report, which is then dealt with manually by personnel at the sending system. No acknowledgments are performed by the protocol software.</p>
</div>
<div class="paragraph">
<p>c) an automated acknowledgment batch is created containing acknowledgment messages only for those messages containing errors. In this mode an empty acknowledgment batch MAY be created (i.e., an HL7 batch file without any HL7 acknowledgment messages).</p>
</div>
<div class="paragraph">
<p>In each case where there is a response batch, its format is a batch of individual messages. Each individual message is in the format defined for an online response in the chapters. Consider, for example, a batch that might be constructed to respond to a batch of Detailed Financial Transactions (Chapter 6). The messages in the response batch would consist entirely of ACK messages, since ACK is the response shown in Chapter 6.</p>
</div>
<div class="paragraph">
<p>When batches are retransmitted after the correction of errors, link:#_BHS-12___Reference Batch Control ID[BHS-12 Reference Batch Control ID] SHOULD contain the batch control ID of the original batch.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_9_3_4_batch_message_as_a_query_response">2.9.3.4 Batch message as a query response</h4>
<div class="paragraph">
<p><strong>Note:</strong> The QRD and QRF segments were retained for backward compatibility only as of v 2.4. The reader is referred to chapter 5, section 5.4, for the current query/response message structure.</p>
</div>
<div class="paragraph">
<p>The HL7 query also can be used to query for a batch in the following manner:</p>
</div>
<div class="paragraph">
<p>a) use the B in ResponseModality field of the RCP segment. The query will be acknowledged with a general acknowledgment as in the Deferred Access example above (see chapter 5)</p>
</div>
<div class="paragraph">
<p>b) in addition, insert into the batch file the QRD and QRF segments as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[FHS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(file header segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ [BHS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(batch header segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[QPD]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(the QRD and QRF define the</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RCP]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query that this batch is a response to)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{ MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(one or more HL7 messages)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[BTS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(batch trailer segment)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[FTS]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(file trailer segment)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>c) the acknowledgment of a batch is described in this chapter (see Section <em>2.9.3.3</em>, "<em>Acknowledging batches</em>").</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_4_protocol_for_interpreting_repeating_segments_or_segment_groups_in_an_update_message">2.9.4 Protocol for interpreting repeating segments or segment groups in an update Message</h3>
<div class="paragraph">
<p>This section describes the protocol for interpreting repeating segments or segment groups in an update message. Common examples of repeating segments are NK1 and OBX shown as [{NK1}] and [{OBX}] in the abstract message syntax. Common examples of segment groups are displayed as \{ORC RXO [{RXC}]} or [\{IN1 [IN2] [{IN3}]}] in the abstract message syntax</p>
</div>
<div class="paragraph">
<p>There are 2 methods of update: the "snapshot" and the "action code/unique identifier" modes. These are defined in sections 2.10.4.1 and 2.10.4.2 below.</p>
</div>
<div class="paragraph">
<p>If a particular repeating segment can be updated by either of these two modes, the parties concerned will determine by agreement among messaging partners whether an interface will use the "snapshot" mode or the "action code/unique identifier" mode.</p>
</div>
<div class="paragraph">
<p>Both the sender and receiver of the data must have predictable rules for how they will process the data in repeating segments or segment groups regardless of which mode is used. This SHOULD be documented in the Conformance Profile. It is critical to know, for instance, if the Sender is the System of Record.</p>
</div>
<div class="sect3">
<h4 id="_2_9_4_0_hiddentext">2.9.4.0 hiddentext</h4>

</div>
<div class="sect3">
<h4 id="_2_9_4_1_snapshot_mode_update_definition">2.9.4.1 Snapshot mode update definition</h4>
<div class="paragraph">
<p>For segments that do not contain unique identifiers and action codes (mainly NTE and patient administration segments), the only option is to treat the information in the repeating segments and segment groups as a whole.</p>
</div>
<div class="paragraph">
<p>When an HL7 abstract message syntax includes these repeating units or sets, there is no implicit indication of how they interact with a similar set in a prior or subsequent message. Interpretation is not obvious from the message syntax particularly if the requirement is to update only part of the information previously sent.</p>
</div>
<div class="paragraph">
<p>The existence of a segment, and possibly the lack of existence of a segment, might serve to add, update, replace, or delete information passed in similar segments in prior messages. Special consideration is warranted in the case where multiple instances of a segment exist in a message.</p>
</div>
<div class="paragraph">
<p>In the “snapshot” mode, a group of repeating segments from the incoming message replaces the prior group of repeating segments on the receiving system. This is equivalent to a deletion of the prior group followed by the addition of the new group.</p>
</div>
<div class="paragraph">
<p>To avoid confusion when all of the segments in a repeating group are to be deleted, one must send a single segment with “delete data” indicated for the first field (or all fields) of the segment to indicate that all information related to the segment is to be deleted.  In this scenario, snapshot mode provides for deleting the prior group of repeating segment data on the receiving system.  Otherwise, sending no segment(s) at all without such explicit indication could lead the receiver to assume nothing was changed, thus not sent.  I.e., if no segment is sent, this equates to "no information." No information SHOULD NOT signal the receiver to take an action, i.e. no action SHOULD be taken on any of the data related to the prior group of repeating segments.</p>
</div>
<div class="paragraph">
<p>Since messages MAY contain multiple, possibly nested, groups, it is critically important to understand the level at which group(s) are subject to snapshot mode, especially the delete functionality outlined above. For example, a results message MAY include results for multiple patients, or a charge batch MAY include charges for multiple patients. Whether snapshot, and especially delete, applies to all the patients in the entire message, all the order-observations within one patient, or all the observations within one order-observation group must be agreed to by the trading partners, or otherwise specified in a conformance profile and/or the section-specific chapters of the HL7 Standard.</p>
</div>
<div class="paragraph">
<p>To support assertions made in some chapters, e.g., chapter 6, and common practice at implementation sites, as of v2.6, the signal methods have been extended. By agreement among messaging partners or Conformance Profile, a sender might opt to signal deletion of data in the following manner:</p>
</div>
<div class="paragraph">
<p>Transmit the delete indicator only:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="ulist">
<ul>
<li>
<p>in the key identifier field if the segment has an explicit one – all other fields have no data</p>
</li>
<li>
<p>in the first field of the segment to indicate that all are to be deleted</p>
</li>
<li>
<p>in any combination of fields that the Sender customarily sends to the recipient - all other fields have no data</p>
</li>
<li>
<p>in all required fields all – all other fields have no data</p>
</li>
</ul>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This obviates the need for the Sender to populate fields ordinarily not sent and not expected by the receiver.</p>
</div>
<div class="sect4">
<h5 id="_2_9_4_1_1_snapshot_mode_and_repeating_segments_example">2.9.4.1.1 Snapshot Mode and Repeating Segments - Example</h5>
<div class="paragraph">
<p>Example A: if a patient record indicated a 2 sisters and a brother as next of kin, this would be represented as follows in the add person/patient information message:</p>
</div>
<div class="paragraph">
<p>MSH||||||||ADT<sup>A28</sup>ADT_A05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>NK1|1|Nuclear<sup>Nancy</sup>D|SIS<sup>Sister</sup>HL70063|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>NK1|2|Nuclear<sup>Nelda</sup>W|SIS<sup>Sister</sup>HL70063|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>NK1|3|Nuclear<sup>Neville</sup>S|BRO<sup>Brother</sup>HL70063|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>If, subsequently, the one of the sisters was delisted as next of kin, it would be necessary to send both the remaining "brother" and "sister" records in order to form a complete replacement set in an update person information message:</p>
</div>
<div class="paragraph">
<p>MSH|||||||||ADT<sup>A31</sup>ADT_A05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>NK1|1|Nuclear<sup>Nancy</sup>D|SIS<sup>Sister</sup>HL70063|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>NK1|2|Nuclear<sup>Neville</sup>S|BRO<sup>Brother</sup>HL70063|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>If all next of kin were to be subsequently delisted, an update message with a single delete indicator populated segment would instruct the receiving system to delete information represented by any prior set:</p>
</div>
<div class="paragraph">
<p>MSH||||||||ADT<sup>A31</sup>ADT_A05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>NK1|""|""|""|""|&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>Alternatively, as of v2.6, the deletion could be signaled by sending a delete indicatorin the first field of the NK1 segment. This is its only required field.</p>
</div>
<div class="paragraph">
<p>MSH||||||||ADT<sup>A31</sup>ADT_A05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>NK1|""|&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
</div>
<div class="sect4">
<h5 id="_2_9_4_1_2_snapshot_mode_and_repeating_segment_groups">2.9.4.1.2 Snapshot Mode and Repeating Segment Groups</h5>
<div class="paragraph">
<p>Treatment of the repeating segment group is analogous to the handling of the repeating segment described above. To indicate deletion of all of the information in a repeating segment group, it is only necessary to delete the anchoring segment of the segment group. This is accomplished just as described above for deleting a repeating segment. This pertains to segments governed by snapshot mode, not action code.</p>
</div>
<div class="paragraph">
<p>Example: An account is created for Adam Everyman. He is insured under plan ID A357 with an insurance company known to both systems as BCMD, with a company ID of 1234. He is also covered by his wife&#8217;s insurance under plan ID A789 with an insurance company known to both systems as VGMC, with a company ID of 6789.</p>
</div>
<div class="paragraph">
<p>MSH||||||||BAR<sup>P01</sup>BAR_P01|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|</p>
</div>
<div class="paragraph">
<p>PID|</p>
</div>
<div class="paragraph">
<p>IN1|1|A357|1234|BCMD</p>
</div>
<div class="paragraph">
<p>IN2|</p>
</div>
<div class="paragraph">
<p>IN3|</p>
</div>
<div class="paragraph">
<p>IN1|2|A789|6789|VGMC</p>
</div>
<div class="paragraph">
<p>IN2|</p>
</div>
<div class="paragraph">
<p>IN3|</p>
</div>
<div class="paragraph">
<p>Subsequently it is learned that his wife has changed insurance plans. Her new plan is now C45. The insurance company and company ID have remained the same. A BAR^P05 might be sent.</p>
</div>
<div class="paragraph">
<p>MSH||||||||BAR<sup>P05</sup>BAR_P05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|</p>
</div>
<div class="paragraph">
<p>PID|</p>
</div>
<div class="paragraph">
<p>IN1|1|A357|1234|BCMD</p>
</div>
<div class="paragraph">
<p>IN2|</p>
</div>
<div class="paragraph">
<p>IN3|</p>
</div>
<div class="paragraph">
<p>IN1|2|C45|6789|VGMC</p>
</div>
<div class="paragraph">
<p>IN2|</p>
</div>
<div class="paragraph">
<p>IN3|</p>
</div>
<div class="paragraph">
<p>It is later discovered that the patient is not covered by either plan and now has no insurance at all. A BAR^P05 is again sent. In accordance with chapter 6, this can be signaled by showing delete indicator in the plan field.</p>
</div>
<div class="paragraph">
<p>MSH||||||||BAR<sup>P05</sup>BAR_P05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|</p>
</div>
<div class="paragraph">
<p>PID|</p>
</div>
<div class="paragraph">
<p>IN1|""|""</p>
</div>
<div class="paragraph">
<p>If, on the other hand, the patient still had his coverage, and only the wife&#8217;s insurance had been dropped, a fully populated IN1 segment group would be transmitted. The presence of only one IN1 in a subsequent message conveys the "full group replacement" notion. The BAR^P05 would be transmitted and would be interpreted to mean "retain plan A357; delete and other plans":</p>
</div>
<div class="paragraph">
<p>MSH||||||||BAR<sup>P05</sup>BAR_P05|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|</p>
</div>
<div class="paragraph">
<p>PID|</p>
</div>
<div class="paragraph">
<p>IN1|1|A357|1234|BCMD</p>
</div>
<div class="paragraph">
<p>IN2|</p>
</div>
<div class="paragraph">
<p>IN3|</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_9_4_2_action_codeunique_identifier_mode_update_definition">2.9.4.2 Action code/unique identifier mode update definition</h4>
<div class="paragraph">
<p>In the "action code/unique identifier" mode (action code mode), each member of a segment or segment group can be acted upon independently of the other members. Thus, it is possible to delete or update a member of the set without including the other members of the set. The choice of delete/update/insert is determined by the action code (or an equivalent such as result status in an ORU Observation Report message). Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70206"><em>HL7 Table 0206 - Segment Action Code</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
<div class="paragraph">
<p>The <em>unique identifier</em> unambiguously identifies one of multiple repetitions of the repeating segment or segment group in a way that does not change over time. It is not dependent on any particular message identifier level (MSH) fields; it functions across messages, not just within a message. For a single segment repetition, the <em>unique identifier</em> MAY be an explicit field (e.g., IAM-7 Allergy Unique Identifier) or a combination of fields (IAM suggests IAM-3 Allergen Identifier in the context of the particular patient). For a repeating segment group, an identifier in the anchoring segment would identify the repeating set. For MFN messages, MFI-1 Master File Identifier and MFE-4 Primary Key Value identify the particular table and record.</p>
</div>
<div class="paragraph">
<p>Example 1: If a patient is allergic to penicillin and shellfish, the following message would be sent showing an Action code of "A(dd) in IAM-6:</p>
</div>
<div class="paragraph">
<p>MSH|||||||||ADT<sup>A60</sup>ADT_A60|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>IAM|1||peni|||A&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>IAM|2||shell||A&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>Subsequently, if it is learned that the patient is not allergic to shellfish, the following message would be sent showing an Action code of "D(elete) in IAM-6:</p>
</div>
<div class="paragraph">
<p>MSH|||||||||ADT<sup>A60</sup>ADT_A60|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>IAM|1||shell||D&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>Some messages, Orders and Observations, in particular, do not use table 0206. Order control codes are used to unambiguously specify the action to be taken.</p>
</div>
<div class="paragraph">
<p>Example 2: if a set of orders had been sent as</p>
</div>
<div class="paragraph">
<p>MSH|||||||||OML<sup>O21</sup>OML_O21|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>ORC|NW|987654^CIS|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>ORC|NW|876543^CIS|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>ORC|NW|765432^CIS|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>and subsequently order 876543 was cancelled, the following message would target that specific segment instance without affecting the other orders. ORC-1 contains order control code "CA" for cancel. ORC-2 identifies the specific order number.</p>
</div>
<div class="paragraph">
<p>MSH|||||||||OML<sup>O21</sup> OML_O21|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|</p>
</div>
<div class="paragraph">
<p>ORC|CA|876543^CIS|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>Example 3: Add staff person to Provider master:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|HL7REG|UH|HL7LAB|CH|200102280700||MFN</sup>M02^MFN_M02|MSGID002|P|2.7|||AL|NE</p>
</div>
<div class="paragraph">
<p>MFI|PRA^Practitioner Master File^HL70175||UPD|||AL</p>
</div>
<div class="paragraph">
<p>MFE|MAD|U2246|200102280700|PMF98123789182^^PLW|CWE</p>
</div>
<div class="paragraph">
<p>STF|PMF98123789182<sup>^PLW|U2246</sup>^^PLW |SEVEN<sup>HENRY</sup>L<sup>JR</sup>DR<sup>M.D.|P|M|19511004|A|</sup>ICU|^MED|(555)555-1002X345CO~(955)555-1002CH(206)689-1345X789CB|1002 Healthcare Drive^SUITE 227<sup>AnnArbor</sup>MI<sup>48104</sup>US~1012 Healthcare Drive^^AnnArbor, MI<sup>48104</sup>O |19890125^GHH&amp;Good Health Hospital&amp;L01||PMF88123453334|<a href="mailto:74160.2326@COMPUSERV.COM">74160.2326@COMPUSERV.COM</a>|B</p>
</div>
<div class="paragraph">
<p>The birth date was discovered to be in error. An MFN^M02 message is sent with the MFE-1 having a value of MUP for Update Record for master File. The corrected birth date (19521004) appears in STF-6:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|HL7REG|UH|HL7LAB|CH|200102280700||MFN</sup>M02^MFN_M02|MSGID002|P|2.7|||AL|NE</p>
</div>
<div class="paragraph">
<p>MFI|PRA^Practitioner Master File^HL70175||UPD|||AL</p>
</div>
<div class="paragraph">
<p>MFE|MUP|U2246|200102280700|PMF98123789182^^PLW|CWE</p>
</div>
<div class="paragraph">
<p>STF|PMF98123789182<sup>^PLW|U2246</sup>^^PLW |SEVEN<sup>HENRY</sup>L<sup>JR</sup>DR<sup>M.D.|P|M|19521004|A|</sup>ICU|^MED|(555)555-1002X345CO~(955)555-1002CH(206)689-1345X789CB|1002 Healthcare Drive^SUITE 227<sup>AnnArbor</sup>MI<sup>48104</sup>US~1012 Healthcare Drive^^AnnArbor, MI<sup>48104</sup>O |19890125^GHH&amp;Good Health Hospital&amp;L01||PMF88123453334|<a href="mailto:74160.2326@COMPUSERV.COM">74160.2326@COMPUSERV.COM</a>|B</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_5_protocol_for_interpreting_repeating_fields_in_an_update_message">2.9.5 Protocol for interpreting repeating fields in an update message</h3>
<div class="paragraph">
<p>With repeating fields, the segment action codes are not relevant. Action codes cannot be applied to individual field repetitions, because they cannot be uniquely identified. Therefore, they must all be there, i.e., send a full list for each transaction. If the intent is to delete an element, it is left off the list. This is analogous to the snapshot mode for repeating segments and segment groups. If the intent is to delete the whole list, the field is transmitted once with a delete indicator in the first component. In effect, the Sender must make a statement about what action the receiver is expected to take: omitting, or not populating, the field is not a clear signal according to field state definition as described in section 2.5.3.</p>
</div>
<div class="paragraph">
<p>At the same time, it is not incorrect to be precise about specific information that is to be deleted if the data type supports this capability. Note, however, that data types without components, e.g., ID or ST do not support this capability. There is no way to tie the delete indicator to an actual element instance in the persistent data store. See the example below.</p>
</div>
<div class="paragraph">
<p>Special consideration is warranted when implementing multiple interfaces. While the same processing rules (snapshot or update) can be applied to multiple systems and interfaces, desynchronization can occur if any one system is receiving similar information from multiple sources. Business rules and processes need to be considered in these cases to determine if there is a single authoritative source for the information (a "System of Record"), or if other business logic exists to resolve the possibility that information from the two (or more) sources are not in agreement.</p>
</div>
<div class="paragraph">
<p>Example: Repeating field of data type ID: A patient is added to the Master Patient Index. The patient has two specific living conditions: "spouse dependent" and "medical supervision required". This is transmitted as:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;||||||||ADT</sup>A28^ADT_A05|1|P|2.7&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|||1234567<sup>^</sup>^MRN| &lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PD1|S~M|</p>
</div>
<div class="paragraph">
<p>Subsequently, the "medical supervision required" living condition is dropped.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;||||||||ADT</sup>A31^ADT_A31|1|P|2.7&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|||1234567<sup>^</sup>^MRN|&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PD1|S||||||||||||||||||||||</p>
</div>
<div class="paragraph">
<p>The data type for PD1-1 is a data types without components. There is no way to tie the delete indicator to an actual element instance in the persistent data store. Therefore the following is ambiguous and not good practice.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;||||||||ADT</sup>A31^ADT_A31|1|P|2.7&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>EVN|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PID|||1234567<sup>^</sup>^MRN|&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PV1|&#8230;&#8203;&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>PD1|S~""||||||||||||||||||||||</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_10_local_extension">2.10 Local Extension</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following section specifies where local extensions to a message and its constituent parts are allowed, where they are not, and where they are ill-advised. Inter-version compatibility rules must be followed plus there are certain restrictions and prohibitions outlined in the sections that follow. In general, basic structures SHOULD NOT be altered.</p>
</div>
<div class="paragraph">
<p>The reader is advised to review the Conformance mechanism defined in section 2B<em>,</em> "Conformance Using Message Profiles" before applying local extensions. Using the conformance mechanismighteliminate the need for local extension.</p>
</div>
<div class="sect2">
<h3 id="_2_10_1_messages">2.10.1 Messages</h3>
<div class="paragraph">
<p>Messages MAY be locally extended as follows:</p>
</div>
<div class="paragraph">
<p>a) Users MAY develop local Z messages to cover areas not already covered by existing HL7 messages. These SHOULD be composed of HL7 segments where possible.</p>
</div>
<div class="paragraph">
<p>b) A local Z message MAY consist entirely of Z segments except that it SHALL begin with a MSH segment.</p>
</div>
<div class="paragraph">
<p>c) A local Z Acknowledgment message SHALL begin with an MSH segment followed by an MSA segment, an optional SFT segment and a conditional ERR segment.</p>
</div>
<div class="paragraph">
<p>d) Users MAY develop Z segments and add them to Z messages.</p>
</div>
<div class="paragraph">
<p>e) Users MAY develop Z segments and add them to HL7 messages. The trigger event MAY remain the same if the intent of the message has remained unchanged.</p>
</div>
<div class="paragraph">
<p>f) The practice of adding additional HL7 segments, like NTE, to existing HL7 messages locally is ill-advised. HL7 MAY move or change the segment in a future release; this will render the message unparsible.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_2_trigger_events">2.10.2 Trigger events</h3>
<div class="paragraph">
<p>Users MAY develop local Z trigger events for messages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_3_segment_groups">2.10.3 Segment groups</h3>
<div class="paragraph">
<p>a) The practice of turning a single segment or segments into a segment group locally <strong>SHALL NOT be</strong> allowed within an HL7 event. It will have a negative impact on XML and any component-based encoding schemes. Note that HL7, on other hand, can do this.</p>
</div>
<div class="paragraph">
<p>b) A segment group MAY NOT be ungrouped locally.</p>
</div>
<div class="paragraph">
<p>For example, if there is an HL7 group as follows:</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>ABC</p>
</div>
<div class="paragraph">
<p>[DEF</p>
</div>
<div class="paragraph">
<p>[GHI]]</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>one cannot change it in a local implementation to be as follows:</p>
</div>
<div class="paragraph">
<p>\{[ABC]}</p>
</div>
<div class="paragraph">
<p>[DEF]</p>
</div>
<div class="paragraph">
<p>[GHI]</p>
</div>
<div class="paragraph">
<p>Example 2:</p>
</div>
<div class="paragraph">
<p>If the original definition was:</p>
</div>
<div class="paragraph">
<p>GROUP1 ::= ABC, GROUP2?</p>
</div>
<div class="paragraph">
<p>GROUP2 ::= DEF, GHI?</p>
</div>
<div class="paragraph">
<p>and someone wished to constrain the segments in GROUP2 to be mandatory</p>
</div>
<div class="paragraph">
<p>(i.e., the HL7 grammar would look like:</p>
</div>
<div class="paragraph">
<p>\{[</p>
</div>
<div class="paragraph">
<p>ABC</p>
</div>
<div class="paragraph">
<p>DEF</p>
</div>
<div class="paragraph">
<p>[GHI]</p>
</div>
<div class="paragraph">
<p>]}</p>
</div>
<div class="paragraph">
<p>Their message instance would need to still look like:</p>
</div>
<div class="paragraph">
<p>&lt;GROUP1&gt;</p>
</div>
<div class="paragraph">
<p>&lt;ABC/&gt;</p>
</div>
<div class="paragraph">
<p>&lt;GROUP2&gt;</p>
</div>
<div class="paragraph">
<p>&lt;DEF/&gt;</p>
</div>
<div class="paragraph">
<p>&lt;GHI/&gt;</p>
</div>
<div class="paragraph">
<p>&lt;/GROUP2&gt;</p>
</div>
<div class="paragraph">
<p>&lt;/GROUP1&gt;</p>
</div>
<div class="paragraph">
<p>It would be an error if they instead sent it as:</p>
</div>
<div class="paragraph">
<p>&lt;GROUP1&gt;</p>
</div>
<div class="paragraph">
<p>&lt;ABC/&gt;</p>
</div>
<div class="paragraph">
<p>&lt;DEF/&gt;</p>
</div>
<div class="paragraph">
<p>&lt;GHI/&gt;</p>
</div>
<div class="paragraph">
<p>&lt;/GROUP1&gt;</p>
</div>
<div class="paragraph">
<p>c) A segment group MAY repeat locally. The 1<sup>st</sup> repetition needs to mean what it does in HL7</p>
</div>
<div class="paragraph">
<p>d) The practice of incorporating a Z segment into a segment group locally <strong>is</strong> allowed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_4_segments">2.10.4 Segments</h3>
<div class="sect3">
<h4 id="_2_10_4_0_local_extension_rules_for_segments">2.10.4.0 Local extension rules for segments</h4>
<div class="paragraph">
<p>Users SHALL NOT modify an existing segment, except as specified in section <em>2.7.2</em>, "<em>Changing messages or message constituents</em>".</p>
</div>
<div class="paragraph">
<p>Locally defined fields MAY be defined for use in locally defined segments, although HL7 defined fields are a better choice when available. The practice of extending an HL7 segment with locally defined fields, while not prohibited, is ill-advised.</p>
</div>
<div class="paragraph">
<p>HL7 also recognizes that sites MAY have locally defined fields where the users believe the enhancement might be of interest to the HL7 community as a whole and are moving forward with a proposal to HL7.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_10_4_1_caveats_for_locally_extending_segments">2.10.4.1 Caveats for locally extending segments</h4>
<div class="paragraph">
<p>Locally extending an HL7 segment with locally defined fields will likely cause conformance problems with the next release of the HL7 standard. There are, however, certain circumstances where HL7 has, itself, directed the membership to add Z fields as an interim measure between versions to accommodate regulatory agency requirements. These are fields that HL7 has reserved for official introduction in the next release.</p>
</div>
<div class="paragraph">
<p>If the local site intends to add a proposed field early, there is a risk that it might collide with another field when HL7 officially approves or rejects the proposed additions. Some sites have employed the practice of assigning a high sequence number locally, i.e., leaving a gap between the last official HL7 field and the proposed new field. The user–defined fields SHOULD be deleted or deprecated when HL7 officially approves or rejects the proposed additions so that the fields do not collide. It must be understood that the local implementation will have to adjust if a collision occurs and they want to conform.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_5_data_types">2.10.5 Data types</h3>
<div class="paragraph">
<p>The following rules apply for locally extending data types:</p>
</div>
<div class="paragraph">
<p>a) Locally defined data types MAY be defined for use in locally defined segment fields, although HL7 defined data types are a better choice when available.</p>
</div>
<div class="paragraph">
<p>b) Locally redefining existing data type components, e.g., changing a component from NM to ST, is prohibited.</p>
</div>
<div class="paragraph">
<p>c) Data types MAY be locally extended by adding new components at the end. This action creates a Z data type.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The practice of extending an HL7 data type with locally defined components is particularly ill-advised and might cause conformance problems with the next release of the HL7 standard.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_6_tables">2.10.6 Tables</h3>
<div class="paragraph">
<p>Rules for locally extending tables are the same as discussed in section <em>2.4.3.8</em>, "<em>Table</em>":</p>
</div>
<div class="paragraph">
<p>a) Users MAY redefine suggested values in User-defined tables.</p>
</div>
<div class="paragraph">
<p>b) Local tables MAY be defined for Z fields.</p>
</div>
<div class="paragraph">
<p>c) Local tables MAY be assigned to HL7 fields with data type CWE.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_7_fields">2.10.7 Fields</h3>
<div class="paragraph">
<p>Fields MAY be extended locally by the extension of data-types. See section 2.10.5, Data Types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_10_8_message_representation">2.10.8 Message representation</h3>
<div class="paragraph">
<p>For each trigger event the messages that are exchanged when the trigger event occurs are defined using the HL7 abstract message syntax as follows:</p>
</div>
<div class="paragraph">
<p>Each message is defined in special notation that lists the segment IDs in the order they would appear in the message. Braces, \{ . . . }, indicate one or more repetitions of the enclosed group of segments. Of course, the group MAY contain only a single segment. Brackets, [ . . . ], show that the enclosed group of segments is optional. If a group of segments is optional and MAY repeat it SHALL be enclosed in brackets and braces, [\{&#8230;&#8203;}].</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> [\{&#8230;&#8203;}] and \{[&#8230;&#8203;]} are equivalent.</p>
</div>
<div class="paragraph">
<p>Whenever braces or brackets enclose more than one segment ID a special stylistic convention is used to help the reader understand the hierarchy of repetition. For example, the first segment ID appears on the same line as the brace, two columns to the right. The subsequent segment IDs appear under the first. The closing brace appears on a line of its own in the same column as the opening brace. This convention is an optional convenience to the user. If there is conflict between its use and the braces that appear in a message schematic, the braces define the actual grouping of segments that is permitted.</p>
</div>
<div class="paragraph">
<p>A choice of one segment from a group of segments is indicated by using angle brackets to delimit the group and vertical bar delimiters between the several segments.</p>
</div>
<div class="paragraph">
<p>Example: The following example allows a choice of segments :</p>
</div>
<div class="paragraph">
<p>&lt;ABC | DEF | GHI | JKL &gt;</p>
</div>
<div class="paragraph">
<p>Example: The following example allows a choice of segments and/or segment groups. (see Figure 2-5 Hypothetical schematic message)</p>
</div>
<div class="paragraph">
<p>The first choice is a repeating group consisting of an ABC segment followed by optionally repeating NTE segments.</p>
</div>
<div class="paragraph">
<p>The second choice is the DEF segment.</p>
</div>
<div class="paragraph">
<p>The third choice is a group with a required GHI segment followed by an optionally repeating group containing a PRT segment followed by an optionally repeating NTE segment.</p>
</div>
<div class="paragraph">
<p>&lt;\{ABC [{NTE}] } |DEF | GHI [\{PRT [{NTE}] }] &gt;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_11_chapter_formats_for_defining_hl7_messages">2.11 Chapter Formats For Defining HL7 Messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Subsequent chapters of this document describe messages that are exchanged among applications in functionally-specific situations. Each chapter is organized as follows:</p>
</div>
<div class="paragraph">
<p>a) purpose. This is an overview describing the purpose of the chapter, general information and concepts.</p>
</div>
<div class="paragraph">
<p>b) trigger events and messages. There is a list of the trigger events.</p>
</div>
<div class="paragraph">
<p>c) message segments. The segments defined in a chapter are then listed in a functional order designed to maximize conceptual clarity.</p>
</div>
<div class="paragraph">
<p>d) examples. Complete messages are included.</p>
</div>
<div class="paragraph">
<p>e) implementation considerations. Special supplementary information is presented here. This includes issues that must be addressed in planning an implementation.</p>
</div>
<div class="paragraph">
<p>f) outstanding issues. Issues still under consideration or requiring consideration are listed here.</p>
</div>
<div class="sect2">
<h3 id="_2_11_1_hl7_abstract_message_syntax_example">2.11.1 HL7 abstract message syntax example</h3>
<div class="paragraph">
<p>Consider the hypothetical triggering event <strong>a widget report is requested</strong>. It might be served by the Widget Request (WRQ) and Widget Report (WRP) messages. These would be defined in the Widget chapter (say Chapter XX). The Widget Request message might consist of the following segments: Message Header (MSH), Software Segment (SFT), User Authentication Credentials (UAC), and Widget ID (WID). The Widget Report message might consist of the following segments: Message Header (MSH), Software Segment (SFT), Message acknowledgment (MSA), Error Segment (ERR) and one or more Widget Description (WDN) Segments each of which is followed by a single Widget Portion segment (WPN) followed by zero or more Widget Portion Detail (WPD) segments. The Widget group ends with the optional Inclusion group, which allows a choice of segments/groups.</p>
</div>
<div class="paragraph">
<p>The ADD and DSC segments follow special rules or protocol as defined in section 2.10.2. They are not represented in the message grammar in the domain chapters as their presence is context sensitive.</p>
</div>
<div class="paragraph">
<p>The schematic form for this hypothetical exchange of messages is shown in Figure 2-5:</p>
</div>
<div class="paragraph">
<p>Figure 2-5. Hypothetical schematic message</p>
</div>
<div class="paragraph">
<p>Trigger Event WRQ<sup>Z01</sup>WRQ_Z01: WIDGET REPORT IS REQUESTED</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 29%;">
<col style="width: 36%;">
<col style="width: 13%;">
<col style="width: 22%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Desription</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Chapter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSH">MSH</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[UAC]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget ID</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>WRP<sup>Z02</sup>WRQ_Z02: Widget Reports</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 29%;">
<col style="width: 36%;">
<col style="width: 13%;">
<col style="width: 22%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Chapter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSH">MSH</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[UAC]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSA">MSA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ERR}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---Widget begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Description</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Portion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--Inclusion begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&lt;\{ABC [{NTE}] }</p>
</div>
<div class="paragraph">
<p>|[ DEF</p>
</div>
<div class="paragraph">
<p>| GHI [\{PRT [{NTE}] }] ]</p>
</div>
<div class="paragraph">
<p>&gt;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A better concept group ABC, etc.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>XX</p>
</div>
<div class="paragraph">
<p>XX</p>
</div>
<div class="paragraph">
<p>XX</p>
</div>
<div class="paragraph">
<p>XX</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--Inclusion end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---Widget end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The WID, WDN, WPN, and WPD segments would be defined by the widget committee in the widget chapter, as designated by the Arabic numeral XX in the right column. The MSH and MSA segments, although included in the widget messages, are defined in another chapter. They are incorporated by reference into the widget chapter by the chapter number XX.</p>
</div>
<div class="paragraph">
<p>On the other hand, the widget committee might decide that the WPN and WPD segments SHALL appear in pairs, but the pairs are optional and can repeat. Then the schematic for the WRP message would be as shown in Figure 2-6.</p>
</div>
<div class="paragraph">
<p>Figure 2-6. WPN and WPD segments in pairs WRQ<sup>Z02</sup>WRQ_Z03</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 37%;">
<col style="width: 12%;">
<col style="width: 21%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">WRF</th>
<th class="tableblock halign-left valign-top">Widget Report</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Chapter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSH">MSH</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[UAC]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSA">MSA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ERR}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--Widget begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Description</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ \{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---WidgetDetailA begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Portion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Portion Detail</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">} ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---WidgetDetailA end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---Widget end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If the widget committee determined that at least one pair of WPN and WPD segments must follow a WDN, then the notation would be as shown in Figure 2-7.</p>
</div>
<div class="paragraph">
<p>Figure 2-7. At least one pair of WPN and WPD WRQ<sup>Z02</sup>WRQ_Z04</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 36%;">
<col style="width: 13%;">
<col style="width: 21%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">WRP</th>
<th class="tableblock halign-left valign-top">Widget Report</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Chapter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSH">MSH</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[UAC]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSA">MSA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ERR}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Segment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">--Widget begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Description</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---WidgetDetailB begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Portion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Portion Detail</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---WidgetDetailB begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---Widget end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_2_11_2_hl7_acknowledgment_choreography_example">2.11.2 HL7 Acknowledgment Choreography Example</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Using the example messages in Figure 2-5. Hypothetical schematic message for the WRQ/WRP message pair:</p>
</div>
<div class="paragraph">
<p>o When MSH-15 is blank and MSH-16 is blank an original mode acknowledgment SHALL be returned on the same communication channel.</p>
</div>
<div class="paragraph">
<p>o When MSH-15 is AL (Always) and MSH-16 is NE (Never) an immediate ack is always returned. When MSH-15 is NE, and MSH-16 is AL, the receiver is expected to only return an WRP application acknowledgment on a separate communication channel. See Section 2.8.3.2</p>
</div>
<div class="paragraph">
<p>o When MSH-15 is AL, and MSH-16 is AL, the receiver is expected to return both the immediate ACK as well as the WRP application ack. The immediate ACK will return on the current channel, and the application acknowledgment on a separate communication channel. See Section 2.8.3.2</p>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 15.8415%;">
<col style="width: 23.7623%;">
<col style="width: 14.8514%;">
<col style="width: 22.7722%;">
<col style="width: 21.7821%;">
<col style="width: 0.9905%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Example of Acknowledgment Choreography:</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WRQ<sup>Z01</sup>WRQ_Z01/WRP<sup>Z02</sup>WRP_Z02</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Original Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Value: Enhanced Mode</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLANK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL(Always)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE(Never)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL(Always)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLANK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE(Never)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL(Always)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL(Always)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK^Z01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK^Z01</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WRP<sup>Z02</sup>WRP_Z02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WRP<sup>Z02</sup>WRP_Z02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WRP<sup>Z02</sup>WRP_Z02</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_12_acknowledgment_messages">2.12 Acknowledgment Messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Acknowledgment messages MAY be defined on an application basis. However the simple general acknowledgment message (ACK) SHALL be used where the application does not define a special message (application level acknowledgment) and in other cases as described in Section <em>2.8</em>, "<em>Message Processing Rules</em>".</p>
</div>
<div class="sect2">
<h3 id="_2_12_1_ack_general_acknowledgment_message">2.12.1 ACK - general acknowledgment message</h3>
<div class="paragraph">
<p>The simple general acknowledgment (ACK) can be used where the application does not define a special application level acknowledgment message or where there has been an error that precludes application processing. It is also used for accept level acknowledgments. The details are described in Section <em>2.8</em>, "<em>Message Processing Rules</em>".</p>
</div>
<div class="paragraph">
<p>ACK<sup>varies</sup>ACK: General Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33%;">
<col style="width: 47%;">
<col style="width: 9%;">
<col style="width: 11%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Chapter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSH">MSH</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="\l">SFT</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ UAC ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="\l">MSA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[\{ <a href="#ERR">ERR</a> }]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Note</strong>: For the general acknowledgment (ACK) message, the value of MSH-9-2-Trigger event is equal to the value of MSH-9-2-Trigger event in the message being acknowledged. The value of MSH-9-3-Message structure for the general acknowledgment message is always ACK.</p>
</div>
<div class="sect3">
<h4 id="_2_12_1_0_acknowledgment_choreography">2.12.1.0 Acknowledgment Choreography</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27%;">
<col style="width: 38%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Acknowledgment Choreography</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACK<sup>varies</sup>ACK (Event Varies)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value: Original Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediate Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Ack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Note:</strong> In general, there is no purpose for a receiver to acknowledge an Immediate Acknowledgment message while at times it is appropriate to acknowledge an Application Acknowledgment.  Site specific profiles MAY require this based on the use case.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_13_message_control_segments">2.13 Message Control Segments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following segments are necessary to support the functionality described in this chapter.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The HL7 message construction rules define the standard HL7 encoding rules, creating variable length delimited messages from the segments defined below. Although only one set of encoding rules is defined as a standard in HL7 Version 2.3, other encoding rules are possible (but since they are non-standard, they MAY only used by a site-specific agreement).</p>
</div>
<div class="paragraph">
<p>The segments in this section are listed in alphabetical order. The following chart shows a summary of the segments listed by category.</p>
</div>
<div class="paragraph">
<p>Figure 2-8. HL7 message segments</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 26%;">
<col style="width: 38%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segment Category</th>
<th class="tableblock halign-left valign-top">Segment Name</th>
<th class="tableblock halign-left valign-top">HL7 Section Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BHS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FHS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">General Purpose</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OVR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.10.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SFT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SGH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SGT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UAC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">link:#<em>UAC</em>-_User_Authentication Credentia[2.13.15]</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_2_13_1_add_addendum_segment">2.13.1 ADD ‑ Addendum segment</h3>
<div class="paragraph">
<p>The ADD segment is used to define the continuation of the prior segment in a continuation message. See Section <em>2.9.2</em>, "<em>Continuation messages and segments</em>," for details.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - ADD – Addendum</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C. Len</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-n</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00066</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Addendum Continuation Pointer</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_1_0_add_field_definition">2.13.1.0 ADD field definition</h4>

</div>
<div class="sect3">
<h4 id="_2_13_1_1_add_1_addendum_continuation_pointer_st_00066">2.13.1.1 ADD-1 Addendum Continuation Pointer (ST) 00066</h4>
<div class="paragraph">
<p>Definition: This field is used to define the continuation of the prior segment in a continuation message. See section <em>2.9.2</em>, "<em>Continuation messages and segments</em>" for details. When the ADD is sent after the segment being continued, it contains no fields. It is only a marker that the previous segment is being continued in a subsequent message. Thus fields 1‑N are not present. The sequence designation, 1‑N, means the remainder of the fields in the segment being continued. These remainder of the segment being continued fields are present only when the ADD is sent with a continuation message.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_2_bhs_batch_header_segment">2.13.2 BHS ‑ Batch Header Segment</h3>
<div class="paragraph">
<p>The BHS segment defines the start of a batch.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - BHS – Batch Header</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00081</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Field Separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4..5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00082</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Encoding Characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00083</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Sending Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00084</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Sending Facility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00085</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Receiving Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Receiving Facility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00087</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Creation Date/Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00088</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Security</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00089</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Name/ID/Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00091</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Control ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00092</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference Batch Control ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02271</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Sending Network Address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02272</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Receiving Network Address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70952">0952</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02429</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Classification Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70953">0953</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02430</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Handling Instructions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02431</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special Access Restriction Instructions</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_2_0_bhs_field_definitions">2.13.2.0 BHS field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_2_1_bhs_1_batch_field_separator_st_00081">2.13.2.1 BHS-1 Batch Field Separator (ST) 00081</h4>
<div class="paragraph">
<p>Definition: This field contains the separator between the segment ID and the first real field, BHS-2 Batch Encoding Characters. As such it serves as the separator and defines the character to be used as a separator for the rest of the message. Recommended value is | (ASCII 124).</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_2_bhs_2_batch_encoding_characters_st_00082">2.13.2.2 BHS-2 Batch Encoding Characters (ST) 00082</h4>
<div class="paragraph">
<p>Definition: This field contains the five characters in the following order: the component separator, repetition separator, escape characters, subcomponent separator, and truncation character. Recommended values are ^~\&amp;# (ASCII 94, 126, 92, 38,and 35, respectively). See Section <em>2.4.4</em>, "<a href="#message-delimiters"><em>Message delimiters</em></a>."</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_3_bhs_3_batch_sending_application_hd_00083">2.13.2.3 BHS-3 Batch Sending Application (HD) 00083</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field uniquely identifies the sending application among all other applications within the network enterprise. The network enterprise consists of all those applications that participate in the exchange of HL7 messages within the enterprise. Entirely site-defined.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_4_bhs_4_batch_sending_facility_hd_00084">2.13.2.4 BHS-4 Batch Sending Facility (HD) 00084</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the address of one of several occurrences of the same application within the sending system. Absent other considerations, the Medicare Provider ID might be used with an appropriate sub-identifier in the second component. Entirely site-defined.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_5_bhs_5_batch_receiving_application_hd_00085">2.13.2.5 BHS-5 Batch Receiving Application (HD) 00085</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field uniquely identifies the receiving applications among all other applications within the network enterprise. The network enterprise consists of all those applications that participate in the exchange of HL7 messages within the enterprise. Entirely site-defined.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_6_bhs_6_batch_receiving_facility_hd_00086">2.13.2.6 BHS-6 Batch Receiving Facility (HD) 00086</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field identifies the receiving application among multiple identical instances of the application running on behalf of different organizations. See comments <em>2.13.2.4</em>, "<em>BHS-4 Batch Sending Facility (HD) 00084</em>." Entirely site-defined.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_7_bhs_7_batch_creation_datetime_dtm_00087">2.13.2.7 BHS-7 Batch Creation Date/Time (DTM) 00087</h4>
<div class="paragraph">
<p>Definition: This field contains the date/time that the sending system created the message. If the time zone is specified, it will be used throughout the message as the default time zone.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_8_bhs_8_batch_security_st_00088">2.13.2.8 BHS-8 Batch Security (ST) 00088</h4>
<div class="paragraph">
<p>Definition: In some applications of HL7, this field is used to implement security features. For codified expression of security tags using BHS-15 through BHS-17.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_9_bhs_9_batch_nameidtype_st_00089">2.13.2.9 BHS-9 Batch Name/ID/Type (ST) 00089</h4>
<div class="paragraph">
<p>Definition: This field can be used by the application processing the batch. It can have extra components if needed.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> the text regarding "extra components" has been retained for backward compatibilityas of V2.5, but it is not currently an accepted format for the ST data type.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_10_bhs_10_batch_comment_st_00090">2.13.2.10 BHS-10 Batch Comment (ST) 00090</h4>
<div class="paragraph">
<p>Definition: This field is a comment field that is not further defined in the HL7 protocol.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_11_bhs_11_batch_control_id_st_00091">2.13.2.11 BHS-11 Batch Control ID (ST) 00091</h4>
<div class="paragraph">
<p>Definition: This field is used to uniquely identify a particular batch. It can be echoed back in BHS-12 Reference Batch Control ID if an answering batch is needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_12_bhs_12_reference_batch_control_id_st_00092">2.13.2.12 BHS-12 Reference Batch Control ID (ST) 00092</h4>
<div class="paragraph">
<p>Definition: This field contains the value of BHS-11 Batch Control ID when this batch was originally transmitted. Not present if this batch is being sent for the first time. See definition for BHS-11 Batch Control ID.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_13_bhs_13_batch_sending_network_address_hd_02271">2.13.2.13 BHS-13 Batch Sending Network Address (HD) 02271</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifier of the network location the message was transmitted from. Identified by an OID or text string (e.g., URI). The reader is referred to the "Report from the Joint W3C/IETF URI Planning Interest Group: Uniform Resource Identifiers (URIs), URLs, and Uniform Resource Names (URNs): Clarifications and Recommendations".<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="paragraph">
<p>As with the Sending/Receiving Responsible Organization, the Sending Network Address provides a more detailed picture of the source of the message. This information is lower than the application layer, but is often useful/necessary for routing and identification purposes. This field SHALL only be populated when the underlying communication protocol does not support identification of sending network locations.</p>
</div>
<div class="paragraph">
<p>The specific values and usage must be site negotiated</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_14_bhs_14_batch_receiving_network_address_hd_02272">2.13.2.14 BHS-14 Batch Receiving Network Address (HD) 02272</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifier of the network location the message was transmitted to. Identified by an OID or text string. (e.g., URL).</p>
</div>
<div class="paragraph">
<p>This is analogous with the Sending Network Address, however in the receiving role.</p>
</div>
<div class="paragraph">
<p>This field SHALL only be populated when the underlying communication protocol does not support identification receiving network locations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_15_bhs_15_security_classification_tag_cwe_02429">2.13.2.15 BHS-15 Security Classification Tag (CWE) 02429</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field defines the security classification (as defined by ISO/IEC 2382-8:1998(E/F)/ T-REC-X.812-1995) of an IT resource, in this case the message, which might be used to make access control decisions. It is conditionally required when MSH-27 or MSH-28 are used.</p>
</div>
<div class="paragraph">
<p>Conditionality Predicate: Required if BHS-16 or BHS-17 or any contained FSH-16 or FSH-17 or MSH-26 or MSH-27 is valued, Optional if neither BHS-16 nor BHS-17 , nor any contained FSH-16 or FSH-17, nor MSH-26 nor MSH-27is valued."</p>
</div>
<div class="paragraph">
<p>Use of this field supports the business requirement for declaring the level of confidentiality (classification) for a given message.</p>
</div>
<div class="paragraph">
<p>Refer to Externally-defined HL7 Table 0952 – HL7 Confidentiality Code in Chapter 2C, Code Tables, for suggested values. Use of this table is recommended. The codes in this table are comprehensive, non-overlapping hierarchical codes: Very Restricted &gt; Restricted &gt; Normal &gt; Moderate &gt; Low &gt; Unrestricted. Restrictions to a comprehensive, non-overlapping set of codes is required for purposes of access control system algorithms such as Bell–LaPadula Mode, which isl used to adjudicate access requests against privacy policies.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_16_bhs_16_security_handling_instructions_cwe_02430">2.13.2.16 BHS-16 Security Handling Instructions (CWE) 02430</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field is repeatable and conveys instructions to users and receivers for secure distribution, transmission, and storage; dictate obligations or mandated actions; specify any action prohibited by refrain policy such as dissemination controls; and stipulate the permissible purpose of use of an IT resource.</p>
</div>
<div class="paragraph">
<p>Refer to HL7 Table 0953 – Security Control in Chapter 2C, Code Tables, for suggested values. –</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_2_17_bhs_17_special_access_restriction_instructions_st_02431">2.13.2.17 BHS-17 Special Access Restriction Instructions (ST) 02431</h4>
<div class="paragraph">
<p>Definition: Used to convey specific instructions about the protection of the patient&#8217;s data , which must be rendered to end users in accordance with patient consent directive, organizational policy, or jurisdictional law. For example, in US law 42 CFR Part 2, disclosed information made with patient consent must include a renderable “Prohibition on re-disclosure” warning (§ 2.32[multiblock footnote omitted]) In addition, organizational policy MAY require that some or all of the ARV field privacy tag values be rendered to end users, e.g., marking a consult note with “Restricted Confidentiality” or with sensitivity tags such as “VIP” or “EMP” for employee of the organization.</p>
</div>
<div class="paragraph">
<p>This field MAY also be used to specify instructions about the release of information to family and friends (e.g., "Do not release information to patient&#8217;s brother, Adam Everyman"). These instructions could be in conjunction with other fields (as elected by the system).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_3_bts_batch_trailer_segment">2.13.3 BTS ‑ Batch Trailer Segment</h3>
<div class="paragraph">
<p>The BTS segment defines the end of a batch.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - BTS – Batch Trailer</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00093</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Message Count</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00090</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00095</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch Totals</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_3_0_bts_field_definitions">2.13.3.0 BTS field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_3_1_bts_1_batch_message_count_st_00093">2.13.3.1 BTS-1 Batch Message Count (ST) 00093</h4>
<div class="paragraph">
<p>Definition: This field contains the count of the individual messages contained within the batch.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_3_2_bts_2_batch_comment_st_00090">2.13.3.2 BTS-2 Batch Comment (ST) 00090</h4>
<div class="paragraph">
<p>Definition: This field is a comment field that is not further defined in the HL7 protocol.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_3_3_bts_3_batch_totals_nm_00095">2.13.3.3 BTS-3 Batch Totals (NM) 00095</h4>
<div class="paragraph">
<p>Definition: We encourage new users of this field to use the HL7 Version 2.3 data type of NM and to define it as "repeating." This field contains the batch total. If more than a single batch total exists, this field MAY be repeated.</p>
</div>
<div class="paragraph">
<p>Prior to v2.5 this field might have been defined as a CM data type for backward compatibility with HL7 Versions 2.2 and 2.1 with each total being carried as a separate component. Each component in this case is an NM data type.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_4_dsc_continuation_pointer_segment">2.13.4 DSC - Continuation Pointer segment</h3>
<div class="paragraph">
<p>The DSC segment is used in the continuation protocol.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - DSC – Continuation Pointer</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">180=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70398">0398</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01354</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Style</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_4_0_dsc_field_definitions">2.13.4.0 DSC field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_4_1_dsc_1_continuation_pointer_st_00014">2.13.4.1 DSC-1 Continuation Pointer (ST) 00014</h4>
<div class="paragraph">
<p>Definition: This field contains the continuation pointer. In an initial query, this field is not present. If the responder returns a value of delete indicator or not present, then there is no more data to fulfill any future continuation requests. For use with continuations of unsolicited messages, see chapter 5 and section <em>2.9.2</em>, "<em>Continuation messages and segments</em>." Note that continuation protocols work with both display- and record-oriented messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_4_2_dsc_2_continuation_style_id_01354">2.13.4.2 DSC-2 Continuation Style (ID) 01354</h4>
<div class="paragraph">
<p>Definition: Indicates whether this is a fragmented message (see Section <em>2.9.2</em>, "<em>Continuation messages and segments</em>"), or if it is part of an interactive continuation message (see Section 5.6.3, "Interactive continuation of response messages").</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70398"><em>HL7 Table 0398 – Continuation Style Code</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_5_err_error_segment">2.13.5 ERR ‑ Error segment</h3>
<div class="paragraph">
<p>The ERR segment is used to add error comments to acknowledgment messages.</p>
</div>
<div class="paragraph">
<p>Use Cases:</p>
</div>
<div class="paragraph">
<p>Severity: A receiving application needs to communicate 2 "error or exception statements." One is an "error;" the other is a "warning". To accomplish this, an acknowledgment message with 2 ERR segments is sent. Upon receipt, the sending application can display both, including the appropriate severity, to the user.</p>
</div>
<div class="paragraph">
<p>Application Error Code: A receiving application generates an error that reports an application error code and returns this information in its response. This code in turn is used by helpdesk staff to pinpoint the exact cause of the error, or by the application to prompt an appropriate response from the user. (Ex. Deceased date must be greater than or equal to birth date).</p>
</div>
<div class="paragraph">
<p>Application Error Parameter: A receiving application encounters an error during processing of a transaction. In addition to an error code, the application provides an error parameter that gives greater detail as to the exact nature of the error. The receiving application looks up the message corresponding to the error code, substitutes in the parameter, and displays the resulting message to the user.</p>
</div>
<div class="paragraph">
<p>Diagnostic Information: While processing a transaction, a receiving application encounters an exception. When the exception is thrown, it provides a volume of detailed information relating to the error encountered. The receiving application captures the information and sends it in its response. The user reports the error to the help desk, and on request, faxes a copy of the diagnostic information to assist analyzing the problem.</p>
</div>
<div class="paragraph">
<p>User Message: A user executes an application function that generates a transaction that is sent to another application for further processing. During this processing, the receiving application encounters an error and, as part of the error handling routine, retrieves a User Message that it returns in its response. The originating application receives the error and displays it to the end user with the intent that the error condition can be resolved and the user can re-execute the function without error.</p>
</div>
<div class="paragraph">
<p>Inform Person Code: After submitting a dispense transaction, a response is returned to the user indicating that the patient could be abusing drugs. Given the sensitivity of this warning, the error is returned with an indicator stating that the patient should not be informed of the error with the implication that steps should be taken to rule out or confirm the warning.</p>
</div>
<div class="paragraph">
<p>Override Type: If a business rule states that a prescription on hold cannot be dispensed, an override type might be "Dispense Held Prescription" to allow the prescription to be dispensed in exception to the rule.</p>
</div>
<div class="paragraph">
<p>Override Reason Codes: A patient is given a prescription; however, before completing the prescription, the remaining pills are spoiled. The patient returns to their pharmacy and explains the situation to their pharmacist. The pharmacist decides to replace the spoiled drugs; however, when attempting to record the event, a message is returned indicating that the dispense would exceed the maximum amount prescribed. The pharmacist overrides the rule and specifies an Override Reason Code indicating a replacement of lost product.</p>
</div>
<div class="paragraph">
<p>Help Desk Contact: Help desk contact information is stored in a database. When an application error is encountered, the database is queried and the most current help desk contact information is returned in the error message. This is displayed to the user by the receiving application.</p>
</div>
<div class="paragraph">
<p>Better Error Location Information: Receiving system detects an error with the 3rd repetition of the ROL.4 (Role Person - XCN).16 (Name Context – CE).4(Alternate Identifier – CWE). The application identifies the specific repetition and component when raising the error, simplifying diagnosis of the problem.</p>
</div>
<div class="paragraph">
<p>Support for multiple Error Locations: Two fields are marked as conditional, with the condition that one of the two must be specified. The sending application leaves both blank. The receiving application detects the problem, and sends back a single error indicating that one of the fields must be filled in. The ERR segment identifies both positions within the message that relate to the error.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - ERR[<mark>ERR .anchor]</mark>### – Error</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Code and Location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01812</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70357">0357</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01813</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HL7 Error Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70516">0516</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01814</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Severity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70533">0533</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01815</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Error Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y/10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01816</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Error Parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01817</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diagnostic Information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">250#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01818</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70517">0517</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01819</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inform Person Indicator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70518">0518</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01820</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70519">0519</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01821</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override Reason Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XTN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01822</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Help Desk Contact Point</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_5_0_err_field_definition">2.13.5.0 ERR field definition</h4>

</div>
<div class="sect3">
<h4 id="_2_13_5_1_err_1_error_code_and_location_00024">2.13.5.1 ERR-1 Error Code and Location 00024</h4>
<div class="paragraph">
<p>Attention: The ERR-1 field <strong>was deprecated in V2.4 and is withdrawn in V2.7</strong>. Please refer to ERR-2 and ERR-3 instead.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_2_err_2_error_location_erl_01812">2.13.5.2 ERR-2 Error Location (ERL) 01812</h4>
<div class="paragraph">
<p>Components: &lt;Segment ID (ST)&gt; ^ &lt;Segment Sequence (NM)&gt; ^ &lt;Field Position (NM)&gt; ^ &lt;Field Repetition (NM)&gt; ^ &lt;Component Number (NM)&gt; ^ &lt;Sub-Component Number (NM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifies the location in a message related to the identified error, warning or message. If multiple repetitions are present, the error results from the values in a combination of places.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_3_err_3_hl7_error_code_cwe_01813">2.13.5.3 ERR-3 HL7 Error Code (CWE) 01813</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifies the HL7 (communications) error code. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70357"><em>HL7</em> <em>Tabl__e</em> <em>0357 – Message Error Condition Codes</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_4_err_4_severity_id_01814">2.13.5.4 ERR-4 Severity (ID) 01814</h4>
<div class="paragraph">
<p>Definition: Identifies the severity of an application error. Knowing if something is Error, Warning or Information is intrinsic to how an application handles the content. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70516"><em>HL7 Table 0516 - Error Severity</em></a> in Chapter 2C, Code Tables, for valid values. If ERR-3 has a value of "0", ERR-4 will have a value of "I".</p>
</div>
<div class="paragraph">
<p>Example: a Warning could be used to indicate that notes were present, but ignored because they could not be automatically processed, and therefore information could have been missed.</p>
</div>
<div class="paragraph">
<p>Example of Information: When submitting a claim, a payor might indicate remaining coverage under limit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_5_err_5_application_error_code_cwe_01815">2.13.5.5 ERR-5 Application Error Code (CWE) 01815</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Application specific code identifying the specific error that occurred. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70533"><em>User-Defined Table 0533 – Application Error Cod__e</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
<div class="paragraph">
<p>If the message associated with the code has parameters, it is recommended that the message be indicated in the format of the java.text.MessageFormat approach.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> This style provides information on the parameter type to allow numbers, dates and times to be formatted appropriately for the language.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_6_err_6_application_error_parameter_st_01816">2.13.5.6 ERR-6 Application Error Parameter (ST) 01816</h4>
<div class="paragraph">
<p>Definition: Additional information to be used, together with the Application Error Code, to understand a particular error condition/warning/etc. This field can repeat to allow for up to 10 parameters.</p>
</div>
<div class="paragraph">
<p>Example: If the application error code specified in ERR.5 corresponded with the English message "The patient has a remaining deductible of \{0, number, currency} for the period ending \{1, date, medium}.", and the first two repetitions of ERR.6 were "250" and "20021231", then a receiving application in the U.S. would display the message as "The patient has a remaining deductible of $250.00 for the period ending Dec 31, 2002."</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_7_err_7_diagnostic_information_tx_01817">2.13.5.7 ERR-7 Diagnostic Information (TX) 01817</h4>
<div class="paragraph">
<p>Definition: Information that MAY be used by help desk or other support personnel to diagnose a problem.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_8_err_8_user_message_tx_01818">2.13.5.8 ERR-8 User Message (TX) 01818</h4>
<div class="paragraph">
<p>Definition: The text message to be displayed to the application user.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>|This program is having trouble communicating with another system. Please contact the help desk.|</p>
</div>
<div class="paragraph">
<p>This differs from the actual error code and could provide more diagnostic information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_9_err_9_inform_person_indicator_cwe_01819">2.13.5.9 ERR-9 Inform Person Indicator (CWE) 01819</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: A code to indicate who (if anyone) SHOULD be informed of the error. This field MAY also be used to indicate that a particular person SHOULD NOT be informed of the error (e.g., Do not inform patient). Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70517"><em>User-defined table 0517- Inform Person Code</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_10_err_10_override_type_cwe_01820">2.13.5.10 ERR-10 Override Type (CWE) 01820</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifies what type of override can be used to override the specific error identified. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70518"><em>User-defined Table 0518 - Override Type</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_11_err_11_override_reason_code_cwe_01821">2.13.5.11 ERR-11 Override Reason Code (CWE) 01821</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Provides a list of potential override codes that can be used to override enforcement of the application rule that generated the error. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70519"><em>User-defined table 0519 – Override Reason</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_5_12_err_12_help_desk_contact_point_xtn_01822">2.13.5.12 ERR-12 Help Desk Contact Point (XTN) 01822</h4>
<div class="paragraph">
<p>Components: &lt;WITHDRAWN Constituent&gt; ^ &lt;Telecommunication Use Code (ID)&gt; ^ &lt;Telecommunication Equipment Type (ID)&gt; ^ &lt;Communication Address (ST)&gt; ^ &lt;Country Code (SNM)&gt; ^ &lt;Area/City Code (SNM)&gt; ^ &lt;Local Number (SNM)&gt; ^ &lt;Extension (SNM)&gt; ^ &lt;Any Text (ST)&gt; ^ &lt;Extension Prefix (ST)&gt; ^ &lt;Speed Dial Code (ST)&gt; ^ &lt;Unformatted Telephone number (ST)&gt; ^ &lt;Effective Start Date (DTM)&gt; ^ &lt;Expiration Date (DTM)&gt; ^ &lt;Expiration Reason (CWE)&gt; ^ &lt;Protection Code (CWE)&gt; ^ &lt;Shared Telecommunication Identifier (EI)&gt; ^ &lt;Preference Order (NM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Expiration Reason (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Protection Code (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Shared Telecommunication Identifier (EI): &lt;Entity Identifier (ST)&gt; &amp; &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Lists phone, e-mail, fax, and other relevant numbers for helpdesk support related to the specified error.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_6_fhs_file_header_segment">2.13.6 FHS ‑ File Header Segment</h3>
<div class="paragraph">
<p>The FHS segment is used to head a file (group of batches) as defined in Section <em>2.9.3</em>, "<em>HL7 batch protocol</em>".</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - FHS - File Header</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00067</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Field Separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4..5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00068</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Encoding Characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00069</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Sending Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00070</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Sending Facility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00071</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Receiving Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00072</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Receiving Facility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00073</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Creation Date/Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00074</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Security</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00075</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Name/ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00076</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Header Comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00077</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Control ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00078</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference File Control ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02269</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Sending Network Address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02270</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Receiving Network Address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70952">0952</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02429</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Classification Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70953">0953</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02430</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Handling Instructions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02431</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special Access Restriction Instructions</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_6_0_fhs_field_definitions">2.13.6.0 FHS field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_6_1_fhs_1_file_field_separator_st_00067">2.13.6.1 FHS-1 File Field Separator (ST) 00067</h4>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_2_fhs_2_file_encoding_characters_st_00068">2.13.6.2 FHS-2 File Encoding Characters (ST) 00068</h4>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_3_fhs_3_file_sending_application_hd_00069">2.13.6.3 FHS-3 File Sending Application (HD) 00069</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_4_fhs_4_file_sending_facility_hd_00070">2.13.6.4 FHS-4 File Sending Facility (HD) 00070</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_5_fhs_5_file_receiving_application_hd_00071">2.13.6.5 FHS-5 File Receiving Application (HD) 00071</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_6_fhs_6_file_receiving_facility_hd_00072">2.13.6.6 FHS-6 File Receiving Facility (HD) 00072</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_7_fhs_7_file_creation_datetime_dtm_00073">2.13.6.7 FHS-7 File Creation Date/Time (DTM) 00073</h4>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_8_fhs_8_file_security_st_00074">2.13.6.8 FHS-8 File Security (ST) 00074</h4>
<div class="paragraph">
<p>Definition: This field has the same definition as the corresponding field in the MSH segment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_9_fhs_9_file_nameid_st_00075">2.13.6.9 FHS-9 File Name/ID (ST) 00075</h4>
<div class="paragraph">
<p>Definition: This field can be used by the application processing file. Its use is not further specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_10_fhs_10_file_header_comment_st_00076">2.13.6.10 FHS-10 File Header Comment (ST) 00076</h4>
<div class="paragraph">
<p>Definition: This field contains the free text field, the use of which is not further specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_11_fhs_11_file_control_id_st_00077">2.13.6.11 FHS-11 File Control ID (ST) 00077</h4>
<div class="paragraph">
<p>Definition: This field is used to identify a particular file uniquely. It can be echoed back in FHS-12-reference file control ID.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_12_fhs_12_reference_file_control_id_st_00078">2.13.6.12 FHS-12 Reference File Control ID (ST) 00078</h4>
<div class="paragraph">
<p>Definition: This field contains the value of FHS-11-file control ID when this file was originally transmitted. Not present if this file is being transmitted for the first time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_13_fhs_13_file_sending_network_address_hd_02269">2.13.6.13 FHS-13 File Sending Network Address (HD) 02269</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifier of the network location the message was transmitted from. Identified by an OID or text string (e.g., URI). The reader is referred to the "Report from the Joint W3C/IETF URI Planning Interest Group: Uniform Resource Identifiers (URIs), URLs, and Uniform Resource Names (URNs): Clarifications and Recommendations".<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_14_fhs_14_file_receiving_network_address_hd_02270">2.13.6.14 FHS-14 File Receiving Network Address (HD) 02270</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifier of the network location the message was transmitted to. Identified by an OID or text string. (e.g., URL).</p>
</div>
<div class="paragraph">
<p>This is analogous with the Sending Network Address, however in the receiving role.</p>
</div>
<div class="paragraph">
<p>This field SHOULD only be populated when the underlying communication protocol does not support identification receiving network locations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_15_fsh_15_security_classification_tag_cwe_02429">2.13.6.15 FSH-15 Security Classification Tag (CWE) 02429</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field defines the security classification (as defined by ISO/IEC 2382-8:1998(E/F)/ T-REC-X.812-1995) of an IT resource, in this case the message, which MAY be used to make access control decisions. It is conditionally required when MSH-27 or MSH-28 are used.</p>
</div>
<div class="paragraph">
<p>Conditionality Predicate: Required if FHS-16 or FHS-17 is valued, or any contained MSH-26 is valued, Optional if neither FHS-16 nor FHS-17 or any contained MSH-26 is valued.</p>
</div>
<div class="paragraph">
<p>Use of this field supports the business requirement for declaring the level of confidentiality (classification) for a given message.</p>
</div>
<div class="paragraph">
<p>Note: This field is used to declare the ‘high watermark’, meaning the most restrictive handling that needs to be applied to the message based on its content requiring a certain security classification level and SHOULD be viewed as the v2 equivalent of the document header in CDA, in v3 models, and in FHIR Security Labels on Resources and Bundles. The use of confidentiality codes to classify message content and its inclusion in the high water mark in the header of message content is -described in the Guide to the HL7 Healthcare Privacy and Security Classification System, Release 1, which is platform independent.</p>
</div>
<div class="paragraph">
<p>Refer to <em>Externally-defined HL7 Table 0952 – HL7 Confidentiality Code</em> in Chapter 2C, Code Tables, for suggested values. Use of this table is recommended. The codes in this table are comprehensive, non-overlapping hierarchical codes: Very Restricted &gt; Restricted &gt; Normal &gt; Moderate &gt; Low &gt; Unrestricted. Restrictions to a comprehensive, non-overlapping set of codes is required for purposes of access control system algorithms such as Bell–LaPadula Mode, which isl used to adjudicate access requests against privacy policies.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_16_fsh_16_security_handling_instructions_cwe_02430">2.13.6.16 FSH-16 Security Handling Instructions (CWE) 02430</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field is repeatable and conveys instructions to users and receivers for secure distribution, transmission, and storage; dictate obligations or mandated actions; specify any action prohibited by refrain policy such as dissemination controls; and stipulate the permissible purpose of use of an IT resource.</p>
</div>
<div class="paragraph">
<p>Refer to <em>HL7 Table 0953 – Security Control</em> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_6_17_fsh_17_special_access_restriction_instructions_st_02431">2.13.6.17 FSH-17 Special Access Restriction Instructions (ST) 02431</h4>
<div class="paragraph">
<p>Definition: Used to convey specific instructions about the protection of the patient&#8217;s data , which must be rendered to end users in accordance with patient consent directive, organizational policy, or jurisdictional law. For example, in US law 42 CFR Part 2, disclosed information made with patient consent must include a renderable “Prohibition on re-disclosure” warning (§ 2.32[multiblock footnote omitted]) In addition, organizational policy might require that some or all of the ARV field privacy tag values be rendered to end users, e.g., marking a consult note with “Restricted Confidentiality” or with sensitivity tags such as “VIP” or “EMP” for employee of the organization.</p>
</div>
<div class="paragraph">
<p>This field MAY also be used to specify instructions about the release of information to family and friends (e.g., "Do not release information to patient&#8217;s brother, Adam Everyman"). These instructions MAY be in conjunction with other fields (as elected by the system).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_7_fts_file_trailer_segment">2.13.7 FTS ‑ File Trailer Segment</h3>
<div class="paragraph">
<p>The FTS segment defines the end of a file.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - FTS - File Trailer</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00079</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Batch Count</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Trailer Comment</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_7_0_fts_field_definitions">2.13.7.0 FTS field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_7_1_fts_1_file_batch_count_nm_00079">2.13.7.1 FTS-1 File Batch Count (NM) 00079</h4>
<div class="paragraph">
<p>Definition: This field contains the number of batches contained in this file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_7_2_fts_2_file_trailer_comment_st_00080">2.13.7.2 FTS-2 File Trailer Comment (ST) 00080</h4>
<div class="paragraph">
<p>Definition: The use of this free text field is not further specified.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_8_msa_message_acknowledgment_segment">2.13.8 MSA ‑ Message Acknowledgment segment</h3>
<div class="paragraph">
<p>The MSA segment contains information sent while acknowledging another message.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - MSA[<mark>MSA .anchor]</mark>### - Message Acknowledgment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2..2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70008">0008</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acknowledgment Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..199</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">199=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Control ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00020</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text Message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00021</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expected Sequence Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00022</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delayed Acknowledgment Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00023</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Condition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01827</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Waiting Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70520">0520</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01828</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Waiting Priority</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_8_0_msa_field_definitions">2.13.8.0 MSA field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_8_1_msa_1_acknowledgment_code_id_00018">2.13.8.1 MSA-1 Acknowledgment Code (ID) 00018</h4>
<div class="paragraph">
<p>Definition: This field contains an acknowledgment code, see message processing rules. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70008"><em>HL7 Table 0008 - Acknowledgment Code</em></a> for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_2_msa_2_message_control_id_st_00010">2.13.8.2 MSA-2 Message Control ID (ST) 00010</h4>
<div class="paragraph">
<p>Definition: This field contains the message control ID of the message sent by the sending system. It allows the sending system to associate this response with the message for which it is intended.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_3_msa_3_text_message_00020">2.13.8.3 MSA-3 Text Message 00020</h4>
<div class="paragraph">
<p><strong>Attention: The <em>MSA-3</em> was deprecated as of v 2.4</strong> and the detail was withdrawn and removed from the standard as of v 2.7<strong>. The reader is referred to the ERR segment. The ERR segment allows for richer descriptions of the erroneous conditions.</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_4_msa_4_expected_sequence_number_nm_00021">2.13.8.4 MSA-4 Expected Sequence Number (NM) 00021</h4>
<div class="paragraph">
<p>Definition: This optional numeric field is used in the sequence number protocol.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_5_msa_5_delayed_acknowledgment_type_00022">2.13.8.5 MSA-5 Delayed Acknowledgment Type 00022</h4>
<div class="paragraph">
<p><strong>Attention: The <em>MSA-5</em> was deprecated as of v2.2</strong> and the detail was withdrawn and removed from the standard as of v 2.5.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_6_msa_6_error_condition_00023">2.13.8.6 MSA-6 Error Condition 00023</h4>
<div class="paragraph">
<p><strong>Attention: The <em>MSA-3</em> was deprecated as of v 2.4</strong> and the detail was withdrawn and removed from the standard as of v 2.7<strong>. The reader is referred to the ERR segment. The ERR segment allows for richer descriptions of the erroneous conditions.</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_7_msa_7_message_waiting_number_nm_01827">2.13.8.7 MSA-7 Message Waiting Number (NM) 01827</h4>
<div class="paragraph">
<p>Definition: If present, indicates the number of messages the Acknowledging Application has waiting on a queue for the Requesting Application. These messages would then need to be retrieved via a query. This facilitates receiving applications that cannot receive unsolicited message (i.e., polling).</p>
</div>
<div class="paragraph">
<p>For example, if there are 3 low priority messages, 1 medium priority message and 1 high priority message, the message waiting number would be 5, because that is the total number of messages.</p>
</div>
<div class="paragraph">
<p>Use Case: An application that is playing a "requesting" role has limited network access to a centralized application playing a receiving role. When the requesting application contacts the acknowledging application with a regular update or query message, the acknowledging application replies with the appropriate response message, along with an indication that there are urgent messages waiting. The requesting application submits a query to retrieve the queued messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_8_8_msa_8_message_waiting_priority_id_01828">2.13.8.8 MSA-8 Message Waiting Priority (ID) 01828</h4>
<div class="paragraph">
<p>Definition: If present, indicates that the Sending Application has messages waiting on a queue for the Receiving Application. These messages would then need to be retrieved via a query. This facilitates receiving applications that cannot receive unsolicited messages (i.e., polling). The code specified identifies how important the most important waiting message is (and can govern how soon the receiving application is required to poll for the message).</p>
</div>
<div class="paragraph">
<p>For example, if there are 3 low priority messages, 1 medium priority message and 1 high priority message, the message waiting priority would be 'high', because that is the highest priority of any message waiting.</p>
</div>
<div class="paragraph">
<p>With some applications, there is no guarantee that the sending application will be running. The receiving application is therefore unable to submit unsolicited messages. To mitigate this, a polling approach is used where the receiving application requests any queued messages when it is connected. To avoid the network overhead of continuous polling, the sending application needs a way to indicate that there are queued messages awaiting retrieval. It is also useful to provide an indication of the importance of those messages to indicate how quickly they must be retrieved.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70520"><em>HL7 Table 0520 - Message Waiting Priority</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
<div class="paragraph">
<p>See MSA-7 above for Use Case.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_9_msh_message_header_segment">2.13.9 MSH ‑ Message Header segment</h3>
<div class="paragraph">
<p>The MSH segment defines the intent, source, destination, and some specifics of the syntax of a message.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - MSH[<mark>MSH .anchor]</mark>### - Message Header</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field Separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4..5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encoding Characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70361">0361</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sending Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70362">0362</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sending Facility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70361">0361</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receiving Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70362">0362</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receiving Facility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00007</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of Message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00009</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..199</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Control ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00011</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processing ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequence Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">180=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuation Pointer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2..2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70155">0155</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00015</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accept Acknowledgment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2..2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70155">0155</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Acknowledgment Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3..3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70399">0399</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00017</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Country Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5..15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70211">0211</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00692</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character Set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0609</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00693</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal Language Of Message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3..13</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70356">0356</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01317</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alternate Character Set Handling Scheme</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01598</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Profile Identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01823</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sending Responsible Organization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01824</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receiving Responsible Organization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01825</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sending Network Address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01826</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receiving Network Address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70952">0952</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2429</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Classification Tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70953">0953</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2430</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security Handling Instructions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">28</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2431</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special Access Restriction Instructions</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_9_0_msh_field_definitions">2.13.9.0 MSH field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_9_1_msh_1_field_separator_st_00001">2.13.9.1 MSH-1 Field Separator (ST) 00001</h4>
<div class="paragraph">
<p>Definition: This field contains the separator between the segment ID and the first real field, MSH-2 Encoding Characters. As such it serves as the separator and defines the character to be used as a separator for the rest of the message. Recommended value is | (ASCII 124).</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_2_msh_2_encoding_characters_st_00002">2.13.9.2 MSH-2 Encoding Characters (ST) 00002</h4>
<div class="paragraph">
<p>Definition: This field contains five characters in the following order: the component separator, repetition separator, escape character, subcomponent separator, and truncation character. Recommended values are ^~\&amp; #(ASCII 94, 126, 92, 38, and 35, respectively). See Section <em>2.4.4</em>, "<em>Message delimiters</em>'.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_3_msh_3_sending_application_hd_00003">2.13.9.3 MSH-3 Sending Application (HD) 00003</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field uniquely identifies the sending application among all other applications within the network enterprise. The network enterprise consists of all those applications that participate in the exchange of HL7 messages within the enterprise. Entirely site-defined. E:\\V2\\v2.9 final Nov from Frank\\V29_CH02C_Tables.docx#HL70361[<em>User-defined Table 0361- Application</em>] in Chapter 2C, Code Tables, is used as the user-defined table of values for the first component.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> By site agreement, implementers MAY continue to use <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70300"><em>User-defined Table 0__300 – Namespace ID</em></a> in Chapter 2C, Code Tables, for the first component.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_4_msh_4_sending_facility_hd_00004">2.13.9.4 MSH-4 Sending Facility (HD) 00004</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field further describes the sending application, MSH-3 Sending Application. With the promotion of this field to an HD data type, the usage has been broadened to include not just the sending facility but other organizational entities such as a) the organizational entity responsible for sending application; b) the responsible unit; c) a product or vendor&#8217;s identifier, etc. Entirely site-defined. <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70362"><em>User-defined Table 0362 - Facility</em></a> in Chapter 2C, Code Tables, is used as the HL7 identifier for the user-defined table of values for the first component.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> By site agreement, implementers MAY continue to use <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70300"><em>User-defined Table 0300 – Namespace ID</em></a> in Chapter 2C, Code Tables, for the first component.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_5_msh_5_receiving_application_hd_00005">2.13.9.5 MSH-5 Receiving Application (HD) 00005</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field uniquely identifies the receiving application among all other applications within the network enterprise. The network enterprise consists of all those applications that participate in the exchange of HL7 messages within the enterprise. Entirely site-defined <em><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70361">User-defined Table 0361- Application</a></em> in Chapter 2C, Code Tables, is used as the HL7 identifier for the user-defined table of values for the first component.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: By site agreement, implementers MAY continue to use <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70300"><em>User-defined Table 0300 – Namespace ID</em></a> in Chapter 2C, Code Tables, for the first component.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_6_msh_6_receiving_facility_hd_00006">2.13.9.6 MSH-6 Receiving Facility (HD) 00006</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field identifies the receiving application among multiple identical instances of the application running on behalf of different organizations. <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70362"><em>User-defined Table 0362 - Facilit__y</em></a> in Chapter 2C, Code Tables, is used as the HL7 identifier for the user-defined table of values for the first component. Entirely site‑defined.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: By site agreement, implementers MAY continue to use <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70300"><em>User-defined Table 0300 – Namespace ID</em></a> in Chapter 2C, Code Tables, for the first component.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_7_msh_7_datetime_of_message_dtm_00007">2.13.9.7 MSH-7 Date/Time of Message (DTM) 00007</h4>
<div class="paragraph">
<p>Definition: This field contains the date/time that the sending system created the message. If the time zone is specified, it will be used throughout the message as the default time zone.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> This field was made required in version 2.4. Messages with versions prior to 2.4 are not required to value this field. This usage supports backward compatibility.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_8_msh_8_security_st_00008">2.13.9.8 MSH-8 Security (ST) 00008</h4>
<div class="paragraph">
<p>Definition: In some applications of HL7, this field is used to implement security features. For codified expression of security tags use MSH-26 through MSH-29.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_9_msh_9_message_type_msg_00009">2.13.9.9 MSH-9 Message Type (MSG) 00009</h4>
<div class="paragraph">
<p>Components: &lt;Message Code (ID)&gt; ^ &lt;Trigger Event (ID)&gt; ^ &lt;Message Structure (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the message type, trigger event, and the message structure ID for the message.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70076"><em>HL7 Table 0076 - Message Type</em></a> in Chapter 2C, Code Tables, for valid values for the message type code. This table contains values such as ACK, ADT, ORM, ORU etc.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70003"><em>HL7 Table 0003 – Event Type</em></a> in Chapter 2C, Code Tables, for valid values for the trigger event. This table contains values like A01, O01, R01 etc.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70354"><em>HL7</em> <em>Table 0354 - Message Structure</em></a> in Chapter 2C, Code Tables, for valid values for the message structure. This table contains values such as ADT_A01, ORU_R01, SIU_S12, etc.</p>
</div>
<div class="paragraph">
<p>The receiving system uses this field to recognize the data segments, and possibly, the application to which to route this message. For certain queries, which could have more than a single response event type, the second component MAY, in the response message, vary to indicate the response event type. See the discussion of the display query variants in chapter 5.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_10_msh_10_message_control_id_st_00010">2.13.9.10 MSH-10 Message Control ID (ST) 00010</h4>
<div class="paragraph">
<p>Definition: This field contains a number or other identifier that uniquely identifies the message. The receiving system echoes this ID back to the sending system in the Message acknowledgment segment (MSA).</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_11_msh_11_processing_id_pt_00011">2.13.9.11 MSH-11 Processing ID (PT) 00011</h4>
<div class="paragraph">
<p>Components: &lt;Processing ID (ID)&gt; ^ &lt;Processing Mode (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field is used to decide whether to process the message as defined in HL7 Application (level 7) Processing rules.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_12_msh_12_version_id_vid_00012">2.13.9.12 MSH-12 Version ID (VID) 00012</h4>
<div class="paragraph">
<p>Components: &lt;Version ID (ID)&gt; ^ &lt;Internationalization Code (CWE)&gt; ^ &lt;International Version ID (CWE)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Internationalization Code (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for International Version ID (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field is matched by the receiving system to its own version to be sure the message will be interpreted correctly. Beginning with Version 2.3.1, it has two additional "internationalization" components, for use by HL7 international affiliates. The &lt;internationalization code&gt; is CE data type (using the ISO country codes where appropriate) which represents the HL7 affiliate. The &lt;internal version ID&gt; is used if the HL7 Affiliate has more than a single 'local' version associated with a single US version. The &lt;international version ID&gt; has a CE data type, since the table values vary for each HL7 Affiliate. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70104"><em>HL7 Table 0104 – Version ID</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_13_msh_13_sequence_number_nm_00013">2.13.9.13 MSH-13 Sequence Number (NM) 00013</h4>
<div class="paragraph">
<p>Definition: A non‑delete indicator value in this field implies that the sequence number protocol is in use. This numeric field is incremented by one for each subsequent value.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_14_msh_14_continuation_pointer_st_00014">2.13.9.14 MSH-14 Continuation Pointer (ST) 00014</h4>
<div class="paragraph">
<p>Definition: This field is used to define continuations in application-specific ways.</p>
</div>
<div class="paragraph">
<p>Only the sender of a fragmented message values this field.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_15_msh_15_accept_acknowledgment_type_id_00015">2.13.9.15 MSH-15 Accept Acknowledgment Type (ID) 00015</h4>
<div class="paragraph">
<p>Definition: This field identifies the conditions under which accept acknowledgments are required to be returned in response to this message. Conditionality: Either both MSH-15 and MSH-16 SHALL be populated OR both SHALL be empty. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70155"><em>HL7 Table 0155 - Accept/Application Acknowledgment Conditions</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_16_msh_16_application_acknowledgment_type_id_00016">2.13.9.16 MSH-16 Application Acknowledgment Type (ID) 00016</h4>
<div class="paragraph">
<p>Definition: This field contains the conditions under which application acknowledgments are required to be returned in response to this message. Either both MSH-15 and MSH-16 SHALL be populated OR both SHALL be empty. Required for enhanced acknowledgment mode.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70155"><em>HL7 Table 0155 - Accept/Application Acknowledgment Conditions</em></a> in Chapter 2C, Code Tables, for valid values for MSH-15 Accept Acknowledgment Type and MSH-16 Application Acknowledgment Type.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If <em>MSH-15-accept acknowledgment type</em> and <em>MSH-16-application acknowledgment type</em> are omitted (or are both empty ), the original acknowledgment mode rules are used.-</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_17_msh_17_country_code_id_00017">2.13.9.17 MSH-17 Country Code (ID) 00017</h4>
<div class="paragraph">
<p>Definition: This field contains the country of origin for the message. It will be used primarily to specify default elements, such as currency denominations. The values to be used are those of ISO 3166,.<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>. The ISO 3166 table has three separate forms of the country code: HL7 specifies that the 3-character (alphabetic) form be used for the country code.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70399"><em>External Table 0399 - Country Code</em></a> in Chapter 2C, Code Tables, for the 3-character codes as defined by ISO 3166-1.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_18_msh_18_character_set_id_00692">2.13.9.18 MSH-18 Character Set (ID) 00692</h4>
<div class="paragraph">
<p>Definition: This field contains the character set for the entire message. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70211"><em>HL7 Table 0211 - Alternate Character Sets</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
<div class="paragraph">
<p>An HL7 message uses field MSH-18 Character Set to specify the character set(s) in use. Valid values for this field are specified in <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70211"><em>HL7 Table 0211 - Alternate Character Sets</em></a>. MSH-18 Character Set MAY be left blank, or MAY contain one or more values delimited by the repetition separator. If the field is left blank, the character set in use is understood to be the 7-bit ASCII set, decimal 0 through decimal 127 (hex 00 through hex 7F). This default value MAY also be explicitly specified as <strong>ASCII</strong>.</p>
</div>
<div class="paragraph">
<p>More than one character set MAY be used in a message. The first occurrence, if supplied, of the MSH-18 SHALL indicate the default encoding of the message. The second and subsequent occurrences of MSH-18-character set are used to specify additional character sets that are used.</p>
</div>
<div class="paragraph">
<p>The repetitions of this field to specify different character sets apply only to fields of the FT, ST and TX data types. See also section <em>2.6.3,</em> "<em>Escape sequences supporting multiple character sets</em>".</p>
</div>
<div class="paragraph">
<p>Any encoding system, single-byte or multi-byte, MAY be specified as the default character encoding in MSH-18 Character Set. If the default encoding is other than 7-bit ASCII, sites SHALL document this usage in the dynamic conformance profile or other implementation agreement. This is particularly effective in promoting interoperability between nations belonging to different HL7 Affiliates, while limiting the amount of testing required to determine the encoding of a message.</p>
</div>
<div class="paragraph">
<p>By using built-in language functions for string and character manipulation, parsers and applications need not be concerned whether a single or double byte character set is in use, provided it is applied to the entire message. Using a built in function to extract the fourth CHARACTER will always yield the field separator character, regardless of coding set. On the other hand, if the parser looks at the fourth BYTE, it is then limited to single byte character sets, since the fourth byte would contain the low order 8 bits of the character S in a double-byte system.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> When describing encoding rules, this standard always speaks in terms of character position, not byte offset. Similarly, comparisons SHOULD be done on character values, not their byte equivalents. For this reason, delimiter characters SHOULD always have representation in the standard 7-bit ASCII character set, regardless of the actual character set being used, so that a search for the character CR (carriage return) can be performed.</p>
</div>
<div class="paragraph">
<p>a) if the field is not valued, the default single-byte character set (ASCII ("ISO IR6")) SHOULD be assumed. No other character sets are allowed in the message.</p>
</div>
<div class="paragraph">
<p>b) if the field repeats, but the first element is empty(I.e. unvalued), the single-byte ASCII ("ISO IR6") is assumed as the default character set.</p>
</div>
<div class="paragraph">
<p>c) elements in the remainder of the sequence (i.e., elements 2..n) are alternate character sets that MAY be used.</p>
</div>
<div class="paragraph">
<p>The reader is referred to the following references for background information on character sets and encodings:</p>
</div>
<div class="paragraph">
<p>Unicode Technical Report #17 - Character Encoding Model (<a href="http://www.unicode.org/unicode/reports/tr17/" class="bare">http://www.unicode.org/unicode/reports/tr17/</a>)</p>
</div>
<div class="paragraph">
<p>Extensible Markup Language (XML) 1.0 (Second Edition), Section F Autodetection of Character Encodings (<a href="http://www.w3.org/TR/REC-xml#sec-guessing" class="bare">http://www.w3.org/TR/REC-xml#sec-guessing</a>)</p>
</div>
<div class="sect4">
<h5 id="_2_13_9_18_1_alphabetic_languages_other_than_english">2.13.9.18.1 Alphabetic Languages Other Than English</h5>
<div class="paragraph">
<p>The first occurrence of link:#_MSH-18___Character Set   (ID)   006[MSH-18 Character Set] MAY reference a character set other than 7-bit ASCII. Western alphabetic languages other than English are accommodated by the ISO 8859 series of character encodings. For example, if MSH-18 Character Set is valued <strong>8859/1</strong>, the ISO character set commonly known as "8-bit ASCII" is in use in the message. This includes all values from decimal 0 through decimal 127 (hex 00 through hex 7F), plus an additional 128 values from decimal 128 through decimal 255 (hex 80 through hex FF). The latter values include the accented Latin letters used in common Western European languages, plus some symbolic values such as the paragraph mark (¶) and the trademark symbol (™).</p>
</div>
<div class="paragraph">
<p>Other ISO character sets in the 8859 series accommodate non-Latin character sets. For example, MSH-18 Character Set could be valued <strong>8859/2</strong> to specify the default character encoding in use in Eastern Europe, while <strong>8859/6</strong> indicates the use of the Arabic alphabet.</p>
</div>
<div class="paragraph">
<p>The ASCII and ISO character sets all allow the specification of any character in a single byte.</p>
</div>
</div>
<div class="sect4">
<h5 id="_2_13_9_18_2_non_alphabetic_languages">2.13.9.18.2 Non-Alphabetic Languages</h5>
<div class="paragraph">
<p>HL7 Table 0211 includes values for languages that do not use alphabets. These include ideographic written languages, such as the Japanese Graphic Character Set which is specified as <strong>ISO IR87</strong>.</p>
</div>
<div class="paragraph">
<p>There are non-alphabetic encoding systems for which HL7 Table 0211 does not provide specific entries. One of these is the Traditional Chinese character set, CNS 11643, which is used in Taiwan. This character set can, however, be encoded using the Unicode Standard, which does have a value in HL7 0211.</p>
</div>
<div class="paragraph">
<p>The Unicode Standard (which is now coordinated with ISO 10646) permits the specification of multiple-byte characters in a much larger range than is available in a single-byte ASCII or ISO character set. Unicode Version 3.1 (<a href="http://www.unicode.org" class="bare">http://www.unicode.org</a>) includes almost 100,000 characters, including many Chinese, Japanese, and Korean ideographs. This is particularly valuable to implementers who need to encode messages in more than one character set, as for example to accommodate the use of both alphabetic and ideographic characters.</p>
</div>
<div class="paragraph">
<p>Non-alphabetic encoding systems do not restrict characters to a length of one byte. Unicode incorporates three encoding forms that allow for the use of multiple bytes to encode a message. The most flexible Unicode encoding form is UTF-8, which uses high-order bits to specify the number of bytes (from one to six) used to encode each character.</p>
</div>
<div class="paragraph">
<p>Interestingly, Unicode UTF-8 incorporates the 7-bit ASCII character set as single-byte codes. This means that a message encoded in 7-bit ASCII can be submitted to a destination using Unicode UTF- 8 with no modification.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_19_msh_19_principal_language_of_message_cwe_00693">2.13.9.19 MSH-19 Principal Language of Message (CWE) 00693</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the principal language of the message. Codes come from ISO 639. Refer to Table 0609 - Principal Language Of Message in Chapter 2C for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_20_msh_20_alternate_character_set_handling_scheme_id_01317">2.13.9.20 MSH-20 Alternate Character Set Handling Scheme (ID) 01317</h4>
<div class="paragraph">
<p>Definition: When any alternative character sets are used (as specified in the second or later iterations of link:#<em>MSH-18___Character Set   (ID)   006[MSH-18 Character Set]), and if any special handling scheme is needed, this component is to specify the scheme used, according to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70356">_HL7 Table 0356- Alternate Character Set Handling Scheme</em></a> as defined in Chapter 2C, Code Tables,.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_21_msh_21_message_profile_identifier_ei_01598">2.13.9.21 MSH-21 Message Profile Identifier (EI) 01598</h4>
<div class="paragraph">
<p>Components: &lt;Entity Identifier (ST)&gt; ^ &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Sites MAY use this field to assert adherence to, or reference, a message profile. Message profiles contain detailed explanations of grammar, syntax, and usage for a particular message or set of messages. See section 2B, "Conformance Using Message Profiles".</p>
</div>
<div class="paragraph">
<p>Repetition of this field allows more flexibility in creating and naming message profiles. Using repetition, this field can identify a set of message profiles that the message conforms to. For example, the first repetition could reference a vendor&#8217;s message profile. The second could reference another compatible provider&#8217;s profile or a later version of the first vendor profile.</p>
</div>
<div class="paragraph">
<p>As of v2.5, the HL7 message profile identifiers might be used for conformance claims and/or publish/subscribe systems. Refer to sections 2B.1.1"Message profile identifier" and 2.B.1.2, "Message profile publish/subscribe topics" for details of the message profile identifiers. Refer to sections 2.B.4.1, "Static definition identifier" and 2.B.4.2, "Static definition publish/subscribe topics" for details of the static definition identifiers.</p>
</div>
<div class="paragraph">
<p>Prior to v2.5, the field was called Conformance Statement ID. For backward compatibility, the Conformance Statement ID can be used here. Examples of the use of Conformance Statements appear in Chapter 5, "Query."</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_22_msh_22_sending_responsible_organization_xon_01823">2.13.9.22 MSH-22 Sending Responsible Organization (XON) 01823</h4>
<div class="paragraph">
<p>Components: &lt;Organization Name (ST)&gt; ^ &lt;Organization Name Type Code (CWE)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;Assigning Authority (HD)&gt; ^ &lt;Identifier Type Code (ID)&gt; ^ &lt;Assigning Facility (HD)&gt; ^ &lt;Name Representation Code (ID)&gt; ^ &lt;Organization Identifier (ST)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Organization Name Type Code (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Authority (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Facility (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Business organization that originated and is accountable for the content of the message.</p>
</div>
<div class="paragraph">
<p>Currently, MSH provides fields to transmit both sending/receiving applications and facilities (MSH.3 – MSH.6). However, these levels of organization do not necessarily relate to or imply a legal entity such as a business organization. As such, multiple legal entities (organizations) mightshare a service bureau, with the same application and facility identifiers. Another level of detail is required to delineate the various organizations using the same service bureau.</p>
</div>
<div class="paragraph">
<p>Therefore, the Sending Responsible Organization field provides a complete picture from the application level to the overall business level. The Business Organization represents the legal entity responsible for the contents of the message.</p>
</div>
<div class="paragraph">
<p>Use Case #1: A centralized system responsible for recording and monitoring instances of communicable diseases enforces a stringent authentication protocol with external applications that have been certified to access its information base. In order to allow message exchange, the centralized system mandates that external applications must provide the identity of the business organization sending the message (<strong>Sending Responsible Organization</strong>), the organization it is sending the message to (<strong>Receiving Responsible Organization</strong>, in this case the "owner" of the communicable diseases system), the network address from which the message has originated (<strong>Sending Network Address</strong>), the network address the message is being transmitted to (<strong>Receiving Network Address</strong>). The organization responsible for protecting the information stored within the communicable disease system requires this authentication due to the sensitive nature of the information it contains.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_23_msh_23_receiving_responsible_organization_xon_01824">2.13.9.23 MSH-23 Receiving Responsible Organization (XON) 01824</h4>
<div class="paragraph">
<p>Components: &lt;Organization Name (ST)&gt; ^ &lt;Organization Name Type Code (CWE)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;Assigning Authority (HD)&gt; ^ &lt;Identifier Type Code (ID)&gt; ^ &lt;Assigning Facility (HD)&gt; ^ &lt;Name Representation Code (ID)&gt; ^ &lt;Organization Identifier (ST)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Organization Name Type Code (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Authority (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Facility (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Business organization that is the intended receiver of the message and is accountable for acting on the data conveyed by the transaction.</p>
</div>
<div class="paragraph">
<p>This field has the same justification as the Sending Responsible Organization except in the role of the Receiving Responsible Organization. The receiving organization has the legal responsibility to act on the information in the message.</p>
</div>
<div class="paragraph">
<p>See MSH-22 above for Use Case.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_24_msh_24_sending_network_address_hd_01825">2.13.9.24 MSH-24 Sending Network Address (HD) 01825</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifier of the network location the message was transmitted from. Identified by an OID or text string (e.g., URI). The reader is referred to the "Report from the Joint W3C/IETF URI Planning Interest Group: Uniform Resource Identifiers (URIs), URLs, and Uniform Resource Names (URNs): Clarifications and Recommendations".<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></p>
</div>
<div class="paragraph">
<p>As with the Sending/Receiving Responsible Organization, the Sending Network Address provides a more detailed picture of the source of the message. This information is lower than the application layer, but is often useful/necessary for routing and identification purposes. This field SHOULD only be populated when the underlying communication protocol does not support identification of sending network locations.</p>
</div>
<div class="paragraph">
<p>An agreement about the specific values and usage must exist among messaging partners. Use Case:</p>
</div>
<div class="paragraph">
<p>Dr. Hippocrates works for the ''Good Health Clinic" (Sending facility) with a laptop running application XYZ (Sending App). He needs to talk to the provincial pharmacy system. He dials in and is assigned a network address. He then sends a message to the pharmacy system, which transmits a response back to him. Because the underlying network protocol does not have a place to communicate the sender and receiver network addresses, it therefore requires these addresses to be present in a known position in the payload.</p>
</div>
<div class="paragraph">
<p>There might be many doctors running application XYZ. In addition, the network address assigned to the laptop might change with each dial-in. This means there is not a 1..1 association between either the facility or the application and the network address.</p>
</div>
<div class="paragraph">
<p>MSH||RX|GHC|||||OMP<sup>O09</sup>OMP_O09||||||||||||||||05782|</p>
</div>
<div class="paragraph">
<p>Example 1: The Lone Tree Island satellite clinic transmits a notification of patient registration to its parent organization Community Health and Hospitals. The communication protocol does not support the identification of sending network location, so the sending network location is identified in the message by using its enterprise-wide network identifier "HNO2588".</p>
</div>
<div class="paragraph">
<p>MSH||Reg|Lone|||||ADT<sup>A04</sup>ADT_A04||||||||||||||||HN02588|</p>
</div>
<div class="paragraph">
<p>Example 2: The Stone Mountain satellite clinic transmits a notification of patient registration to its parent organization Community Health and Hospitals. The sending network location is identified by using its URI.</p>
</div>
<div class="paragraph">
<p>MSH||Reg|Stone|||||ADT<sup>A04</sup>ADT_A04|||||||||||||||| <sup><a href="ftp://www.goodhealth.org/somearea/someapp" class="bare">ftp://www.goodhealth.org/somearea/someapp</a></sup>URI|</p>
</div>
<div class="paragraph">
<p>Example 3: The Three Rivers satellite clinic transmits a notification of patient registration to its parent organization Community Health and Hospitals. The sending network location is identified by using its Ipv4 address, port 5123 at node 25.152.27.69. The following example shows how to represent a port and DNS address using HD as the scheme</p>
</div>
<div class="paragraph">
<p>MSH||Reg|TRC||||| ADT<sup>A04</sup>ADT_A04||||||||||||||||5123<sup>25.152.27.69</sup>DNS|</p>
</div>
<div class="paragraph">
<p>Example 4: The Bayview satellite clinic transmits a notification of patient registration to its parent organization Community Health and Hospitals. The sending network location is identified by using "4086::132:2A57:3C28" its IPv6 address.</p>
</div>
<div class="paragraph">
<p>MSH||REG|BAY||||| ADT<sup>A04</sup>ADT_A04||||||||||||||||<sup>4086::132:2A57:3C28</sup>IPv6|</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_25_msh_25_receiving_network_address_hd_01826">2.13.9.25 MSH-25 Receiving Network Address (HD) 01826</h4>
<div class="paragraph">
<p>Components: &lt;Namespace ID (IS)&gt; ^ &lt;Universal ID (ST)&gt; ^ &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifier of the network location the message was transmitted to. Identified by an OID or text string (e.g., URL).</p>
</div>
<div class="paragraph">
<p>This is analogous with the Sending Network Address, however in the receiving role.</p>
</div>
<div class="paragraph">
<p>This field SHOULD only be populated when the underlying communication protocol does not support identification receiving network locations</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_26_msh_26_security_classification_tag_cwe_2429">2.13.9.26 MSH-26 Security Classification Tag (CWE) 2429</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field defines the security classification (as defined by ISO/IEC 2382-8:1998(E/F)/ T-REC-X.812-1995) of an IT resource, in this case the message, which MAY be used to make access control decisions.</p>
</div>
<div class="paragraph">
<p>Conditionality Predicate: Required if MSH-27 or MSH-28 is valued, Optional if neither MSH-27 nor MSH-28 is valued."Use of this field supports the business requirement for declaring the level of confidentiality (classification) for a given message.</p>
</div>
<div class="paragraph">
<p>Note: This field is used to declare the ‘high watermark’, meaning the most restrictive handling that needs to be applied to the message based on its content requiring a certain security classification level and SHOULD be viewed as the v2 equivalent of the document header in CDA, in v3 models, and in FHIR Security Labels</p>
</div>
<div class="paragraph">
<p>the high water mark in the header of message content is -described in the Guide to the HL7 Healthcare Privacy and Security Classification System, Release 1, which is platform independent.</p>
</div>
<div class="paragraph">
<p>Refer to <em>Externally-defined HL7 Table 0952 – HL7 Confidentiality Code</em> in Chapter 2C, Code Tables, for suggested values. Use of this table is recommended. The codes in this table are comprehensive, non-overlapping hierarchical codes: Very Restricted &gt; Restricted &gt; Normal &gt; Moderate &gt; Low &gt; Unrestricted. Restrictions to a comprehensive, non-overlapping set of codes is required for purposes of access control system algorithms such as Bell–LaPadula Mode, which is used to adjudicate access requests against privacy policies.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_27_msh_27_security_handling_instructions_cwe_2430">2.13.9.27 MSH-27 Security Handling Instructions (CWE) 2430</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field is repeatable and conveys instructions to users and receivers for secure distribution, transmission, and storage; dictate obligations or mandated actions; specify any action prohibited by refrain policy such as dissemination controls; and stipulate the permissible purpose of use of an IT resource.</p>
</div>
<div class="paragraph">
<p>Refer to <em>Externally define HL7 Table 0953 – Security Control</em> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_9_28_msh_28_special_access_restriction_instructions_st_2431">2.13.9.28 MSH-28 Special Access Restriction Instructions (ST) 2431 ?</h4>
<div class="paragraph">
<p>Definition: Used to convey specific instructions about the protection of the patient&#8217;s data, which must be rendered to end users in accordance with patient consent directive, organizational policy, or jurisdictional law. For example, in US law 42 CFR Part 2, disclosed information made with patient consent must include a renderable “Prohibition on re-disclosure” warning (§ 2.32[multiblock footnote omitted]) In addition, organizational policy might require that some or all of the ARV field privacy tag values be rendered to end users, e.g., marking a consult note with “Restricted Confidentiality” or with sensitivity tags such as “VIP” or “EMP” for employee of the organization.</p>
</div>
<div class="paragraph">
<p>This field MAY also be used to specify instructions about the release of information to family and friends (e.g., "Do not release information to patient&#8217;s brother, Adam Everyman"). These instructions MAY be in conjunction with other fields (as elected by the system).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_10_nte_notes_and_comments_segment">2.13.10 NTE ‑ Notes and Comments segment</h3>
<div class="paragraph">
<p>The NTE segment is defined here for inclusion in messages defined in other chapters. It is commonly used for sending notes and comments.</p>
</div>
<div class="paragraph">
<p>The work groups define the meaning of the NTE segments within the context of the messages in their chapters. For each NTE, the description in the message attribute table SHOULD include an indication of the segment associated with the NTE, for example "Notes and Comments for the PID".</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
While sending of segments with no content has been historically used for display messages to indicate blank lines this is not best practice. Senders SHOULD NOT send empty NTEs to indicate blank lines. When blank lines are required senders SHOULD use the functionality of the FT datatype in section <a href="#formatting-codes">Formatting codes</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>HL7 Attribute Table - NTE - Notes and Comments</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM #</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00096</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set ID - NTE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1..1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70105">0105</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00097</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source of Comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00098</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70364">0364</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01318</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comment Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00224</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entered By</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00661</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entered Date/Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effective Start Date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02185</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expiration Date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70611">0611</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03495</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coded Comment</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_10_0_nte_field_definitions">2.13.10.0 NTE field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_10_1_nte_1_set_id_nte_si_00096">2.13.10.1 NTE-1 Set ID ‑ NTE (SI) 00096</h4>
<div class="paragraph">
<p>Definition: This field MAY be used where multiple NTE segments are included in a message. Their numbering must be described in the application message definition.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_2_nte_2_source_of_comment_id_00097">2.13.10.2 NTE-2 Source of Comment (ID) 00097</h4>
<div class="paragraph">
<p>Definition: This field is used when source of comment must be identified. This table MAY be extended locally during implementation. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70105"><em>HL7 Table 0105 - Source of Com__ment</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_3_nte_3_comment_ft_00098">2.13.10.3 NTE-3 Comment (FT) 00098</h4>
<div class="paragraph">
<p>Definition: This field contains the comment contained in the segment.</p>
</div>
<div class="paragraph">
<p>Conditionality Predicate: In support of backwards compatibility, when NTE-9 is populated, the sending system SHALL also populate a human-readable version of the comment in NTE-3. When NTE-9 is not populated then NTE-3 MAY be populated.</p>
</div>
<div class="paragraph">
<p><strong>Note: NTE-3 has been left blank for the use cases where legacy systems are sending a blank NTE as a line feed.</strong></p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> As of v2.2, this field uses the FT rather than a TX data type. Since there is no difference between an FT data type without any embedded formatting commands, and a TX data type, this change is compatible with the previous version.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_4_nte_4_comment_type_cwe_01318">2.13.10.4 NTE-4 Comment Type (CWE) 01318</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains a value to identify the type of comment text being sent in the specific comment record. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70364"><em>User-Defined Table 0364 - Comment Type</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
<div class="paragraph">
<p>Note: A field already exists on the NTE record that identifies the Sources of Comment (e.g., ancillary, placer, other). However some applications need to support other types of comment text (e.g., instructions, reason, remarks, etc.). A separate NTE segment can be used for each type of comment (e.g., instructions are on one NTE and remarks on another NTE).</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_5_nte_5_entered_by_xcn_00224">2.13.10.5 NTE-5 Entered By (XCN) 00224</h4>
<div class="paragraph">
<p>Components: &lt;Person Identifier (ST)&gt; ^ &lt;Family Name (FN)&gt; ^ &lt;Given Name (ST)&gt; ^ &lt;Second and Further Given Names or Initials Thereof (ST)&gt; ^ &lt;Suffix (e.g., JR or III) (ST)&gt; ^ &lt;Prefix (e.g., DR) (ST)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ <strong>&lt;DEPRECATED-Source Table (CWE)&gt;</strong> ^ &lt;Assigning Authority (HD)&gt; ^ &lt;Name Type Code (ID)&gt; ^ &lt;Identifier Check Digit (ST)&gt; ^ &lt;Check Digit Scheme (ID)&gt; ^ &lt;Identifier Type Code (ID)&gt; ^ &lt;Assigning Facility (HD)&gt; ^ &lt;Name Representation Code (ID)&gt; ^ &lt;Name Context (CWE)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;Name Assembly Order (ID)&gt; ^ &lt;Effective Date (DTM)&gt; ^ &lt;Expiration Date (DTM)&gt; ^ &lt;Professional Suffix (ST)&gt; ^ &lt;Assigning Jurisdiction (CWE)&gt; ^ &lt;Assigning Agency or Department (CWE)&gt; ^ &lt;Security Check (ST)&gt; ^ &lt;Security Check Scheme (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Family Name (FN): &lt;Surname (ST)&gt; &amp; &lt;Own Surname Prefix (ST)&gt; &amp; &lt;Own Surname (ST)&gt; &amp; &lt;Surname Prefix from Partner/Spouse (ST)&gt; &amp; &lt;Surname from Partner/Spouse (ST)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Source Table (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Authority (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Facility (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Name Context (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Jurisdiction (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Agency or Department (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains the identity of the person who actually keyed the comment into the application. It provides an audit trail in case the comment is entered incorrectly and the ancillary department needs to clarify the comment. By local agreement, either the ID number or name component MAY be omitted.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_6_nte_6_entered_datetime_dtm_00661">2.13.10.6 NTE-6 Entered Date/Time (DTM) 00661</h4>
<div class="paragraph">
<p>Definition: This field contains the actual date the comment was keyed into the application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_7_nte_7_effective_start_date_dtm_01004">2.13.10.7 NTE-7 Effective Start Date (DTM) 01004</h4>
<div class="paragraph">
<p>Definition: This field contains the date the comment becomes or became effective.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_8_nte_8_expiration_date_dtm_02185">2.13.10.8 NTE-8 Expiration Date (DTM) 02185</h4>
<div class="paragraph">
<p>Definition: This field contains the date the comment becomes or became non-effective.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_10_9_nte_9_coded_comment_cwe_03495">2.13.10.9 NTE-9 Coded Comment (CWE) 03495</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This field contains a value to identify a codified comment being sent in the specific comment record. If this field is valued, NTE-3 will be populated with text from this field. In support of backwards compatibility, when NTE-9 is populated, the sending system SHALL also populate a human-readable version of the comment in NTE-3. Refer to Table 0611 - Coded Comment in Chapter 2C for valid values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_11_ovr_override_segment">2.13.11 OVR – Override segment</h3>
<div class="paragraph">
<p>Definition: This segment allows a sender to override specific receiving application&#8217;s business rules to allow for processing of a message that would normally be rejected or ignored.</p>
</div>
<div class="paragraph">
<p>In many instances, business rules will be set as guidelines relative to patient care. In some instances it is in the patient&#8217;s better interest to circumvent these guidelines. In other cases, business rules might exist to support normal process flow, but which couldbe bypassed or ignored under certain special circumstances. This segment is linked to the proposed ERR segment changes in that the first attempt to process a transaction that violates a business rule could result in an error that must be overridden. The ERR provides a mechanism to identify errors that MAY be overridden, as well as the allowed override codes.</p>
</div>
<div class="paragraph">
<p>Use case #1: A patient has received a prescription with a duration of 30 days and receives the full amount at their pharmacy. While at home the patient accidentally spills the container and spoils a significant proportion of the prescription. The patient returns to their pharmacy and explains the situation to the pharmacy technician. The technician consults with their supervising pharmacist. Knowing the patient, the pharmacist decides to override the business rule stating that the dispensed amount for a prescription can not exceed the prescribed amount. In recording the decision, the pharmacy technician specifies that the <strong>Override Type</strong> is a "Compassionate Refill" and that the <strong>Override Code</strong>, or reason for the override, is "Spoilage". The technician also provides <strong>Override Comments</strong> to provide an explanation of the situation for future reference. While recording the decision, the technician&#8217;s user ID is automatically stored in an <strong>Override Recorded By</strong> field. The pharmacist&#8217;s ID is stored in the <strong>Override Responsible Provider</strong> field.</p>
</div>
<div class="paragraph">
<p>Use case #2:A hospital wishes to submit an invoice to an insurer who is providing secondary coverage. The invoice is being submitted over a week after the service was performed, which is outside the insurer&#8217;s normal accept time window. The insurer would normally reject the invoice. However, the submitter includes an <strong>Override Type</strong> of "late submission" as well as an <strong>Override Code</strong> indicating that the invoice is late due to delays with the primary payor. The secondary insurer examines the override reason and accepts the invoice.</p>
</div>
<div class="paragraph">
<p>Usage Note: The override segment SHOULD be included in messages adjacent to the segment(s) containing the information that would trigger the business rule(s) that needs to be overridden. The segment SHOULD be optional (you shouldn&#8217;t always need to override business rules), and SHOULD be allowed to repeat in circumstances where there can be more than one business rule overridden at the same time. Committees MAY wish to provide suggested values for override types or codes for use with the OVR segment in different messages.</p>
</div>
<div class="paragraph">
<p>The following is an example of how the OVR segment might be used in a dispense message (RDS_O13):</p>
</div>
<div class="paragraph">
<p>MSH PID PV1 \{ORC RXE {RXR} RXD {RXR} &lt;RXC&gt; &lt;NTE&gt; &lt;FT1&gt; &lt;OVR&gt;}</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – OVR – Override Segment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70518">0518</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01829</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Rule Override Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70521">0521</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01830</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Rule Override Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01831</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override Comments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01832</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override Entered By</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01833</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override Authorized By</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_11_0_ovr_field_definitions">2.13.11.0 OVR field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_11_1_ovr_1_business_rule_override_type_cwe_01829">2.13.11.1 OVR-1 Business Rule Override Type (CWE) 01829</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifies what type of business rule override is being performed. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70518"><em>User-defined Table 0518 - Override Type</em></a> in Chapter 2C, Code Tables, for suggested values. Given that an application provides end users with the ability to override business rules, there must be a way to communicate what business rule is being overridden.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_11_2_ovr_2_business_rule_override_code_cwe_01830">2.13.11.2 OVR-2 Business Rule Override Code (CWE) 01830</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Indicates the reason for the business rule override. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70521"><em>User-defined Table 0521 – Override Code</em></a> in Chapter 2C, Code Tables, for suggested values.</p>
</div>
<div class="paragraph">
<p>If users are allowed to override business rules in an application, the user will typically need to provide a reason why the rule is being overridden. The Override Code field in this segment will provide the mechanism to transmit a coded reason.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_11_3_ovr_3_override_comments_tx_01831">2.13.11.3 OVR-3 Override Comments (TX) 01831</h4>
<div class="paragraph">
<p>Definition: Additional descriptive comments detailing the circumstances of the override.</p>
</div>
<div class="paragraph">
<p>When overriding a business rule there might be special circumstances that require a further explanation of the override action. The Override Comments field will allow users to provide more specific information in a free text format.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_11_4_ovr_4_override_entered_by_xcn_01832">2.13.11.4 OVR-4 Override Entered By (XCN) 01832</h4>
<div class="paragraph">
<p>Components: &lt;Person Identifier (ST)&gt; ^ &lt;Family Name (FN)&gt; ^ &lt;Given Name (ST)&gt; ^ &lt;Second and Further Given Names or Initials Thereof (ST)&gt; ^ &lt;Suffix (e.g., JR or III) (ST)&gt; ^ &lt;Prefix (e.g., DR) (ST)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ <strong>&lt;DEPRECATED-Source Table (CWE)&gt;</strong> ^ &lt;Assigning Authority (HD)&gt; ^ &lt;Name Type Code (ID)&gt; ^ &lt;Identifier Check Digit (ST)&gt; ^ &lt;Check Digit Scheme (ID)&gt; ^ &lt;Identifier Type Code (ID)&gt; ^ &lt;Assigning Facility (HD)&gt; ^ &lt;Name Representation Code (ID)&gt; ^ &lt;Name Context (CWE)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;Name Assembly Order (ID)&gt; ^ &lt;Effective Date (DTM)&gt; ^ &lt;Expiration Date (DTM)&gt; ^ &lt;Professional Suffix (ST)&gt; ^ &lt;Assigning Jurisdiction (CWE)&gt; ^ &lt;Assigning Agency or Department (CWE)&gt; ^ &lt;Security Check (ST)&gt; ^ &lt;Security Check Scheme (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Family Name (FN): &lt;Surname (ST)&gt; &amp; &lt;Own Surname Prefix (ST)&gt; &amp; &lt;Own Surname (ST)&gt; &amp; &lt;Surname Prefix from Partner/Spouse (ST)&gt; &amp; &lt;Surname from Partner/Spouse (ST)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Source Table (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Authority (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Facility (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Name Context (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Jurisdiction (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Agency or Department (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifies the user entering the override in the system.</p>
</div>
<div class="paragraph">
<p>When a business rule is overridden, an application must be able to link the override with the user who made it in order to provide a complete audit history of the transaction, especially when there might be a risk associated with the override. In situations where the original message was submitted by batch, the overriding user MAY be different than the original author of the message.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_11_5_ovr_5_override_authorized_by_xcn_01833">2.13.11.5 OVR-5 Override Authorized By (XCN) 01833</h4>
<div class="paragraph">
<p>Components: &lt;Person Identifier (ST)&gt; ^ &lt;Family Name (FN)&gt; ^ &lt;Given Name (ST)&gt; ^ &lt;Second and Further Given Names or Initials Thereof (ST)&gt; ^ &lt;Suffix (e.g., JR or III) (ST)&gt; ^ &lt;Prefix (e.g., DR) (ST)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ <strong>&lt;DEPRECATED-Source Table (CWE)&gt;</strong> ^ &lt;Assigning Authority (HD)&gt; ^ &lt;Name Type Code (ID)&gt; ^ &lt;Identifier Check Digit (ST)&gt; ^ &lt;Check Digit Scheme (ID)&gt; ^ &lt;Identifier Type Code (ID)&gt; ^ &lt;Assigning Facility (HD)&gt; ^ &lt;Name Representation Code (ID)&gt; ^ &lt;Name Context (CWE)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;Name Assembly Order (ID)&gt; ^ &lt;Effective Date (DTM)&gt; ^ &lt;Expiration Date (DTM)&gt; ^ &lt;Professional Suffix (ST)&gt; ^ &lt;Assigning Jurisdiction (CWE)&gt; ^ &lt;Assigning Agency or Department (CWE)&gt; ^ &lt;Security Check (ST)&gt; ^ &lt;Security Check Scheme (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Family Name (FN): &lt;Surname (ST)&gt; &amp; &lt;Own Surname Prefix (ST)&gt; &amp; &lt;Own Surname (ST)&gt; &amp; &lt;Surname Prefix from Partner/Spouse (ST)&gt; &amp; &lt;Surname from Partner/Spouse (ST)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Source Table (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Authority (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Facility (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Name Context (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Jurisdiction (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Agency or Department (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Identifies the health services provider who accepts professional responsibility for overriding the business rule. This field SHOULD be left empty if the recording and responsible health care provider is the same as who entered the override.</p>
</div>
<div class="paragraph">
<p>In some cases, a business rule override might be entered by a data entry clerk on behalf of a health service provider who carries professional responsibility for the decision to override the rule. In order to represent this scenario, the segment must have a field identifying who is responsible for the override decision, in addition to the person recording the override.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_12_sft_software_segment">2.13.12 SFT – Software segment</h3>
<div class="paragraph">
<p>Definition: This segment provides additional information about the software product(s) used as a Sending Application. The primary purpose of this segment is for diagnostic use. There MAY be additional uses per site-specific agreements.</p>
</div>
<div class="paragraph">
<p>Implementers are encouraged to use message profile identifiers (as found in <em>2.13.9.21</em>, "<em>MSH-21 Message Profile Identifier (EI) 01598</em>") to control the behavior of the receiving application rather than relying on application or version information in the SFT segment.</p>
</div>
<div class="paragraph">
<p>For example, if software product A has versions 9 and 10 deployed in different Enterprise locations, the fact that they use different message types, segments, or fields SHOULD be reflected via their message profiles (see section 2B, "Conformance Using Message Profiles"). If there is an upgrade from version 10 to 10.1, this would be reflected in the SFT segment, but changes to the message contents SHOULD be reflected via a new/different conformance profile.</p>
</div>
<div class="paragraph">
<p>Use Case: An external application has been customized to communicate with a centralized patient drug history system. However, due to certain, known characteristics of the external software package, the centralized system must modify its behavior in order to process transactions correctly. In one example, the external application could have multiple versions in production. As such, the centralized application will need to know the name of the <strong>Software Vendor Organization</strong>, the <strong>Software Release Number</strong>, the <strong>Software Product Name</strong>, and the <strong>Software Binary ID</strong> so that it can correctly identify the software submitting the transaction and modify its behavior appropriately.</p>
</div>
<div class="paragraph">
<p>While preparing a transaction for submission to a centralized system the sending application specifies its <strong>Software Install Date</strong> and its configuration settings (<strong>Software Product Information</strong>). While processing the transaction, the centralized system encounters an error. Upon examination of the error, install date and configuration of the software that sent the message, helpdesk staff are able to determine the sending application has not been updated to reflect recent application changes.</p>
</div>
<div class="paragraph">
<p>Use Case: In circumstances where a message is manipulated or modified by multiple systems, a repetition of this segment MAY be appended by each system.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>MSH</p>
</div>
<div class="paragraph">
<p>[\{ SFT }]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – SFT – Software Segment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01834</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Vendor Organization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01835</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Certified Version or Release Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01836</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Product Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01837</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Binary ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01838</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Product Information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01839</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Install Date</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_12_0_sft_field_definitions">2.13.12.0 SFT field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_12_1_sft_1_software_vendor_organization_xon_01834">2.13.12.1 SFT-1 Software Vendor Organization (XON) 01834</h4>
<div class="paragraph">
<p>Components: &lt;Organization Name (ST)&gt; ^ &lt;Organization Name Type Code (CWE)&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;WITHDRAWN Constituent&gt; ^ &lt;Assigning Authority (HD)&gt; ^ &lt;Identifier Type Code (ID)&gt; ^ &lt;Assigning Facility (HD)&gt; ^ &lt;Name Representation Code (ID)&gt; ^ &lt;Organization Identifier (ST)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Organization Name Type Code (CWE): &lt;Identifier (ST)&gt; &amp; &lt;Text (ST)&gt; &amp; &lt;Name of Coding System (ID)&gt; &amp; &lt;Alternate Identifier (ST)&gt; &amp; &lt;Alternate Text (ST)&gt; &amp; &lt;Name of Alternate Coding System (ID)&gt; &amp; &lt;Coding System Version ID (ST)&gt; &amp; &lt;Alternate Coding System Version ID (ST)&gt; &amp; &lt;Original Text (ST)&gt; &amp; &lt;Second Alternate Identifier (ST)&gt; &amp; &lt;Second Alternate Text (ST)&gt; &amp; &lt;Name of Second Alternate Coding System (ID)&gt; &amp; &lt;Second Alternate Coding System Version ID (ST)&gt; &amp; &lt;Coding System OID (ST)&gt; &amp; &lt;Value Set OID (ST)&gt; &amp; &lt;Value Set Version ID (DTM)&gt; &amp; &lt;Alternate Coding System OID (ST)&gt; &amp; &lt;Alternate Value Set OID (ST)&gt; &amp; &lt;Alternate Value Set Version ID (DTM)&gt; &amp; &lt;Second Alternate Coding System OID (ST)&gt; &amp; &lt;Second Alternate Value Set OID (ST)&gt; &amp; &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Authority (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Assigning Facility (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: Organization identification information for the software vendor that created this transaction. The purpose of this field, along with the remaining fields in this segment, is to provide a more complete picture of applications that are sending HL7 messages. The Software Vendor Organization field would allow the identification of the vendor who is responsible for maintaining the application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_12_2_sft_2_software_certified_version_or_release_number_st_01835">2.13.12.2 SFT-2 Software Certified Version or Release Number (ST) 01835</h4>
<div class="paragraph">
<p>Definition: Latest software version number of the sending system that has been compliance tested and accepted. Software Certified Version or Release Number helps to provide a complete picture of the application that is sending/receiving HL7 messages. Versions are important in identifying a specific 'release' of an application. In some situations, the receiving application validates the Software Certified Version or Release Number against a list of "certified" versions/releases of the particular software to determine if the sending application adheres to specific business rules required by the receiving application.</p>
</div>
<div class="paragraph">
<p>Alternatively, the software MAY perform different processing depending on the version of the sending software</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_12_3_sft_3_software_product_name_st_01836">2.13.12.3 SFT-3 Software Product Name (ST) 01836</h4>
<div class="paragraph">
<p>Definition: The name of the software product that submitted the transaction. A key component in the identification of an application is its Software Product Name. This is a key piece of information in identifying an application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_12_4_sft_4_software_binary_id_st_01837">2.13.12.4 SFT-4 Software Binary ID (ST) 01837</h4>
<div class="paragraph">
<p>Definition: Issued by a vendor for each unique software version instance to distinguish between like versions of the same software e.g., a checksum.</p>
</div>
<div class="paragraph">
<p>Software Binary Ids are issued for each unique software version instance. As such, this information helps to differentiate between differing versions of the same software. Identical Primary IDs indicate that the software is identical at the binary level (configuration settings mmightdiffer).</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_12_5_sft_5_software_product_information_tx_01838">2.13.12.5 SFT-5 Software Product Information (TX) 01838</h4>
<div class="paragraph">
<p>Definition: Software identification information that can be supplied by a software vendor with their transaction. Might include configuration settings, etc.</p>
</div>
<div class="paragraph">
<p>This field would contain any additional information an application provides with the transaction it has submitted. This information could be used for diagnostic purposes and provides greater flexibility in identifying a piece of software. Possibilities include setup or configuration parameter information.</p>
</div>
<div class="paragraph">
<p>This field SHOULD NOT be sent unless performing diagnostics.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_12_6_sft_6_software_install_date_dtm_01839">2.13.12.6 SFT-6 Software Install Date (DTM) 01839</h4>
<div class="paragraph">
<p>Definition: Date the submitting software was installed at the sending site.</p>
</div>
<div class="paragraph">
<p>A Software Install Date on its own can often provide key information about the behavior of the application, and is necessary to provide a complete picture of the sending application.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_13_sgh_segment_group_header_segment">2.13.13 SGH – Segment Group Header segment</h3>
<div class="paragraph">
<p>The SGH segment is only used to provide information about the instantiated message structure to indicate that a new segment group begins and subsequent segments SHOULD be interpreted accordingly. It does not contain any patient related data.</p>
</div>
<div class="paragraph">
<p>It is expected that each SGH will be accompanied by an SGT, as depicted below in the abstract message diagram: WRP: Widget Reports</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 29%;">
<col style="width: 36%;">
<col style="width: 13%;">
<col style="width: 22%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segments</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Chapter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSH">MSH</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{SFT}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[UAC]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MSA">MSA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Acknowledgment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[{ERR}]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Segment</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\{</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---Widget begin</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[SGH]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Group Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="mark">2</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Description</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widget Portion</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[SGT}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Group Trailer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="mark">2</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---Widget end</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>HL7 Attribute Table – SGH – Segment Group Header</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03389</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set ID – SGH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03390</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Group Name</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_13_0_sgh_field_definitions">2.13.13.0 SGH field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_13_1_sgh_1_set_id_sgh_si_03389">2.13.13.1 SGH-1 Set ID – SGH (SI) 03389</h4>
<div class="paragraph">
<p>Definition: For the first segment group transmitted, the sequence number SHALL be 1; for the second , it SHALL be 2; and so on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_13_2_sgh_2_segment_group_name_st_03390">2.13.13.2 SGH-2 Segment Group Name (ST) 03390</h4>
<div class="paragraph">
<p>Definition: This field contains the name of the segment group.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_14_sgt_segment_group_trailer_segment">2.13.14 SGT – Segment Group Trailer segment</h3>
<div class="paragraph">
<p>The SGT segment is only used to provide information about the instantiated message structure to the parsing process to indicate that the segment group ends and subsequent segments SHOULD be interpreted accordingly. It does not contain any patient related data. The Segment Group Trailer is required if the segment group header exists.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – SGT – Segment Group Trailer</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03394</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set ID – SGT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03395</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment Group Name</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_14_0_sgt_field_definitions">2.13.14.0 SGT field definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_14_1_sgt_1_set_id_sgt_si_03394">2.13.14.1 SGT-1 Set ID – SGT (SI) 03394</h4>
<div class="paragraph">
<p>Definition: For the first segment group transmitted, the sequence number SHALL be 1; for the second , it SHALL be 2; and so on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_14_2_sgt_2_segment_group_name_st_03395">2.13.14.2 SGT-2 Segment Group Name (ST) 03395</h4>
<div class="paragraph">
<p>Definition: This field contains the name of the segment group.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_13_15_uac_user_authentication_credential_segment">2.13.15 UAC - User Authentication Credential segment</h3>
<div class="paragraph">
<p>Definition: This optional segment provides user authentication credentials, a Kerberos Service Ticket or SAML assertion, to be used by the receiving system to obtain user identification data. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70615"><em>HL7 Table 0615 - User Authentication Credential Type Code</em></a> in Chapter 2C, Code Tables. It is to be used in when the receiving application system requires the sending system to provide end-user identification for accountability or access control in interactive applications. Since user authentication implementations often limit the time period for validity of the session authentication credentials, this segment is not intended for use in non-interactive applications.</p>
</div>
<div class="paragraph">
<p>It is possible that various user authentication credential standards' data mightbe communicated. Kerberos and SAML are two such standards. A user authentication credential is an encapsulated data (ED type) element, as defined by standards, with no HL7-relevant structure.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The UAC segment is defined for use within simple protocols, such as MLLP, that do not have user authentication semantics. Implementations that use WSDL/SOAP, or similar protocols, to envelope HL7 SHOULD employ the user authentication semantics and data structures available within the scope of those protocols rather than the UAC segment.</p>
</div>
<div class="paragraph">
<p>If the receiving system accepts the user credentials in the UAC segment, no specific acknowledgment is required. However, if the receiving system detects an error while processing the UAC segment, its acknowledgment message SHALL report it to the sender via an MSA and ERR segment pair:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ERR-3 (error code) field value is 207 to signify an application error</p>
</li>
<li>
<p>The ERR-7 (diagnostic information) field reports the specific error. Examples of possible errors are:</p>
</li>
<li>
<p>User credentials expected but not provided</p>
</li>
<li>
<p>User credentials invalid</p>
</li>
<li>
<p>User credentials expired</p>
</li>
<li>
<p>User credentials from an unknown or untrusted source</p>
</li>
<li>
<p>User unknown</p>
</li>
<li>
<p>User not allowed to create or access data on the receiving system.</p>
</li>
<li>
<p>User not allowed to initiate a processing function on the receiving system.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When an MSA and ERR segment pair is reported to the sender, an application data response SHALL NOT occur. In such cases it is correct to assume that the sending application&#8217;s user is not authorized to get the data.</p>
</div>
<div class="paragraph">
<p>The processing rules for the ERR segment are outside of HL7&#8217;s scope.</p>
</div>
<div class="paragraph">
<p>HL7 Attribute Table – UAC - User Authentication Credential Segment</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 6%;">
<col style="width: 7%;">
<col style="width: 7%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SEQ</th>
<th class="tableblock halign-left valign-top">LEN</th>
<th class="tableblock halign-left valign-top">C.LEN</th>
<th class="tableblock halign-left valign-top">DT</th>
<th class="tableblock halign-left valign-top">OPT</th>
<th class="tableblock halign-left valign-top">RP/#</th>
<th class="tableblock halign-left valign-top">TBL#</th>
<th class="tableblock halign-left valign-top">ITEM#</th>
<th class="tableblock halign-left valign-top">ELEMENT NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70615">0615</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02267</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential Type Code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02268</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Credential</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_2_13_15_0_uac_field_definitions">2.13.15.0 UAC Field Definitions</h4>

</div>
<div class="sect3">
<h4 id="_2_13_15_1_uac_1_user_authentication_credential_type_code_cwe_02267">2.13.15.1 UAC-1 User Authentication Credential Type Code (CWE) 02267</h4>
<div class="paragraph">
<p>Components: &lt;Identifier (ST)&gt; ^ &lt;Text (ST)&gt; ^ &lt;Name of Coding System (ID)&gt; ^ &lt;Alternate Identifier (ST)&gt; ^ &lt;Alternate Text (ST)&gt; ^ &lt;Name of Alternate Coding System (ID)&gt; ^ &lt;Coding System Version ID (ST)&gt; ^ &lt;Alternate Coding System Version ID (ST)&gt; ^ &lt;Original Text (ST)&gt; ^ &lt;Second Alternate Identifier (ST)&gt; ^ &lt;Second Alternate Text (ST)&gt; ^ &lt;Name of Second Alternate Coding System (ID)&gt; ^ &lt;Second Alternate Coding System Version ID (ST)&gt; ^ &lt;Coding System OID (ST)&gt; ^ &lt;Value Set OID (ST)&gt; ^ &lt;Value Set Version ID (DTM)&gt; ^ &lt;Alternate Coding System OID (ST)&gt; ^ &lt;Alternate Value Set OID (ST)&gt; ^ &lt;Alternate Value Set Version ID (DTM)&gt; ^ &lt;Second Alternate Coding System OID (ST)&gt; ^ &lt;Second Alternate Value Set OID (ST)&gt; ^ &lt;Second Alternate Value Set Version ID (DTM)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This an identifier code for the type of user authentication credential. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70615"><em>HL7 Table 0615 – User Authentication Credential Type Code</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_2_13_15_2_uac_2_user_authentication_credential_ed_02268">2.13.15.2 UAC-2 User Authentication Credential (ED) 02268</h4>
<div class="paragraph">
<p>Components: &lt;Source Application (HD)&gt; ^ &lt;Type of Data (ID)&gt; ^ &lt;Data Subtype (ID)&gt; ^ &lt;Encoding (ID)&gt; ^ &lt;Data (TX)&gt;</p>
</div>
<div class="paragraph">
<p>Subcomponents for Source Application (HD): &lt;Namespace ID (IS)&gt; &amp; &lt;Universal ID (ST)&gt; &amp; &lt;Universal ID Type (ID)&gt;</p>
</div>
<div class="paragraph">
<p>Definition: This is user credential data as supplied by the sender&#8217;s operating platform. The content and structure of this is defined by other standards and contain no HL7-relevant data.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_14_data_types">2.14 Data types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70440"><em>HL7 Table 0440 – Data Types</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_15_miscellaneous_hl7_tables_used_across_all_chapters">2.15 Miscellaneous HL7 tables used across all chapters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_15_1_message_type_table_0076">2.15.1 Message Type Table (0076)</h3>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70076"><em>HL7 Table 0076 – Message Type</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_15_2_event_type_table_0003">2.15.2 Event Type Table (0003)</h3>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70003"><em>HL7 Table 0003 – Event Type</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_15_3_message_structure_table_0354">2.15.3 Message Structure Table (0354)</h3>
<div class="paragraph">
<p>The first column of this table contains the message structure code, which describes a particular HL7 "abstract message structure definition" in terms of segments, as defined in section <em>2.10.8</em>, "<em>Message representation</em></p>
</div>
<div class="paragraph">
<p>For each trigger event the messages that are exchanged when the trigger event occurs are defined using the HL7 abstract message syntax as follows:</p>
</div>
<div class="paragraph">
<p>Each message is defined in special notation that lists the segment IDs in the order they would appear in the message. Braces, \{ . . . }, indicate one or more repetitions of the enclosed group of segments. Of course, the group MAY contain only a single segment. Brackets, [ . . . ], show that the enclosed group of segments is optional. If a group of segments is optional and MAY repeat it SHALL be enclosed in brackets and braces, [\{&#8230;&#8203;}].</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> [\{&#8230;&#8203;}] and \{[&#8230;&#8203;]} are equivalent.</p>
</div>
<div class="paragraph">
<p>Whenever braces or brackets enclose more than one segment ID a special stylistic convention is used to help the reader understand the hierarchy of repetition. For example, the first segment ID appears on the same line as the brace, two columns to the right. The subsequent segment IDs appear under the first. The closing brace appears on a line of its own in the same column as the opening brace. This convention is an optional convenience to the user. If there is conflict between its use and the braces that appear in a message schematic, the braces define the actual grouping of segments that is permitted.</p>
</div>
<div class="paragraph">
<p>A choice of one segment from a group of segments is indicated by using angle brackets to delimit the group and vertical bar delimiters between the several segments.</p>
</div>
<div class="paragraph">
<p>Example: The following example allows a choice of segments :</p>
</div>
<div class="paragraph">
<p>&lt;ABC | DEF | GHI | JKL &gt;</p>
</div>
<div class="paragraph">
<p>Example: The following example allows a choice of segments and/or segment groups. (see Figure 2-5 Hypothetical schematic message)</p>
</div>
<div class="paragraph">
<p>The first choice is a repeating group consisting of an ABC segment followed by optionally repeating NTE segments.</p>
</div>
<div class="paragraph">
<p>The second choice is the DEF segment.</p>
</div>
<div class="paragraph">
<p>The third choice is a group with a required GHI segment followed by an optionally repeating group containing a PRT segment followed by an optionally repeating NTE segment.</p>
</div>
<div class="paragraph">
<p>&lt;\{ABC [{NTE}] } |DEF | GHI [\{PRT [{NTE}] }] &gt;</p>
</div>
<div class="paragraph">
<p>Chapter Formats For Defining HL7 Messages". The second column lists the various HL7 trigger events that use the particular abstract message definition. For example, the message structure code ADT_A01 describes the single abstract message structure used by the trigger events A01, A04, A08 and A13. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70354"><em>HL7 Table 0354 – Message Structure</em></a> in Chapter 2C, Code Tables, for valid values</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_15_4_coding_system_table_0396">2.15.4 Coding System Table (0396)</h3>
<div class="paragraph">
<p><strong>Note:</strong> The Vocabulary T.C. is the steward of HL7 Table 0396. As of v2.6, no special characters, except for underscore if absolutely necessary, are allowed for the Value in this table.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70396"><em>HL7 Table 0396 - Coding System</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_15_5_yesno_indicator_table_0136">2.15.5 Yes/no Indicator Table (0136)</h3>
<div class="paragraph">
<p>The actual interpretation of Yes/No is context sensitive. Individual chapters will further refine the meaning of Yes/No in their specific context. Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70136"><em>HL7 Table 0136 - Yes/no Indicator</em></a> in Chapter 2C, Code Tables, for valid values</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_15_6_expanded_yesno_indicator_table_0532">2.15.6 Expanded Yes/no Indicator Table (0532)</h3>
<div class="paragraph">
<p>This table expands on the original Yes/no indicator table by including "flavors of null". It is intended to be applied to fields where the response is not limited to "yes" or "no". Refer to <a href="file:///E:\V2\v2.9%20final%20Nov%20from%20Frank\V29_CH02C_Tables.docx#HL70532"><em>HL7 Table 0532 – Expanded Yes/no Indicator</em></a> in Chapter 2C, Code Tables, for valid values.</p>
</div>
<div class="paragraph">
<p>Use Case: A reporting facility/person has little or no information on a particular event or outcome and these are reported as unknown for public health reporting purposes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_16_sample_control_messages">2.16 Sample Control Messages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_16_1_general_acknowledgment">2.16.1 General acknowledgment</h3>
<div class="paragraph">
<p>LAB acknowledges the message that ADT sent identified as ZZ9380. (LAB and ADT, the sending and receiving system IDs, are site-defined.) Both systems are associated with the same FACILITY, 767543. The <strong>AA</strong> code in the MSA segment indicates that the message was accepted by the application.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|LAB|767543|ADT|767543|19900314130405-500||ACK</sup>A08^ACK |XX3657|P|2.9&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>MSA|AA|ZZ9380&lt;cr&gt;</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_16_2_general_acknowledgment_error_return">2.16.2 General acknowledgment, error return</h3>
<div class="paragraph">
<p>The <strong>AR</strong> code in MSA indicates that the application rejected the message for functional reasons. The optional ERR segment includes here that the 16th field of the PID segment with the SET ID value of 1 had an error which was defined by the locally-established code X3L. The optional text message UNKNOWN COUNTY CODE in the link is designed to help programmers and support personnel while reviewing message logs.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|LAB|767543|ADT|767543|199003141304-0500||ACK</sup>A08^ACK |XX3657|P|2.9&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>MSA|AR|ZZ9380| &lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>ERR| |PID<sup>1</sup>11^^9|103|E&lt;cr&gt;</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_16_3_message_using_sequence_number_protocol">2.16.3 Message using sequence number: protocol</h3>
<div class="paragraph">
<p>The sender initiates the link with a message that has no functional content. The sequence number is 0. The message type and event code are not used.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|ADT|767543|LAB|767543|199003141304-0500||ADT</sup>A08^ADT_A01|XX3657|P|2.9|0&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>The responder uses a general acknowledgment. The expected sequence number is 1.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|LAB|767543|ADT|767543|199003141304-0500||ACK</sup>A08^ACK |ZZ9380|P|2.9&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>MSA|AA|XX3657||1&lt;cr&gt;</p>
</div>
<div class="paragraph">
<p>See section 2.9.1, "Sequence number protocol" for further detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_16_4_message_fragmentation">2.16.4 Message fragmentation</h3>
<div class="paragraph">
<p>This summarizes the methodology for splitting a single logical HL7 message among two or more actual HL7 messages. The actual specifications for this, the segment definitions of the ADD and DSC segments, and examples are in Section <em>2.9.2</em>, "<em>Continuation messages and segments</em>".</p>
</div>
<div class="paragraph">
<p>Continuing of messages is a generic methodology that can be used for all HL7 message types. It can be used to split based on segment boundaries, on field boundaries, and to split a single field among several messages. It utilizes two specific segments, ADD and DSC, as well as a field in the message header, MSH-14 Continuation Pointer.</p>
</div>
<div class="paragraph">
<p>When a message is continued, a unique continuation value is used. This same value will appear in MSH-14 and DSC-1 as appropriate for a single pair of messages. This allows messages to be "chained together".</p>
</div>
<div class="paragraph">
<p>Here are two examples of ways to create continuation pointers for fragmented messages. The only absolute requirement is that when the sending application values the continuation pointer, the receiving application can appropriately reconstruct the message.</p>
</div>
<div class="paragraph">
<p>Sitecode-interfaceapplicationcode-date-sequentialcounterwithindate</p>
</div>
<div class="paragraph">
<p>This will guarantee uniqueness of this field.</p>
</div>
<div class="paragraph">
<p>e.g., BWH-LDS-19990331-27 for the 27<sup>th</sup> large message to be created on March 31, within the Discharge Summary interfaces at BWH</p>
</div>
<div class="paragraph">
<p>An alternative method of valuing the continuation pointer:</p>
</div>
<div class="paragraph">
<p>Sitecode-interfaceapplicationcode-medicalrecordnumber-datetime</p>
</div>
<div class="paragraph">
<p>e.g. MGH-PCIS-1234567-19980331121314 for a message created on March 31, at 12:13:14pm for patient medical record number 1234567, within the PCIS interfaces at MGH</p>
</div>
<div class="paragraph">
<p>Sending Application Note: In the ADD segment, a trailing field delimiter, i.e., the vertical bar character, after the final field, has explicit meaning. The sending application SHOULD NOT include a trailing field delimiter for the last field in the ADD segment unless it has completely valued the entire field from the message being continued.</p>
</div>
<div class="paragraph">
<p>Receiving Application Note: The receiving application will need to be concerned with a single segment and a single field being continued.</p>
</div>
<div class="paragraph">
<p>Receiving a message with an empty ADD segment followed by a DSC segment is the notification that the segment preceding the ADD is being continued in a subsequent message. Note that the continuing message might not be the next one received! The receiver must match up the continuation pointer value from MSH-14 of subsequent messages to the DSC-1 continuation pointer value of the prior message. Also if the continuing message contains an ADD segment, the receiver SHOULD continue appending to the fields from the segment being continued with values from the ADD segment. For example, if OBX-5 is being continued, the continuation will appear in ADD-1 of the continuing message. If there were a value for OBX-13 of the original message, that would appear in ADD-9 of the continuing message, assuming that the remainder of the OBX segment fit into the single ADD segment.</p>
</div>
<div class="paragraph">
<p>Question: if continuing a message after the completion of a complete segment, SHOULD the continuing message have an empty ADD segment or not? Answer: No. This means that a continuing message need not have an ADD segment, if the continued message was split on a segment boundary.</p>
</div>
<div class="paragraph">
<p>Notation conventions: items within angle brackets are comments and not intended to represent a portion of an actual message. For example, &lt;this is a comment&gt;.</p>
</div>
<div class="paragraph">
<p>Note the multiple continuation pointer values, one for each pair of physical messages.</p>
</div>
<div class="paragraph">
<p><strong>Message 1</strong></p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;||&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>ORC|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>OBR|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>OBX|1|FT|^Discharge Summary|1|This is the first sentence of a long</p>
</div>
<div class="paragraph">
<p>message. This is the second sentence of a long message.</p>
</div>
<div class="paragraph">
<p>&lt;snip&gt;</p>
</div>
<div class="paragraph">
<p>This is the 967th sentence of "</p>
</div>
<div class="paragraph">
<p>ADD|</p>
</div>
<div class="paragraph">
<p>DSC|BWH-LDS-19990405-6|</p>
</div>
<div class="paragraph">
<p><strong>Message 2</strong></p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;|BWH-LDS-19990405-6|</p>
</div>
<div class="paragraph">
<p>ADD|a long message. This is the 968th sentence of a long message.</p>
</div>
<div class="paragraph">
<p>&lt;snip&gt;</p>
</div>
<div class="paragraph">
<p>This is the 1001st line of</p>
</div>
<div class="paragraph">
<p>&lt;there SHOULD be no trailing field delimiter after the last field in this ADD segment&gt;</p>
</div>
<div class="paragraph">
<p>DSC|BWH-LDS-19990405-7|</p>
</div>
<div class="paragraph">
<p><strong>Message 3</strong></p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;|BWH-LDS-19990405-7|</p>
</div>
<div class="paragraph">
<p>ADD|a long message. This is the 1002nd sentence of a long message. &lt;snip&gt; This is the final sentence of this long message!|||||F||199707211325|</p>
</div>
<div class="paragraph">
<p>DG1|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>&lt;end of message&gt;</p>
</div>
<div class="paragraph">
<p>The following examples discuss an unsolicited transmission of an observation message, ORU^R01.</p>
</div>
<div class="paragraph">
<p>The expected result values in OBX-5 Observation Value, for reports (e.g., autopsy, pathology) MAY exceed the message length restrictions of one or more interfaces.</p>
</div>
<div class="paragraph">
<p>Thus the OBX-5 Observation Value data element will be split into more than one message.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example intended to illustrate the interpretation of Chapter 2 and 7. It reflects a single logical message broken up into three distinct messages.</p>
</div>
<div class="paragraph">
<p>Example 1, a single field being split across three messages</p>
</div>
<div class="paragraph">
<p>Message #1: ---------------------------------------------------------------</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: MSH-14, continuation pointer, is empty.</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;||&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>ORC|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>OBR|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>OBX|1|FT|^Discharge Summary|1|This is the first sentence of a long</p>
</div>
<div class="paragraph">
<p>message. This is the second sentence of a long message.</p>
</div>
<div class="paragraph">
<p>&lt;snip&gt;</p>
</div>
<div class="paragraph">
<p>This is the 967<sup>th</sup> sentence of "</p>
</div>
<div class="paragraph">
<p>ADD|</p>
</div>
<div class="paragraph">
<p>DSC|&lt;continuation-pointer-value-1&gt;|F</p>
</div>
<div class="paragraph">
<p>Message #2: --------------------------------------------------------------</p>
</div>
<div class="paragraph">
<p>Note: MSH-14, continuation pointer, is valued with the same value as in DSC-1, continuation pointer from the message this is continuing, in this case Message #1.</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;|&lt;continuation-pointer-value-1&gt;|</p>
</div>
<div class="paragraph">
<p>ADD|a long message. This is the 968th sentence of a long message.</p>
</div>
<div class="paragraph">
<p>&lt;snip&gt;</p>
</div>
<div class="paragraph">
<p>This is the 1001st line of</p>
</div>
<div class="paragraph">
<p>&lt;there SHOULD be no trailing field delimiter after the last field in this ADD segment&gt;</p>
</div>
<div class="paragraph">
<p>DSC|&lt;continuation-pointer-value-2&gt;|F</p>
</div>
<div class="paragraph">
<p>Message #3: ---------------------------------------------------------------</p>
</div>
<div class="paragraph">
<p>Note: MSH-14, continuation pointer, is valued with the same value as in DSC-1, continuation pointer from the message this is continuing, in this case Message #1.</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;|&lt;continuation-pointer-value-2&gt;|</p>
</div>
<div class="paragraph">
<p>ADD|a long message. This is the 1002nd sentence of a long message. &lt;snip&gt; This is the final sentence of this long message!|||||F||199707211325|</p>
</div>
<div class="paragraph">
<p>&lt;remaining segments after the big OBX from the original message go here, after the ADD segment&gt;</p>
</div>
<div class="paragraph">
<p>PR1|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>DG1|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Example 2, a single message being split across two messages, but on segment boundaries</p>
</div>
<div class="paragraph">
<p>Message #1: ---------------------------------------------------------------</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> MSH-14, continuation pointer, is empty.</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;||&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>PID|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>ORC|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>OBR|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>OBX|1|FT|^Discharge Summary|1|This is the first sentence of a long</p>
</div>
<div class="paragraph">
<p>message. This is the final sentence of this long discharge summary!|||||F||199707211325|</p>
</div>
<div class="paragraph">
<p>DSC|&lt;continuation-pointer-value-3&gt;|F</p>
</div>
<div class="paragraph">
<p>Message #2: --------------------------------------------------------------</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> MSH-14 Continuation Pointer, is valued with the same value as in DSC-1, continuation pointer from the message this is continuing, in this case Message #1.</p>
</div>
<div class="paragraph">
<p>Note that no ADD segment is necessary, since a segment is not being split across two messages.</p>
</div>
<div class="paragraph">
<p>MSH|&#8230;&#8203;|&lt;field-13&gt;|&lt;continuation-pointer-value-3&gt;|</p>
</div>
<div class="paragraph">
<p>PR1|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>DG1|&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_16_5_acknowledgment_message_using_original_mode_processing">2.16.5 Acknowledgment message using original mode processing</h3>
<div class="paragraph">
<p>This example shows the lab system using the Master Files specification to send two update test dictionary entries to an ICU system.</p>
</div>
<div class="paragraph">
<p>Initiating Message:</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|LABxxx|ClinLAB|ICU||19910918060544-500||MFN</sup>M03^MFN_M03|MSGID002|P|2.9</p>
</div>
<div class="paragraph">
<p>MFI|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Response Message: Original mode acknowledgment of the HL7 message according to MFI Response Level Code of AL.</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|ICU||LABxxx|ClinLAB|19910918060545-500||MFK</sup>M03^MFK_M01|MSGID99002|P|2.9</p>
</div>
<div class="paragraph">
<p>MSA|AA|MSGID002</p>
</div>
<div class="paragraph">
<p>MFI|LABxxx^Lab Test Dictionary^L|UPD|||MFAA</p>
</div>
<div class="paragraph">
<p>MFA|MUP|199110010000|199110010040|S|12345<sup>WBC</sup>L</p>
</div>
<div class="paragraph">
<p>MFA|MUP|199110010000|199110010041|S|6789<sup>RBC</sup>L&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_16_6_acknowledgment_message_using_enhanced_mode_processing">2.16.6 Acknowledgment message using enhanced mode processing</h3>
<div class="paragraph">
<p>Initial message with accept acknowledgment</p>
</div>
<div class="paragraph">
<p>MSH|<sup>~\&amp;|LABxxx|ClinLAB|ICU||19910918060544-500||MFN</sup>M03^MFN_M03|MSGID002|P|2.9|||AL|AL</p>
</div>
<div class="paragraph">
<p>MFI|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19910918060545-500||MSA|MSGID99002|P|2.9</p>
</div>
<div class="paragraph">
<p>MSA|CA|MSGID002</p>
</div>
<div class="paragraph">
<p>Application acknowledgment message</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19911001080504-500|| MFK<sup>M03</sup>MFK_M01|MSGID5002|P|2.9|||AL|</p>
</div>
<div class="paragraph">
<p>MSA|AA|MSGID002</p>
</div>
<div class="paragraph">
<p>MFI|&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>MSH|^~\&amp;|LABxxx|ClinLAB|ICU||19911001080507-500||ACK|MSGID444|P|2.9</p>
</div>
<div class="paragraph">
<p>MSA|CA|MSGID5002</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_17_outstanding_issues">2.17 Outstanding Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following items are being discussed in the Infrastructure and Messaging work group for addition to future versions of HL7:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>1) Conformance Based Queries use of the Message Profiles. Current status of this can be found on the Conformance WG web site (<a href="http://www.hl7.org" class="bare">http://www.hl7.org</a>).</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The URI is: <a href="http://www.ietf.org/rfc/rfc3305.txt" class="bare">http://www.ietf.org/rfc/rfc3305.txt</a>. Note: All IETF documents are available online, and RFCs are available through URIs using this format.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Details on MessageFormat can be found at <em><a href="http://liveweb.archive.org/http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html" class="bare">http://liveweb.archive.org/http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html</a></em>.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. The URI is: <a href="http://www.ietf.org/rfc/rfc3305.txt" class="bare">http://www.ietf.org/rfc/rfc3305.txt</a>. Note: All IETF documents are available online, and RFCs are available through URIs using this format.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. Available from ISO 1 Rue de Varembe, Case Postale 56, CH 1211, Geneve, Switzerland
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. The URI is: <a href="http://www.ietf.org/rfc/rfc3305.txt" class="bare">http://www.ietf.org/rfc/rfc3305.txt</a>. Note: All IETF documents are available online, and RFCs are available through URIs using this format.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-10-31 13:16:01 -0600
</div>
</div>
</body>
</html>